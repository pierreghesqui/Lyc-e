// ZIM js Interactive Media framework http://zimjs.com by Dan Zen http://danzen.com (c) 2017
// Also see http://zimjs.com/code/distill to minify only the functions in your app
// free to use - donations welcome of course! http://zimjs.com/donate

function zid(e){return z_d("1"),document.getElementById(e)}function zss(e){if(z_d("2"),document.getElementById(e))return document.getElementById(e).style;zon&&zog("zim wrap - zss(): id not found")}function zgo(e,t,o,n,i,r){if(z_d("3"),!(zot(t)&&""!=t||"_self"==t)){var a="";return o&&(a+="width="+o+","),n&&(a+="height="+n+","),i&&(a+="fullscreen=yes,"),r&&(a+="modal=yes,alwaysRaised=yes"),window.open(e,t,a)}window.location.href=e}function zum(e){if(z_d("4"),!zot(e))return Number(String(e).replace(/[^\d\.\-]/g,""))}function zot(e){return null==e}function zop(e){z_d("5"),zot(e)||(e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0))}function zil(){z_d("6");var e=function(e){e||(e=event),e.keyCode&&e.keyCode>=32&&e.keyCode<=40&&e.preventDefault()},t=function(e){e||(e=event),e.preventDefault()},o=t;return window.addEventListener("keydown",e),window.addEventListener("mousewheel",t),window.addEventListener("DOMMouseScroll",o),[e,t,o]}function zet(e){function t(){var t=this;this.on=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var i=t.tags,r=0;r<i.length;r++)i[r].addEventListener(o,n)},this.off=function(o,n){if(!(zot(e)||zot(o)||zot(n)))for(var i=t.tags,r=0;r<i.length;r++)i[r].removeEventListener(o,n)},Object.defineProperty(t,"tags",{get:function(){return zot(e)?[]:"string"==typeof e||e instanceof String?document.querySelectorAll(e):"string"==typeof e.innerHTML?[e]:[]},set:function(e){}}),this.css=function(e,o){for(var n=t.tags,i=0;i<n.length;i++)if(1==arguments.length&&arguments[0].constructor==={}.constructor)for(var r in e)n[i].style[r]=e[r];else{if(1==arguments.length)return t.tags[0].style[e];n[i].style[e]=o}},this.prop=function(e,o){if(!zot(e)){for(var n=t.tags,i=[],r=0;r<n.length;r++)if(zot(o))if(e.constructor==={}.constructor)for(var a in e)n[r][a]=e[a];else i.push(n[r][e]);else n[r][e]=o;return zot(o)?i:void 0}}}return z_d("6.1"),new t}function isDUO(e){return 1==e.length&&e[0].constructor==={}.constructor}function zob(e,t,o,n){if(isDUO(t)){z_d("7");var i,r,a=t[0],s=zot(o)?e.toString().split(/\n/,1)[0].match(/\((.*)\)/)[1].replace(/\s+/g,"").split(","):o.replace(/\s+/g,"").split(","),l=[];for(i=0;i<s.length;i++)r=s[i].split("=")[0],s[i]=r,l.push(a[r]);for(i in a)s.indexOf(i)<0&&zon&&zog(e,"bad argument "+i);var d;return!(d=e.prototype.isPrototypeOf(n)?new(e.bind.apply(e,[null].concat(l))):e.apply(null,l))||d}}function zik(e){if(z_d("7.5"),!zot(e)){if(e.constructor==={}.constructor||Array.isArray(e)||"function"==typeof e){if(Array.isArray(e))return zik(t=e[Math.floor(Math.random()*e.length)]);if(e.constructor==={}.constructor){if(zot(e.max))return e;zot(e.integer)&&(e.integer=!1);var t=zim.rand(e.min,e.max,e.integer,e.negative);return t}if("function"==typeof e)return zik(e())}return e}}function z_d(e){zim&&zim.DISTILL&&zim.distillery.push(e)}function zimify(e){z_d("83.3");var t={drag:function(e,t,o,n,i,r,a,s,l,d,c,u,h){return isDUO(arguments)?(arguments[0].obj=this,zim.drag(arguments[0])):zim.drag(this,e,t,o,n,i,r,a,s,l,d,c,u,h)},noDrag:function(){return zim.noDrag(this)},dragRect:function(e){return zim.dragRect(this,e)},setSwipe:function(e){return zim.setSwipe(this,e)},hitTestPoint:function(e,t){return zim.hitTestPoint(this,e,t)},hitTestReg:function(e){return zim.hitTestReg(this,e)},hitTestRect:function(e,t){return zim.hitTestRect(this,e,t)},hitTestCircle:function(e,t){return zim.hitTestCircle(this,e,t)},hitTestBounds:function(e,t){return zim.hitTestBounds(this,e,t)},boundsToGlobal:function(e,t){return zim.boundsToGlobal(this,e,t)},hitTestGrid:function(e,t,o,n,i,r,a,s,l,d,c,u){return zim.hitTestGrid(this,e,t,o,n,i,r,a,s,l,d,c,u)},move:function(e,t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S,T,k,j,M,P,E){return isDUO(arguments)?(arguments[0].target=this,zim.move(arguments[0])):zim.move(this,e,t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S,T,k,j,M,P,E)},animate:function(e,t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S,T,k,j,M,P,E){return isDUO(arguments)?(arguments[0].target=this,zim.animate(arguments[0])):zim.animate(this,e,t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S,T,k,j,M,P,E)},pauseZimAnimate:function(){},stopZimAnimate:function(){},wiggle:function(e,t,o,n,i,r,a,s,l,d){return isDUO(arguments)?(arguments[0].target=this,zim.wiggle(arguments[0])):zim.wiggle(this,e,t,o,n,i,r,a,s,l,d)},loop:function(e,t,o,n,i){return zim.loop(this,e,t,o,n,i)},copyMatrix:function(e){return zim.copyMatrix(this,e)},pos:function(e,t){return zim.pos(this,e,t)},mov:function(e,t){return zim.mov(this,e,t)},alp:function(e){return zim.alp(this,e)},rot:function(e){return zim.rot(this,e)},siz:function(e,t,o){return zim.siz(this,e,t,o)},ske:function(e,t){return zim.ske(this,e,t)},reg:function(e,t){return zim.reg(this,e,t)},sca:function(e,t){return zim.sca(this,e,t)},scale:function(e,t){return zim.scale(this,e,t)},scaleTo:function(e,t,o,n,i){return isDUO(arguments)?(arguments[0].obj=this,zim.scaleTo(arguments[0])):zim.scaleTo(this,e,t,o,n,i)},fit:function(e,t,o,n,i){return isDUO(arguments)?(arguments[0].obj=this,zim.fit(arguments[0])):zim.fit(this,e,t,o,n,i)},outline:function(e,t){return isDUO(arguments)?(arguments[0].obj=this,zim.outline(arguments[0])):zim.outline(this,e,t)},addTo:function(e,t){return zim.addTo(this,e,t)},removeFrom:function(e){return zim.removeFrom(this,e)},added:function(e,t,o){return zim.added(this,e,t,o)},centerReg:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.centerReg(arguments[0])):zim.centerReg(this,e,t,o)},center:function(e,t,o){return isDUO(arguments)?(arguments[0].obj=this,zim.center(arguments[0])):zim.center(this,e,t,o)},place:function(e){return zim.place(this,e)},placeReg:function(e){return zim.placeReg(this,e)},expand:function(e,t){return zim.expand(this,e,t)},setMask:function(e){return zim.setMask(this,e)},cloneProps:function(e){return e.alpha=this.alpha,e.rotation=this.rotation,e.mouseEnabled=this.mouseEnabled,e.tickEnabled=this.tickEnabled,e.name=this.name,e.regX=this.regX,e.regY=this.regY,e.visible=this.visible,e.shadow=this.shadow,zim.copyMatrix(e,this),e.compositeOperation=this.compositeOperation,e.snapToPixel=this.snapToPixel,e.filters=null==this.filters?null:this.filters.slice(0),e.mask=this.mask,e.hitArea=this.hitArea,e.cursor=this.cursor,e._bounds=this._bounds,e},cloneChildren:function(e){e.children.length&&e.removeAllChildren();for(var t=e.children,o=0,n=this.children.length;o<n;o++){var i=this.children[o].clone();i.parent=e,t.push(i)}return e}};for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return Object.defineProperty(e,"width",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.width*this.scaleX},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zog("width needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=this.scaleY=o}}}),Object.defineProperty(e,"height",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.height*this.scaleY},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zog("height needs bounds set with setBounds()");else{var o=e/t.height;this.scaleX=this.scaleY=o}}}),Object.defineProperty(e,"widthOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.width*this.scaleX},set:function(e){var t=this.getBounds();if(zot(t)||0==t.width)zog("widthOnly needs bounds set with setBounds()");else{var o=e/t.width;this.scaleX=o}}}),Object.defineProperty(e,"heightOnly",{enumerable:!0,get:function(){var e=this.getBounds();return zot(e)?null:e.height*this.scaleY},set:function(e){var t=this.getBounds();if(zot(t)||0==t.height)zog("heightOnly needs bounds set with setBounds()");else{var o=e/t.height;this.scaleY=o}}}),e}"undefined"==typeof zon&&(zon=!1);var zog=console.log.bind(console),zim=function(e){return e.Wonder=function(t,o,n,i,r){function a(){u.length>0&&(e.async(r+"?wonder="+JSON.stringify(u)),u=[],f++)}function s(e,t){return zot(e)?(zog("zim.Wonder "+t+" - please provide a keyword"),!1):!d[t+"sOff"][e]}var l;if(l=zob(e.Wonder,arguments,"wid, client, app, notes, server",this))return l;if(z_d("82"),zot(t))zog("zim.Wonder() - please provide Wonder ID (see http://zimjs.com/code/wonder/)");else{zot(r)&&(r="http://54.237.229.197:3001/wonder");var d=this;zot(e.wonderSession)&&(e.wonderSession="W"+e.rand(1e5,999999));var c,u=[],h=setInterval(a,1e3),f=0,g=setInterval(function(){f>28&&(u.push({id:t,c:o,a:n,n:i,k:c,t:"e",v:"frequency max - terminated",s:e.wonderSession}),zog("zim.Wonder() - frequency max - terminated"),d.dispose()),f=0},3e4);this.countsOff={},this.timesOff={},this.ordersOff={},this.count=function(r){s(r,"count")&&(c=r,u.push({id:t,c:o,a:n,n:i,k:r,t:"c",v:1,s:e.wonderSession}))};var p={};this.timeStart=function(e){s(e,"time")&&(d.timeEnd(e),c=e,p[e]=(new Date).getTime())};var m={};this.timePause=function(e){s(e,"time")&&(m[e]||(m[e]=(new Date).getTime()))},this.timeUnpause=function(e){if(s(e,"time")&&m[e]){var t=(new Date).getTime()-m[e];p[e]&&(p[e]+=t),delete m[e]}},this.timeEnd=function(r){if(s(r,"time")&&p[r]){var a=m[r]?m[r]:(new Date).getTime(),l=Math.round((a-p[r])/1e3);delete m[r],delete p[r],u.push({id:t,c:o,a:n,n:i,k:r,t:"t",v:l,s:e.wonderSession})}},this.order=function(r,a){s(r,"order")&&(c=r,zot(a)?zog("zim.Wonder order() - please provide an item"):u.push({id:t,c:o,a:n,n:i,k:r,t:"o",v:a,s:e.wonderSession}))},this.countOff=function(e){d.countsOff[e]=1},this.countOn=function(e){delete d.countOff[e]},this.timeOff=function(e){d.timesOff[e]=1},this.timeOn=function(e){delete d.timesOff[e]},this.orderOff=function(e){d.ordersOff[e]=1},this.orderOn=function(e){delete d.ordersOff[e]},this.dispose=function(){a(),clearInterval(h),clearInterval(g)}}},e}((zim=function(e){function t(e,t){t?(e.mouseChildren=!0,e.mouseEnabled=!0,e._enabled=!0):(e.mouseChildren=!1,e.mouseEnabled=!1,e._enabled=!1)}if(e.shuffle=function(e){if(z_d("8"),!zot(e)){var t,o,n=e.length;if(0==n)return e;for(;--n;)t=Math.floor(Math.random()*(n+1)),o=e[n],e[n]=e[t],e[t]=o;return e}},e.rand=function(e,t,o,n){if(z_d("9"),zot(e)&&zot(t))return Math.random();(zot(e)||isNaN(e))&&(e=0),(zot(t)||isNaN(t))&&(t=0),e%1==0&&t%1==0||(o=!1),zot(o)&&(o=!0),n&&Math.random()>.5&&(e*=-1,t*=-1),o&&(e>t?e++:t>e&&t++);var i;return 0==e&&0==t?0:(i=0==t?Math.random()*e:Math.min(e,t)+Math.random()*(Math.max(e,t)-Math.min(e,t)),o?Math.floor(i):i)},e.loop=function(t,o,n,i,r,a){function s(e){return zot(r)&&(r=n?e:0),zot(a)&&(a=n?0:e),n&&a>r||!n&&r>a?0:(r<0&&a)<0||r>e&&a>e?0:(r=Math.max(0,Math.min(r,e)),a=Math.max(0,Math.min(a,e)),Math.floor((n?r-a:a-r)/i)+1)}var l;if(l=zob(e.loop,arguments,"obj, call, reverse, step, start, end"))return l;if(z_d("9.5"),!zot(t)&&!zot(o)){zot(n)&&(n=!1),(zot(i)||i<=0)&&(i=1);var d="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":"invalid";if("invalid"!=d)if("number"==d||"array"==d){if(0==(g=s((u="number"==d?t:t.length)-1)))return;if(n)for(f=r;f>=a;f-=i){if("number"==d)c=o(f,g,r,a,t);else c=o(t[f],f,g,r,a,t);if(void 0!==c)return c}else for(f=r;f<=a;f+=i){if("number"==d)c=o(f,g,r,a,t);else var c=o(t[f],f,g,r,a,t);if(void 0!==c)return c}}else if("object"==d){var u=0,h=[];for(var f in t)u++,h.push(f);var g=s(u-1);if(0==g)return;if(n){for(f=r;f>=a;f-=i)if(void 0!==(c=o(h[f],t[h[f]],f,g,r,a,t)))return c}else for(f=r;f<=a;f+=i)if(void 0!==(c=o(h[f],t[h[f]],f,g,r,a,t)))return c}}},e.timeout=function(e,t){function o(){var r=Date.now();if(n.time+=r-i,i=r,n.time>=e)return t(n),void n.clear();n.rid=requestAnimationFrame(o)}if(z_d("9.7"),!zot(t)&&"function"==typeof t){zot(e)&&(e=1e3),e=zik(e);var n={startTime:Date.now(),time:0,paused:!1},i=n.startTime;return o(),n.pause=function(e){zot(e)&&(e=!0),e?cancelAnimationFrame(n.rid):(i=Date.now(),o()),n.paused=e},n.clear=function(){n&&cancelAnimationFrame(n.rid);for(var e in n)delete n[e];n.pause=function(){},n.clear=function(){}},n}},e.interval=function(e,t,o,n){function i(){a.startTime=Date.now(),a.interval=zik(a.time),a.id=setTimeout(function(){a.paused||(a.rid=requestAnimationFrame(i),a.count++,t(a),r())},a.interval)}function r(){zot(o)||a.count>=(n?o-1:o)&&a.clear()}if(z_d("9.8"),!zot(t)&&"function"==typeof t&&(zot(e)&&(e=1e3),zot(n)&&(n=!1),zot(o)||!(isNaN(o)||o<=0))){var a={count:0,paused:!1,time:e};i(),n&&setTimeout(function(){t(a),r()},10);var s;return a.pause=function(e,o){zot(e)&&(e=!0),e?(clearTimeout(s),clearTimeout(a.id),cancelAnimationFrame(a.rid),a.pauseTimeLeft=a.interval-(Date.now()-a.startTime)):(s=setTimeout(function(){a.count++,t(a),i(),r()},o?0:a.pauseTimeLeft),a.pauseTimeLeft=null),a.paused=e},a.clear=function(){clearTimeout(s),cancelAnimationFrame(a.rid),clearTimeout(a.id);var e=a.count;for(var t in a)delete a[t];a.count=e,a.pause=function(){},a.clear=function(){}},a}},e.copy=function(t,o){if(z_d("10"),zot(o)&&(o=!1),null==t||!(t instanceof Array||t.constructor=={}.constructor))return o&&t.clone?t.clone():t;if(t instanceof Array){for(var n=[],i=0;i<t.length;i++)n[i]=e.copy(t[i],o);return n}if(t.constructor=={}.constructor){var r={};for(var a in t){var s=e.copy(t[a],o);t.hasOwnProperty(a)&&(r[a]=s)}return r}},e.arraysEqual=function(t,o,n){if(z_d("11"),zot(t)||zot(o))return!1;if(zot(n)&&(n=!0),t.length!=o.length)return!1;for(var i=0;i<t.length;i++)if(t[i]instanceof Array&&o[i]instanceof Array){if(!e.arraysEqual(t[i],o[i],n))return!1}else{if(n&&t[i]!=o[i])return!1;if(!n)return e.arraysEqual(t.sort(),o.sort(),!0)}return!0},e.isEmpty=function(e){if(z_d("11.5"),!zot(e)){var t=0;for(var o in e){t++;break}return 0==t}},e.merge=function(){z_d("12");var e,t,o={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&(o[t]=arguments[e][t]);return o},e.zut=function(e){if(zot(e)||"object"==typeof e)return!0},e.decimals=function(t,o,n,i){if(z_d("13"),zot(t)||0==t)return 0;if(zot(o)&&(o=1),zot(n)&&(n=!1),n&&o<0){for(var r=String(t).indexOf("."),a=String(t).length,s=r<0?a:r,l=0;l<-o-s;l++)t="0"+t;return t}var d=Math.round(t*Math.pow(10,o))/Math.pow(10,o);if(n&&o>0&&0!=d){var r=String(d).indexOf("."),a=String(d).length;r<0&&(r=a++,d+=".");for(l=0;l<o-(a-r-1);l++)d+="0"}return e.zut(i)?d:null},e.sign=function(e){return z_d("13.1"),e?e<0?-1:1:0},e.constrain=function(e,t,o,n){if(z_d("13.2"),!zot(e))return zot(t)&&(t=0),zot(o)&&(o=Number.MAX_VALUE),o<t&&(max2=t,o=t,t=max2),zot(n)&&(n=!1),n&&e<0?Math.max(-o,Math.min(e,-t)):Math.max(t,Math.min(e,o))},e.dist=function(e,t,o,n){if(z_d("13.3"),!zot(e)&&!zot(t))return zot(o)&&(o=0),zot(n)&&(n=0),Math.sqrt(Math.pow(o-e,2)+Math.pow(n-t,2))},e.angle=function(e,t,o,n){if(z_d("13.4"),!zot(e)&&!zot(t))return zot(o)&&(o=e,e=0),zot(n)&&(n=t,t=0),(180*Math.atan2(n-t,o-e)/Math.PI+360)%360},e.makeID=function(e,t,o){z_d("13.5"),zot(e)&&(e="mixed"),zot(t)&&(t=5),zot(o)&&(o="uppercase");var n,i=[2,3,4,5,6,7,8,9],r="abcdefghjkmnpqrstuvwxyz".split("");n=e.constructor===Array?e:"numbers"==e?i:"letters"==e?r:i.concat(r);for(var a,s,l="",d=0;d<t;d++)a=n[Math.floor(Math.random()*t)],s=Math.random(),"uppercase"==o||"mixed"==o&&s>.5?a.toUpperCase&&(a=a.toUpperCase()):a.toLowerCase&&(a=a.toLowerCase()),l+=String(a);return l},e.Damp=function(t,o){z_d("14");var n;if(n=zob(e.Damp,arguments,"startValue, damp",this))return n;this.lastValue=zot(t)?0:t,this.damp=zot(o)?.1:o},e.Damp.prototype.convert=function(e){return this.lastValue=this.lastValue+(e-this.lastValue)*this.damp},e.Damp.prototype.immediate=function(e){return this.lastValue=e,this},e.Proportion=function(t,o,n,i,r,a){var s;if(s=zob(e.Proportion,arguments,"baseMin, baseMax, targetMin, targetMax, factor, targetRound",this))return s;z_d("15"),zot(n)&&(n=0),zot(i)&&(i=1),zot(r)&&(r=1),zot(a)&&(a=!1);var l,d;this.convert=function(e){if(!isNaN(e))return e=Math.max(e,t),e=Math.min(e,o),l=(e-t)/(o-t),d=r>0?n+(i-n)*l:i-(i-n)*l,a&&(d=Math.round(d)),d}},e.ProportionDamp=function(t,o,n,i,r,a,s){function l(){isNaN(c)||(c=Math.max(c,t),c=Math.min(c,o),u=(c-t)/(o-t),h=i-n,z+=(g=(m=f=a>0?n+h*u:i-h*u)-z)*p.damp)}var d;if(d=zob(e.ProportionDamp,arguments,"baseMin, baseMax, targetMin, targetMax, damp, factor, targetRound",this))return d;z_d("16"),zot(n)&&(n=0),zot(i)&&(i=1),zot(r)&&(r=.1),zot(a)&&(a=1),zot(s)&&(s=!1),this.damp=r;var c,u,h,f,g,p=this,m=0,z=0;c=t,z=n;var v=setInterval(l,20);this.immediate=function(e){return p.convert(e),l(),z=f,s&&(z=Math.round(z)),p},this.convert=function(e){return c=e,s?Math.round(z):z},this.dispose=function(){return clearInterval(v),!0}},e.Dictionary=function(e){z_d("17"),this.length=0,this.unique=e;var t=this.objects=[],o=this.values=[];this.add=function(e,n){zot(e)||(zot(n)&&(n=!0),this.unique&&this.remove(e),t.push(e),o.push(n),this.length++)},this.at=function(e){if(!zot(e)){var n=t.indexOf(e);return n>-1?o[n]:null}},this.remove=function(e){if(!zot(e)){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o.splice(n,1),this.length--)}},this.dispose=function(){return t=null,o=null,this.length=null,!0}},e.swapProperties=function(e,t,o){if(z_d("17.1"),zot(t)||zot(o)||zot(t[e])||zot(o[e]))return!1;var n=o[e];return o[e]=t[e],t[e]=n,!0},e.swapHTML=function(t,o){return z_d("17.2"),e.swapProperties("innerHTML",zid(t),zid(o))},e.scrollX=function(t,o){return z_d("18"),e.abstractScroll("X","Left",t,o)},e.scrollY=function(t,o){return z_d("19"),e.abstractScroll("Y","Top",t,o)},e.abstractScroll=function(t,o,n,i){z_d("20");var r="X"==t?"Y":"X";if(zot(n)){var a=0,s=navigator.appName;if(-1!=navigator.userAgent.indexOf("Safari")||"Safari"==s)a=1;return a||"CSS1Compat"!=document.compatMode?document.body["scroll"+o]:document.documentElement["scroll"+o]}if(zot(i))window.scrollTo(e["scroll"+r](),n);else{i<50&&(i=50);var l=i/50,d=e["scroll"+t](),c=(n-d)/l,u=0,h=setInterval(function(){u++,d+=c,window.scrollTo(e["scroll"+r](),d),u>=l&&(window.scrollTo(e["scroll"+r](),n),clearInterval(h))},50)}return n},e.windowWidth=function(){return z_d("21"),isNaN(window.innerWidth)?window.clientWidth:window.innerWidth},e.windowHeight=function(){return z_d("22"),isNaN(window.innerHeight)?window.clientHeight:window.innerHeight},e.urlEncode=function(e){z_d("23");var e=(e+"").toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},e.urlDecode=function(e){return z_d("24"),decodeURIComponent((e+"").replace(/\+/g,"%20"))},e.setCookie=function(e,t,o){if(z_d("25"),!zot(e)&&!zot(t)){if(o){var n=new Date;n.setTime(n.getTime()+24*o*60*60*1e3);i="; expires="+n.toGMTString()}else var i="";return document.cookie=e+"="+escape(t)+i+"; path=/",!0}},e.getCookie=function(e){z_d("26");var t,o=document.cookie.split(/;\s*/),i=new Array;for(n=0;n<o.length;n++)i[(t=o[n].split("="))[0]]=t[1];if(void 0!==i[e])return unescape(i[e])},e.deleteCookie=function(t){return z_d("27"),!zot(e.getCookie(t))&&(e.setCookie(t,"",-1),!0)},e.convertColor=function(e,t){if(zot(t)&&(t=!1),t)3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));else if("#"==e.charAt(0))return e;var o=["black","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],n=["000000","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","ffe4c4","ffebcd","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00ffff","00008b","008b8b","b8860b","a9a9a9","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","d3d3d3","d3d3d3","90ee90","ffb6c1","ffa07a","20b2aa","87cefa","778899","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","ff00ff","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","663399","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"];return t?o[-1!=n.indexOf(e.toLowerCase())?n.indexOf(e):0]:"#"+n[-1!=o.indexOf(e.toLowerCase())?o.indexOf(e):0]},e.mobile=function(e){return z_d("28"),zot(e)&&(e=!0),/ip(hone|od|ad)/i.test(navigator.userAgent)?"ios":/android|nexus/i.test(navigator.userAgent)?"android":/blackberry/i.test(navigator.userAgent)?"blackberry":/nokia|phone|mobile/i.test(navigator.userAgent)?"windows":/opera mini|webos/i.test(navigator.userAgent)?"other":!(!e||void 0===window.orientation)},e.async=function(t,o){if(z_d("29"),!zot(t)){var n=document.createElement("script");if(o){var i=o.toString().split(/\n/,1)[0].match(/^function\s?([^\s(]*)/)[1];e.async[i]=function(){var e=n;return function(t){e&&e.parentNode.removeChild(e),e=null,o(t)}}()}else e.async.z_s&&e.async.z_s.parentNode&&e.async.z_s.parentNode.removeChild(e.async.z_s),e.async.z_s=n;t.match(/\?/)||(t+="?"),n.setAttribute("src",t+"&r="+Math.random()),document.getElementsByTagName("head")[0].appendChild(n)}},e.extend=function(t,o,n,i,r){function a(){this.constructor=t}var s;if(s=zob(e.extend,arguments,"subclass, superclass, override, prefix, prototype"))return s;if(!zot(t)&&!zot(o)||!zon){zot(i)&&(i="super"),zot(n)&&(n=[]),Array.isArray(n)||(n=[n]),zot(r)&&(r=!0);var l={};for(var d in t.prototype)Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(t.prototype,d));a.prototype=o.prototype,t.prototype=new a;for(d in l)Object.defineProperty(t.prototype,d,Object.getOwnPropertyDescriptor(l,d));var c=t.prototype,u=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(u){c[(i+="_")+"constructor"]=u.constructor;for(var h,f=0;f<n.length;f++)"function"==typeof u[h=n[f]]&&(c[i+h]=u[h]);if(r)for(h in u)c.hasOwnProperty(h)&&"function"==typeof u[h]&&(c[i+h]=u[h])}return t}zog("zim.extend() - please supply a class and its superclass")},"undefined"==typeof createjs)return zon&&zog("ZIM >= 4.3.0 requires createjs namespace to be loaded (import createjs before zim)"),e;e.Container=function(t,o,n,i){if(z_d("50.5"),this.cjsContainer_constructor(),zot(n))var r=0,a=t,s=0,l=o;else var r=t,a=n,s=o,l=i;zot(l)&&(l=a),zot(t)||this.setBounds(r,s,a,l),this.clone=function(){return this.cloneChildren(this.cloneProps(new e.Container(r,s,a,l)))}},zimify(e.Container.prototype),e.extend(e.Container,createjs.Container,"clone","cjsContainer",!1),e.Shape=function(t,o,n,i,r){z_d("50.6"),this.cjsShape_constructor(r);var a=this;if(zot(n))var s=0,l=t,d=0,c=o;else var s=t,l=n,d=o,c=i;zot(c)&&(c=l),zot(t)||this.setBounds(s,d,l,c),this.clone=function(t){zot(t)&&(t=!0);var o=a.cloneProps(new e.Shape(l,c,s,d,r));return o.graphics=t?a.graphics.clone():a.graphics,o}},e.extend(e.Shape,createjs.Shape,"clone","cjsShape",!1),zimify(e.Shape.prototype),e.Bitmap=function(t,o){z_d("50.7"),this.cjsBitmap_constructor(t),this.id=o,this.clone=function(){return this.cloneProps(new e.Bitmap(t,o))}},e.extend(e.Bitmap,createjs.Bitmap,"clone","cjsBitmap",!1),zimify(e.Bitmap.prototype),e.Sprite=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p){var m;if(m=zob(e.Sprite,arguments,"image, cols, rows, count, offsetX, offsetY, spacingX, spacingY, width, height, animations, json, id, globalControl, spriteSheet",this))return m;z_d("50.8");var z,v=this;if(zot(h)&&!zot(t)){zot(o)&&(o=1),zot(n)&&(n=1),zot(i)&&(i=o*n),zot(r)&&(r=0),zot(a)&&(a=0),zot(s)&&(s=0),zot(l)&&(l=0),zot(d)&&(d=t.width),zot(c)&&(c=t.height);var b=(d-r+s)/o-s,y=(c-a+l)/n-l,w=[],x=0;e:for(var C=0;C<n;C++)for(var S=0;S<o;S++){if(++x>i)break e;w.push([r+S*(b+s),a+C*(y+l),b,y])}var T={images:[t.image],frames:w,animations:u};z=new createjs.SpriteSheet(T)}else p?u=(z=p).animations:(u=h.animations,z=new createjs.SpriteSheet(h));this.animations=u,this.cjsSprite_constructor(z),zot(f)&&(f=e.makeID()),this.id=f,zot(g)&&(g=!0),v.globalControl=g,this.parseFrames=function(e,t,o){function n(e){Array.isArray(e)?i(e):e.constructor=={}.constructor?r(e):isNaN(e)||s.push({f:Math.floor(e),s:1})}function i(e){a(e[0],e[1],e[3]),e[2]&&!zot(v.animations[e[2]])&&n(v.animations[e[2]])}function r(e){if(!zot(e.frames)){zot(e.speed)&&(e.speed=1);for(var t=0;t<e.frames.length;t++)s.push({f:e.frames[t],s:e.speed});e.next&&!zot(v.animations[e.next])&&n(v.animations[e.next])}}function a(e,t,o){zot(o)&&(o=1);for(var n=e;n<=t;n++)s.push({f:n,s:o})}var s=[];if(zot(e))zot(t)&&(t=0),zot(o)&&(o=v.totalFrames-1),a(t,o);else{if(zot(v.animations)||zot(v.animations[e]))return[];n(v.animations[e])}return s},this.run=function(t,o,n,i,r,a,s,l,d,c,h,f,g,p,m,b,y,w,x,C,S,T,k,j,M){function P(e){function t(e){"number"==typeof e?S=T=e:e.constructor=={}.constructor?(zot(e.frames)?(zon&&zog("zim.Sprite() - run() does not support nested labels - see docs"),S=0,T=z.getNumFrames()-1):t(e.frames),S=e.frames):(S=e[0],T=e[e.length-1])}return t(u[e]),[S,T]}var E;if(E=zob(this.run,arguments,"time, label, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, startFrame, endFrame, tweek, id, globalControl"))return E;var B;if(zot(k)&&(k=1),zot(j)||(v.id=j),zot(M)||(v.globalControl=M),Array.isArray(o)){var O,A;B=[];for(var I,D=0,_=0;_<o.length;_++){if(O=o[_],zot(O.label)||zot(u)||zot(u[O.label])){if(zot(O.startFrame)&&zot(O.endFrame)){zon&&zog("zim.Sprite - run() - bad multiple label format - see docs");continue}zot(O.endFrame)&&(O.endFrame=z.getNumFrames()-1),zot(O.startFrame)&&(O.startFrame=0),S=O.startFrame,T=O.endFrame}else{X=P(O.label);S=X[0],T=X[1]}delete O.startFrame,delete O.endFrame,O.obj=e.merge(O.obj,{frame:T}),O.set=e.merge(O.set,{frame:S}),zot(O.wait)&&(O.wait=D*k),A=O.label,delete O.label,B.push(O),D=0;var L=zot(O.time)?t:O.time;T-S>0&&(D=L/(T-S)/2),0==_&&(I=S)}if(S=I,0==B.length)return this;1==B.length&&(t=B[0].time,o=A,B=null)}if(!Array.isArray(o)){if(zot(o)||zot(u)||zot(u[o]))o=null,zot(S)&&(S=0),zot(T)&&(T=z.getNumFrames()-1);else{var X=P(o);S=X[0],T=X[1]}B={frame:T},{frame:S}}if(zot(t)&&(t=1e3),v.running&&v.stopZimAnimate(v.id),v.running=!0,!Array.isArray(B)){D=0;T-S>0&&(D=t/(T-S)/2),zot(c)&&(c=D*k),zot(b)&&(b=D*k)}v.frame=S;var Y=function(){n&&"function"==typeof n&&n(i),v.running=!1};return e.animate({target:v,obj:B,time:t,ease:"linear",call:Y,params:i,wait:r,wait:a,wait:s,loop:l,loopCount:d,loopWait:c,loopCall:h,loopParams:f,loopWaitCall:g,loopWaitParams:p,rewind:m,rewindWait:b,rewindCall:y,rewindParams:w,rewindWaitCall:x,rewindWaitParams:C,override:!1,id:v.id}),v.runPaused=!1,v},this.runPaused=!0,this.pauseRun=function(t){zot(t)&&(t=!0),v.runPaused=t,v.globalControl?e.pauseZimAnimate(t,v.id):v.pauseZimAnimate(t,v.id)},this.stopRun=function(){v.runPaused=!0,v.running=!1,v.globalControl?e.stopZimAnimate(v.id):v.stopZimAnimate(v.id)},Object.defineProperty(this,"frame",{get:function(){return this.currentFrame},set:function(e){zot(e)&&(e=0),e=Math.round(e),this.paused?this.gotoAndStop(e):this.gotoAndPlay(e)}}),Object.defineProperty(this,"totalFrames",{get:function(){return z.getNumFrames()},set:function(e){zog("zim.Sprite - totalFrames is read only")}}),this.clone=function(){return this.cloneProps(new e.Sprite(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p))}},e.extend(e.Sprite,createjs.Sprite,"clone","cjsSprite",!1),zimify(e.Sprite.prototype),e.MovieClip=function(t,o,n,i){var r;if(r=zob(e.MovieClip,arguments,"mode, startPosition, loop, labels",this))return r;z_d("50.9"),this.cjsMovieClip_constructor(t,o,n,i),this.clone=function(){return this.cloneProps(new e.MovieClip(t,o,n,i))}},e.extend(e.MovieClip,createjs.MovieClip,"clone","cjsMovieClip",!1),zimify(e.MovieClip.prototype),e.Circle=function(t,o,n,i,r){function a(){v.c(),g=v.f(c).command,(zot(h)||h>0)&&(zot(u)&&zot(h)||(zot(u)&&(u="black"),p=v.s(u).command,m=v.ss(h).command,r&&(z=v.sd([10,10],5).command))),v.dc(0,0,d),l.setBounds(-d,-d,2*d,2*d)}var s;if(s=zob(e.Circle,arguments,"radius, color, borderColor, borderWidth, dashed",this))return s;z_d("51"),this.zimContainer_constructor(),zot(t)&&(t=50),zot(r)&&(r=!1),!zot(n)&&zot(i)?i=1:!zot(i)&&zot(n)&&(n="black"),zot(o)&&(o=i>0?"rgba(0,0,0,0)":"black");var l=this,d=t,c=o,u=n,h=i;this.mouseChildren=!1;var f=this.shape=new createjs.Shape;this.addChild(f);var g,p,m,z,v=f.graphics;a(),Object.defineProperty(l,"color",{get:function(){return c},set:function(e){zot(e)&&(e="black"),c=e,g.style=c}}),Object.defineProperty(l,"borderColor",{get:function(){return u},set:function(e){u=e,p?p.style=u:a()}}),Object.defineProperty(l,"borderWidth",{get:function(){return h},set:function(e){e>0||(e=0),h=e,m&&0!=h?(m.width=h,r&&(z.segments=[20,10],z.offset=5)):a()}}),Object.defineProperty(l,"radius",{get:function(){return d},set:function(e){d=e,a()}}),this.clone=function(){return l.cloneProps(new e.Circle(l.radius,l.color,l.borderColor,l.borderWidth,r))}},e.extend(e.Circle,e.Container,"clone","zimContainer",!1),e.Rectangle=function(t,o,n,i,r,a,s,l){function d(){b.c(),m=b.f(h).command,(zot(g)||g>0)&&(zot(f)&&zot(g)||(zot(f)&&(f="black"),z=b.s(f).command,v=b.ss(g).command,l&&(borderDashedObj=b.sd([10,10],5).command))),a>0?s?b.rc(0,0,t,o,a,a,0,0):b.rr(0,0,t,o,a):b.r(0,0,t,o),u.setBounds(0,0,t,o)}var c;if(c=zob(e.Rectangle,arguments,"width, height, color, borderColor, borderWidth, corner, flatBottom, dashed",this))return c;z_d("52"),this.zimContainer_constructor(),zot(t)&&(t=100),zot(o)&&(o=100),zot(a)&&(a=0),zot(s)&&(s=!1),zot(l)&&(l=!1),!zot(i)&&zot(r)?r=1:!zot(r)&&zot(i)&&(i="black"),zot(n)&&(n=r>0?"rgba(0,0,0,0)":"black");var u=this,h=n,f=i,g=r;this.mouseChildren=!1;var p=this.shape=new createjs.Shape;this.addChild(p);var m,z,v,b=p.graphics;d(),Object.defineProperty(u,"color",{get:function(){return h},set:function(e){zot(e)&&(e="black"),h=e,m.style=h}}),Object.defineProperty(u,"borderColor",{get:function(){return f},set:function(e){f=e,z?z.style=f:d()}}),Object.defineProperty(u,"borderWidth",{get:function(){return g},set:function(e){e>0||(e=0),g=e,v&&0!=g?(v.width=g,l&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):d()}}),this.clone=function(){return u.cloneProps(new e.Rectangle(t,o,u.color,u.borderColor,u.borderWidth,a,s,l))}},e.extend(e.Rectangle,e.Container,"clone","zimContainer",!1),e.Triangle=function(t,o,n,i,r,a,s,l,d){function c(){x.c(),b=x.f(f).command,(zot(p)||p>0)&&(zot(g)&&zot(p)||(zot(g)&&(g="black"),y=x.s(g).command,w=x.ss(p).command,d&&(borderDashedObj=x.sd([10,10],5).command))),x.mt(0,0),h.one={x:0,y:0},x.lt(t,0),h.two={x:t,y:0};var e=180*Math.acos((Math.pow(bb,2)+Math.pow(cc,2)-Math.pow(aa,2))/(2*bb*cc))/Math.PI,n=180*Math.asin(bb*Math.sin(e*Math.PI/180)/aa)/Math.PI,i=[e,n,180-e-n];h.angles=[i[z[1]],i[z[2]],i[z[0]]];var r=h.angles[1],a=Math.cos(r*Math.PI/180)*o,c=Math.sin(r*Math.PI/180)*o,u=Math.max(t,t-a),m=c;h.setBounds(0,0,u,m),v.y=m,x.lt(t-a,0-c),h.three={x:t-a,y:0-c},x.cp(),s&&(h.regX=u/2,h.regY=m/2),l&&(h.shape.y+=l)}var u;if(u=zob(e.Triangle,arguments,"a, b, c, color, borderColor, borderWidth, center, adjust, dashed",this))return u;z_d("53"),this.zimContainer_constructor(),zot(t)&&(t=100),zot(o)&&(o=t),zot(n)&&(n=o),-1==n&&(n=Math.sqrt(Math.pow(t,2)+Math.pow(o,2))),zot(s)&&(s=!0),zot(l)&&(l=0),!zot(r)&&zot(a)?a=1:!zot(a)&&zot(r)&&(r="black"),zot(i)&&(i=a>0?"rgba(0,0,0,0)":"black");var h=this,f=i,g=r,p=a;this.mouseChildren=!1;var m=[t,o,n];m.sort(function(e,t){return t-e}),aa=m[0],bb=m[1],cc=m[2];var z=[m.indexOf(t),m.indexOf(o),m.indexOf(n)];if(aa>bb+cc)zog("zim build - Triangle(): invalid triangle lengths");else{var v=this.shape=new createjs.Shape;this.addChild(v);var b,y,w,x=v.graphics;c(),Object.defineProperty(h,"color",{get:function(){return f},set:function(e){zot(e)&&(e="black"),f=e,b.style=f}}),Object.defineProperty(h,"borderColor",{get:function(){return g},set:function(e){g=e,y?y.style=g:c()}}),Object.defineProperty(h,"borderWidth",{get:function(){return p},set:function(e){e>0||(e=0),p=e,w&&0!=p?(w.width=p,d&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):c()}}),this.clone=function(){return h.cloneProps(new e.Triangle(t,o,n,h.color,h.borderColor,h.borderWidth,s,l,d))}}},e.extend(e.Triangle,e.Container,"clone","zimContainer"),e.Blob=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g){function p(e){var t={mirror:frame.purple,free:frame.yellow,none:frame.blue};return t[e]?t[e]:frame.pink}function m(){T.c(),colorObj=T.f(y).command,(zot(x)||x>0)&&(zot(w)&&zot(x)||(zot(w)&&(w="black"),borderColorObj=T.s(w).command,borderWidthObj=T.ss(x).command,g&&(borderDashedObj=T.sd([10,10],5).command)));f=(n=b.points[0][0]).localToLocal(b.points[0][3].x,b.points[0][3].y,C);T.mt(f.x,f.y),k.c().s(frame.darker).ss(1);for(var e=0;e<b.points.length;e++){var t=e,o=(e+1)%b.points.length,n=b.points[t][0],i=b.points[t][3],r=b.points[t][1],a=b.points[t][2],s=b.points[o][0],l=b.points[o][3],d=b.points[o][1],c=(b.points[o][2],n.localToLocal(a.x,a.y,C)),u=s.localToLocal(d.x,d.y,C),h=s.localToLocal(l.x,l.y,C);T.bt(c.x,c.y,u.x,u.y,h.x,h.y);var f=n.localToLocal(i.x,i.y,C),p=n.localToLocal(r.x,r.y,C);k.mt(f.x,f.y).lt(p.x,p.y),k.mt(f.x,f.y).lt(c.x,c.y)}}var z;if(z=zob(e.Blob,arguments,"color, borderColor, borderWidth, points, radius, controlLength, controlType, lockControlType, showControls, lockControls, dblclick, dblclickDrag, ctrlclick, dashed",this))return z;z_d("53.5"),zot(r)&&(r=100),this.zimContainer_constructor(-r,-r,2*r,2*r),zot(g)&&(g=!1),!zot(o)&&zot(n)?n=1:!zot(n)&&zot(o)&&(o="black"),zot(t)&&(t=n>0?"rgba(0,0,0,0)":frame.green),zot(i)&&(i=4);var v="number"==typeof i?i:i.length;zot(a)&&(a=4*r/v),zot(s)&&(s="straight"),zot(l)&&(l=!1),zot(d)&&(d=!0),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(h)&&(h=!0),zot(f)&&(f=!1),this.dblclick=u,this.dblclickDrag=h,this.lockControlType=l,this.ctrlclick=f;var b=this,y=(this.types=["mirror","straight","free","none"],t),w=o,x=n,C=this.shape=(new e.Shape).addTo(this),S=this.sticks=(new e.Shape).addTo(this),T=C.graphics,k=S.graphics,j=this.sets=(new e.Container).addTo(this).drag();this.points=[];for(var M,P,E,B,O,A,I,D,_=0;_<v;_++){if(E=(new e.Container).addTo(j),"number"==typeof i){var L=zik(a);(P=new e.Container(L,r).reg(L/2,r).addTo(this)).rotation=_/v*360,A=new e.Circle(8,frame.light,frame.dark,2).centerReg(P).pos(L/2,0),B=new e.Rectangle(10,10,p(s),frame.dark,2).centerReg(P).pos(0,0),O=new e.Rectangle(10,10,p(s),frame.dark,2).centerReg(P).pos(L,0);var X=P.localToLocal(A.x,A.y,j);A.x=X.x,A.y=X.y,A.addTo(E);var Y=P.localToLocal(B.x,B.y,j);B.x="none"==s?0:Y.x-A.x,B.y="none"==s?0:Y.y-A.y,B.addTo(E);var R=P.localToLocal(O.x,O.y,j);O.x="none"==s?0:R.x-A.x,O.y="none"==s?0:R.y-A.y,O.addTo(E),E.pos(A.x,A.y),A.x=0,A.y=0,"none"==s&&A.addTo(E)}else I=(D=i[_])[8]?D[8]:s,E=(new e.Container).addTo(j).pos(D[0],D[1]),A=new e.Circle(8,frame.light,frame.dark,2).centerReg(E).pos(D[6],D[7]),B=new e.Rectangle(10,10,p(I),frame.dark,2).centerReg(E,!0,0).pos(D[2],D[3]),O=new e.Rectangle(10,10,p(I),frame.dark,2).centerReg(E,!0,0).pos(D[4],D[5]);A.set=E,A.rect1=B,A.rect2=O,A.index=_,A.on("dblclick",function(e){if(!b.lockControlType){var t=e.target,o=b.points[t.index][4]?b.points[t.index][4]:s;Math.abs(t.rect1.x)<=2&&Math.abs(t.rect1.y)<=2&&Math.abs(t.rect2.x)<=2&&Math.abs(t.rect2.y)<=2&&(o="none"),"none"==o&&t.parent.addChildAt(t,0),"none"==(o=b.types[(b.types.indexOf(o)+(frame.shiftKey?-1:1)+b.types.length)%b.types.length])&&(t.rect1.x=t.rect1.y=t.rect2.x=t.rect2.y=0,t.parent.addChild(t)),b.points[t.index][4]=o,t.rect1.color=p(o),t.rect2.color=p(o),m(),t.getStage().update()}}),B.ball=A,B.other=O,O.ball=A,O.other=B,e.mobile()&&(A.expand(),B.expand(),O.expand()),M=[E,B,O,A,D?D[8]:s],b.points.push(M)}m(),j.on("mousedown",function(e){if(!b.lockControls)if(e.target.rect1)(o=e.target).startX=o.x,o.startY=o.y,o.rect1.startX=o.rect1.x,o.rect1.startY=o.rect1.y,o.rect2.startX=o.rect2.x,o.rect2.startY=o.rect2.y;else{var t=e.target,o=t.ball,n=o.index,i=s;if(zot(b.points[n][4])||(i=b.points[n][4]),"straight"==i){var r=t.other,a=r.x-o.x,l=r.y-o.y;r.stickLength=Math.sqrt(Math.pow(a,2)+Math.pow(l,2))}}}),j.on("pressmove",function(e){if(!b.lockControls){if(e.target.rect1){var t=(r=e.target).x-r.startX,o=r.y-r.startY;r.rect1.x=r.rect1.startX+t,r.rect1.y=r.rect1.startY+o,r.rect2.x=r.rect2.startX+t,r.rect2.y=r.rect2.startY+o}else{var n=e.target,i=n.other,r=n.ball,a=r.index,l=s;if(zot(b.points[a][4])||(l=b.points[a][4]),"straight"==l||"mirror"==l){var d=n.x-r.x,c=n.y-r.y;if("mirror"==l)i.x=r.x-d,i.y=r.y-c;else{var u=Math.atan2(c,d),h=-i.stickLength*Math.cos(u+Math.PI),f=-i.stickLength*Math.sin(u+Math.PI);i.x=r.x-h,i.y=r.y-f}}}m()}}),j.on("pressup",function(e){if(!b.lockControls){if(e.target.rect1){var t=e.target,o=t.set,n=t.rect1,i=t.rect2;n.x-=t.x,n.y-=t.y,i.x-=t.x,i.y-=t.y,o.x+=t.x,o.y+=t.y,t.x=0,t.y=0}b.dispatchEvent("change")}}),this.changeControl=function(e,t,o,n,i,r,a,s){var l;if(l=zob(b.changeControl,arguments,"index, type, rect1X, rect1Y, rect2X, rect2Y, circleX, circleY"))return l;if(zot(e))for(var d=0;d<b.points.length;d++)b.changeControl(d,t,o,n,i,r,a,s);else{var c=b.points[e];c[4]=t,"none"==t?(zot(a)||(c[3].x=a),zot(s)||(c[3].y=s),c[1].pos(c[3].x,c[3].y),c[2].pos(c[3].x,c[3].y),c[3].parent.addChild(c[3])):(zot(o)||(c[1].x=o),zot(n)||(c[1].y=n),zot(i)||(c[2].x=i),zot(r)||(c[2].y=r),zot(a)||(c[3].x=a),zot(s)||(c[3].y=s),c[3].parent.addChildAt(c[3],0)),b.getStage()&&b.getStage().update()}},this.update=function(){return m(),b},C.on("dblclick",function(){b.dblclick&&(b.controls=!b.controls,b.dblclickDrag&&(b.controls?b.noDrag():b.drag({currentTarget:!0})))}),b.controls=d,b.dblclick&&b.dblclickDrag&&!b.controls&&b.drag({currentTarget:!0}),this.on("click",function(){b.ctrlclick&&zimDefaultFrame.ctrlKey&&(b.clone().addTo(b.getStage().stage).mov(100),b.getStage().stage.update())}),this.hideControls=function(){return j.visible=!1,S.visible=!1,W=!1,b.getStage()&&b.getStage().update(),b},d||this.hideControls(),this.showControls=function(){return j.visible=!0,S.visible=!0,W=!0,j.pos(C.x,C.y),S.pos(C.x,C.y),b.addChildAt(C,0),b.getStage()&&b.getStage().update(),b},this.record=function(t){zot(t)&&(t=!1);for(var o,n,i=[],r=0;r<b.points.length;r++)n=b.points[r],o=[e.decimals(n[0].x),e.decimals(n[0].y),e.decimals(n[1].x),e.decimals(n[1].y),e.decimals(n[2].x),e.decimals(n[2].y),e.decimals(n[3].x),e.decimals(n[3].y)],n[4]&&"straight"!==n[4]&&o.push(n[4]),i.push(o);if(t){if(!a){var a=new e.Pane({container:b.getStage(),width:500,height:500,drag:!0}),s=new e.TextArea(frame,400,400);s.centerReg(a)}s.text=JSON.stringify(i),a.show()}return i};var W=d;Object.defineProperty(b,"controls",{get:function(){return W},set:function(e){W=e,e?b.showControls():b.hideControls()}});var N=c;Object.defineProperty(b,"lockControls",{get:function(){return N},set:function(e){N=e,e?(b.sets.mouseChildren=!1,b.sets.mouseEnabled=!1):(b.sets.mouseChildren=!0,b.sets.mouseEnabled=!0)}}),this.lockControls=N,Object.defineProperty(b,"color",{get:function(){return y},set:function(e){zot(e)&&(e="black"),y=e,colorObj.style=y}}),Object.defineProperty(b,"borderColor",{get:function(){return w},set:function(e){w=e,borderColorObj?borderColorObj.style=w:m()}}),Object.defineProperty(b,"borderWidth",{get:function(){return x},set:function(e){e>0||(e=0),x=e,borderWidthObj&&0!=x?(borderWidthObj.width=x,g&&(borderDashedObj.segments=[20,10],borderDashedObj.offset=5)):m()}}),this.clone=function(){return b.cloneProps(new e.Blob(b.color,b.borderColor,b.borderWidth,b.record(),r,a,s,l,j.visible,c,b.dblclick,b.dblclickDrag,b.ctrlclick,g))},this.dispose=function(){for(var e=0;e<b.points.length;e++)b.points[e][1].removeAllEventListeners();j.removeAllEventListeners(),b.removeAllEventListeners()}},e.extend(e.Blob,e.Container,"clone","zimContainer",!1),e.Label=function(o,n,i,r,a,s,l,d,c,u,h,f,g,p,m){function z(){var t,o=y.getBounds();if("top"==c?(y.y=n-n/6,w&&(w.y=n-n/6),t=0):"center"==c||"middle"==c?(t=-o.height/2,y.y=.3*n,w&&(w.y=.3*n)):t=-o.height,g){var i=g.getBounds();b.setBounds(i.x,i.y,i.width,i.height)}else b.setBounds(o.x,t,o.width,o.height),x.graphics.c().f("black").r(b.getBounds().x,b.getBounds().y,b.getBounds().width,b.getBounds().height);e.center(y,b),y.y+=n/32,w&&(e.center(w,b,0),w.y+=n/32)}var v;if(v=zob(e.Label,arguments,"text, size, font, color, rollColor, shadowColor, shadowBlur, align, valign, lineWidth, lineHeight, fontOptions, backing, outlineColor, outlineWidth",this))return v;z_d("54"),this.zimContainer_constructor(),zot(o)&&(o="LABEL"),""===o&&(o=" "),zot(n)&&(n=36),zot(i)&&(i="arial"),zot(r)&&(r="black"),zot(a)&&(a=r),zot(s)&&(s=-1),zot(l)&&(l=14),zot(d)&&(d="left"),zot(c)&&(c="top"),zot(f)&&(f=""),!zot(p)&&zot(m)&&(m=Math.round(.2*n)),!zot(m)&&zot(p)&&(p="#000000"),zot(m)&&(m=0);var b=this;this.mouseChildren=!1;var y=this.label=new createjs.Text(String(o),f+" "+n+"px "+i,r);if(y.textAlign=d,y.lineWidth=u,y.lineHeight=h,y.textBaseline="alphabetic",m>0){var w=this.outlineLabel=y.clone();w.color=p,w.outline=m,this.addChild(w)}if(-1!=s&&l>0&&(y.shadow=new createjs.Shadow(s,3,3,l)),this.addChild(y),zot(g)){var x=new createjs.Shape;b.hitArea=x}z(),zot(g)||(this.backing=g,e.center(g,this,!0,0)),Object.defineProperty(b,"text",{get:function(){return" "==y.text?"":y.text},set:function(e){(zot(e)||""===e)&&(e=" "),y.text=String(e),w&&(w.text=String(e)),z()}}),Object.defineProperty(b,"color",{get:function(){return r},set:function(t){a==r&&(a=t),r=t,y.color=r,!e.OPTIMIZE&&b.getStage()&&b.getStage().update()}}),Object.defineProperty(b,"outlineColor",{get:function(){return p},set:function(t){p=t,w&&(w.color=p),!e.OPTIMIZE&&b.getStage()&&b.getStage().update()}}),Object.defineProperty(b,"rollColor",{get:function(){return a},set:function(e){a=e}}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(o){t(b,o),y.color=r,b.mouseChildren=!1,!e.OPTIMIZE&&b.getStage()&&b.getStage().update()}}),this.showRollColor=function(e){zot(e)&&(e=!0),y.color=e?a:r,b.getStage()&&b.getStage().update()},this.on("mouseover",function(e){b.showRollColor()}),this.on("mouseout",function(e){b.showRollColor(!1)}),this.clone=function(){return b.cloneProps(new e.Label(b.text,n,i,r,a,s,l,d,c,u,h,f,zot(g)?null:g.clone(),p,m))},this.dispose=function(){return b.removeAllEventListeners(),!0}},e.extend(e.Label,e.Container,"clone","zimContainer"),e.Button=function(o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S){function T(e){X=!0,zot(m)?O.color=a:zot(z)||(zot(b)&&B.toggled?(B.removeChild(w),B.addChildAt(x,0)):(B.removeChild(m),B.addChildAt(z,0))),zot(y)||(B.toggled?(B.removeChild(w),B.addChild(x)):(B.removeChild(b),B.addChild(y))),B.label.showRollColor(),B.getStage()&&B.getStage().update()}function k(e){X=!1,B.off("mouseout",k),B.rollPersist?L||j():j()}function j(){zot(m)?O.color=r:zot(z)||(zot(b)&&B.toggled?(B.removeChild(x),B.addChildAt(w,0)):(B.removeChild(z),B.addChildAt(m,0))),zot(y)||(B.toggled?(B.removeChild(x),B.addChild(w)):(B.removeChild(y),B.addChild(b))),B.label.showRollColor(!1),B.getStage()&&B.getStage().update()}function M(){"string"==typeof w?(B.text=B.toggled?w:Y,!e.OPTIMIZE&&B.getStage()&&B.getStage().update()):zot(b)?B.setBackings(B.toggled?w:m,B.toggled?x:z):B.setIcons(B.toggled?w:b,B.toggled?x:y)}function P(t,i,r,a,s){B.contains(B[t])?(B.removeChild(B[t]),B.addChildAt(r,s)):B.contains(B[i])&&(B.removeChild(B[i]),B.addChildAt(a,s)),B[t]=r,B[i]=a,B[t]&&(B[t].x=o/2,B[t].y=n/2),B[i]&&(B[i].x=o/2,B[i].y=n/2),!e.OPTIMIZE&&B.getStage()&&B.getStage().update()}var E;if(E=zob(e.Button,arguments,"width, height, label, color, rollColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent, dashed",this))return E;z_d("55"),this.zimContainer_constructor(),zot(o)&&(o=200),zot(n)&&(n=60),zot(r)&&(r="#C60"),zot(a)&&(a="#F93"),zot(s)&&(s=null),zot(l)&&(l=null),zot(d)&&(d=20),zot(c)&&(c="rgba(0,0,0,.3)"),zot(u)&&(u=14),zot(h)&&(h=0),zot(f)&&(f=0),zot(g)&&(g=0),zot(p)&&(p=!1),zot(i)&&(i=zot(b)?"PRESS":""),!zot(w)&&zot(C)&&(C=e.mobile()?"mousedown":"click"),"string"!=typeof i&&"number"!=typeof i||(i=new e.Label(i,36,"arial","white",null,null,null,"center","middle")),zot(v)&&(v=!1),this.rollPersist=v,zot(S)&&(S=!1);var B=this;this.mouseChildren=!1,this.cursor="pointer",B.focus=!1;var O;zot(m)?O=new e.Rectangle(o,n,r,s,l,d,p,S):((O=m).x=o/2,O.y=n/2,zot(z)||(z.x=o/2,z.y=n/2,this.rollBacking=z)),this.addChild(O),this.backing=O,zot(b)||(this.addChild(b),b.x=o/2,b.y=n/2,this.icon=b),zot(y)||(this.rollIcon=y,y.x=o/2,y.y=n/2);var A=p?0:d;if(f>0&&zot(m)){var I=new createjs.Shape;I.graphics.lf(["rgba(255,255,255,"+f+")","rgba(0,0,0,"+f+")"],[0,1],0,0,0,n-l),I.graphics.rc(l/2,l/2,o-l,n-l,d,d,A,A),O.addChild(I)}if(g>0&&zot(m)){var D=new createjs.Shape;D.graphics.f("rgba(255,255,255,"+g+")"),D.graphics.rc(l/2,l/2,o-l,(n-l)/2,d,d,0,0),D.graphics.f("rgba(0,0,0,"+g+")"),D.graphics.rc(l/2,n/2,o-l,(n-l)/2,0,0,A,A),O.addChild(D)}if(h>0){var _=new createjs.Shape;_.graphics.f("#000").r(-h,-h,o+2*h,n+2*h),this.hitArea=_}-1!=c&&u>0&&(O.shadow=new createjs.Shadow(c,3,3,u),zot(z)||(z.shadow=new createjs.Shadow(c,3,3,u))),this.setBounds(0,0,o,n),this.addChild(i),i.center(this),i.y+=1,this.label=i;var L=!1;this.on("mousedown",function(){L=!0}),this.on("pressup",function(){L=!1,B.rollPersist&&!X&&j()});var X=!1;this.on("mouseover",T),this.on("mouseout",k),this.toggled=!1,this.toggleObj=w,this.rollToggle=x;var Y=i.text;zot(w)||this.on(C,function(){B.toggled=!B.toggled,M(B.toggled)}),Object.defineProperty(B,"text",{get:function(){return" "==i.text?"":i.text},set:function(e){i.text=e,i.center(this),i.y+=1}}),Object.defineProperty(B,"color",{get:function(){return r},set:function(t){r=t,O.color?O.color=r:zon&&zog("zim.Button - backing has no color property"),!e.OPTIMIZE&&B.getStage()&&B.getStage().update()}}),Object.defineProperty(B,"rollColor",{get:function(){return a},set:function(e){a=e}}),this._enabled=!0,Object.defineProperty(B,"enabled",{get:function(){return B._enabled},set:function(o){t(B,o),B.mouseChildren=!1,i.color=i.color,!e.OPTIMIZE&&B.getStage()&&B.getStage().update()}}),this.setBackings=function(e,t){P("backing","rollBacking",e,t,0)},this.setIcons=function(e,t){P("icon","rollIcon",e,t,B.numChildren-1)},this.toggle=function(e){zot(e)?B.toggled=!B.toggled:B.toggled=e,M()},this.clone=function(){var t=new e.Button(o,n,i.clone(),r,a,s,l,d,c,u,h,f,g,p,zot(m)?null:m.clone(),zot(z)?null:z.clone(),v,zot(b)?null:b.clone(),zot(y)?null:y.clone(),zot(w)?null:"string"==typeof w?w:w.clone(),zot(x)?null:x.clone(),C,S);return B.cloneProps(t)},this.dispose=function(){return B.removeAllEventListeners(),B.removeChild(O),B.removeChild(z),B.removeChild(b),B.removeChild(B.label),B.label&&B.label.dispose(),O=null,z=null,b=null,B.label=null,!0}},e.extend(e.Button,e.Container,"clone","zimContainer",!1),e.CheckBox=function(o,n,i,r,a,s){function l(e){c=!c,u.setChecked(c),u.dispatchEvent("change")}var d;if(d=zob(e.CheckBox,arguments,"size, label, startChecked, color, margin, type",this))return d;z_d("56"),this.zimContainer_constructor(),zot(o)&&(o=60),zot(n)&&(n=null),"string"!=typeof n&&"number"!=typeof n||(n=new e.Label(n,5*o/6,"arial",r));var c=!zot(i)&&i;zot(r)&&(r="#111"),zot(a)&&(a=10),"box"!=s&&"square"!=s&&"x"!=s&&(s="check"),this.setBounds(-a,-a,o+2*a,o+2*a);var u=this;this.cursor="pointer";var h=new createjs.Shape,f=h.graphics;f.f("rgba(255,255,255,.5)").r(0,0,o,o),f.s(r).ss(o/10).r(o/7,o/7,o-o/7*2,o-o/7*2),this.addChild(h);var g=o;n&&(this.addChild(n),n.x=1.3*o+a,n.y=o/8,this.label=n,this.setBounds(-a,-a,o+3*a+n.getBounds().width,Math.max(o+2*a,n.getBounds().height)),g=n.x+n.width);var p=new createjs.Shape;(f=p.graphics).f("rgba(0,0,0,.01)").r(this.getBounds().x,this.getBounds().y,g+2*a,this.getBounds().height),this.hitArea=p;var m=new createjs.Shape,z=m.graphics,v="#000";"check"==s?z.f(v).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"):"box"==s||"square"==s?z.f(v).dr(-35,-35,70,70):z.f(v).p("AmJEVIEUkTIkXkWIB4h5IEWEYIETkTIB4B3IkTESIEQERIh4B4IkRkRIkSEVg");m.setBounds(-47.5,-47.5,95,95);var b=o/161;m.scaleX=m.scaleY=b,m.alpha=.9,m.x=o/2,m.y=o/2,c&&this.addChild(m),this.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",l),Object.defineProperty(u,"checked",{get:function(){return c},set:function(e){u.setChecked(e)}}),Object.defineProperty(u,"text",{get:function(){if(n)return n.text},set:function(t){n&&(n.text=t,!e.OPTIMIZE&&u.getStage()&&u.getStage().update())}}),Object.defineProperty(m,"color",{get:function(){return v},set:function(t){c&&u.removeChild(m),m=new createjs.Shape,z=m.graphics,v=t,z.f(v).p("AnQAdICBiaIEEDZIF8nfICfB4In/KPg"),m.scaleX=m.scaleY=b,m.alpha=.9,m.x=o/2,m.y=o/2,c&&u.addChild(m),!e.OPTIMIZE&&u.getStage()&&u.getStage().update()}}),Object.defineProperty(u,"check",{get:function(){return m},set:function(e){zog("ZIM CheckBox - check is read only")}}),this._enabled=!0,Object.defineProperty(u,"enabled",{get:function(){return u._enabled},set:function(e){t(u,e)}}),this.setChecked=function(t){zot(t)&&(t=!0),(c=t)?u.addChild(m):u.removeChild(m),!e.OPTIMIZE&&u.getStage()&&u.getStage().update()},this.clone=function(){return u.cloneProps(new e.CheckBox(o,n.clone(),i,r,a,s))},this.dispose=function(){return u.removeAllEventListeners(),!0}},e.extend(e.CheckBox,e.Container,"clone","zimContainer",!1),e.RadioButtons=function(o,n,i,r,a,s,l){function d(e){var t=m.getChildIndex(e.target);l&&h.selectedIndex==t||(h.setSelected(t),h.dispatchEvent("change"))}function c(t,n){var i=new e.Container;i.mouseChildren=!1,i.setBounds(-s,-s,o+2*s,o+2*s);var a=new createjs.Shape,l=a.graphics;l.f("rgba(255,255,255,.5)").dc(o/2,o/2,o/1.85),l.s(r).ss(o/9).dc(o/2,o/2,o/2-o/2/5),i.addChild(a);var d=i.check=new e.Circle(o/5.2,"rgba(0,0,0,.7)");h.dots.push(d),d.mouseEnabled=!1,d.alpha=.95,d.regX=d.regY=-o/2;var c=o;n&&(i.addChild(n),n.x=i.getBounds().width,n.y=o/8,i.setBounds(-s,-s,o+2*s+n.getBounds().width,Math.max(o+2*s,n.getBounds().height)),c=n.x+n.width),t&&(i.addChild(d),h.label=n,h.label&&(h.text=n.text));var u=new createjs.Shape;return(l=u.graphics).f("rgba(0,0,0,.01)").r(i.getBounds().x,i.getBounds().y,c+2*s,i.getBounds().height),i.hitArea=u,i}var u;if(u=zob(e.RadioButtons,arguments,"size, buttons, vertical, color, spacing, margin, always",this))return u;z_d("57"),this.zimContainer_constructor(),zot(o)&&(o=60),o=Math.max(5,o),zot(n)&&(n=["A","B","C"]),zot(i)&&(i=!0),zot(r)&&(r="#111"),zot(a)&&(a=i?.2*o:o),zot(s)&&(s=o/5);var h=this;this.cursor="pointer",this.labels=[],this.dots=[];var f;if("string"==typeof n){var g=n;n=[];for(var p=0;p<g.length;p++)n.push({label:g[p]})}var m=new e.Container;this.addChild(m),m.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",d),function(){for(var t,s=!1,l=n.length-1;l>=0;l--)(t=n[l]).selected&&!0===t.selected&&(s?t.selected="false":(s=!0,h.id=t.id));m.removeAllChildren();for(var d,u=0,l=0;l<n.length;l++)"string"!=typeof(t=n[l])&&"number"!=typeof t||(t={selected:!1,label:new e.Label(t,5*o/6,"arial",r)}),(t.label&&"string"==typeof t.label||"number"==typeof t.label)&&(t.label=new e.Label(t.label,5*o/6,"arial",r)),h.labels.push(t.label),t.index=l,n[l]=t,(d=c(t.selected,t.label)).obj=t,t.selected&&(f=d.obj),m.addChild(d),i?(d.y=u,u+=d.getBounds().height+a):(d.x=u,u+=d.getBounds().width+a)}();this.getBounds()||this.setBounds(0,0,o,o),this.setBounds(-s,-s,this.getBounds().width+s,this.getBounds().height+s),this.setSelected=function(t){if(zot(t)&&(t=-1),-1==t||m.getChildAt(t)){for(var o,n=0;n<m.getNumChildren();n++)(o=m.getChildAt(n)).removeChild(o.check);if(t>=0){o=m.getChildAt(t);var i=-2;f&&(i=f.index),f=o.obj}-1==t||i==f.index?(f=null,h.id=null,h.label=null,h.text=""):(o.addChild(o.check),h.id=f.id,h.label=f.label,h.label&&(h.text=h.label.text)),!e.OPTIMIZE&&h.getStage()&&h.getStage().update()}},Object.defineProperty(h,"selected",{get:function(){return f},set:function(e){zog("ZIM RadioButton - selected is read only")}}),Object.defineProperty(h,"selectedIndex",{get:function(){return f?f.index:-1},set:function(e){var t=e;l&&h.selectedIndex==t||h.setSelected(t)}}),this._enabled=!0,Object.defineProperty(h,"enabled",{get:function(){return h._enabled},set:function(e){t(h,e)}}),this.clone=function(){for(var t=e.copy(n),d=0;d<t.length;d++)t[d].label=t[d].label.clone();return h.cloneProps(new e.RadioButtons(o,t,i,r,a,s,l))},this.dispose=function(){return h.removeAllEventListeners(),!0}},e.extend(e.RadioButtons,e.Container,"clone","zimContainer",!1),e.Pane=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m){function z(e){v(),t.getStage().update(),C.dispatchEvent("close"),e.stopImmediatePropagation()}function v(){function o(){t.removeChild(C);for(var o,n=0;n<C.numChildren;n++)if((o=C.getChildAt(n)).constructor==e.TextArea||o.constructor==e.Loader){var i={obj:o,depth:C.getChildIndex(o)};S.add(o,i),C.removeChild(o)}e.OPTIMIZE||t.getStage().update(),s&&(isNaN(C.resetX)||(C.x=C.resetX),isNaN(C.resetY)||(C.y=C.resetY))}m>0?C.animate({obj:{alpha:0},time:m,call:o}):o()}function b(e,i){return e=Math.max(o/2,Math.min(t.getBounds().width-o/2,e)),i=Math.max(n/2,Math.min(t.getBounds().height-n/2,i)),{x:e,y:i}}var y;if(y=zob(e.Pane,arguments,"container, width, height, label, color, drag, resets, modal, corner, backingAlpha, shadowColor, shadowBlur, center, displayClose, backing, fadeTime",this))return y;if(z_d("58"),this.zimContainer_constructor(),!zot(t)&&t.getBounds)if(t.getBounds())if(zot(t.getStage))zog("zim build - Pane(): The container must have a stage property");else{zot(o)&&(o=200),zot(n)&&(n=200),zot(i)&&(i=null),"string"!=typeof i&&"number"!=typeof i||(i=new e.Label(i,40,"arial","black")),zot(r)&&(r="white"),zot(a)&&(a=!1),zot(s)&&(s=!0),zot(l)&&(l=!0),zot(d)&&(d=20),zot(c)&&(c=.14),zot(u)&&(u="rgba(0,0,0,.3)"),zot(h)&&(h=20),zot(f)&&(f=!0),zot(g)&&(g=!0),a&&(g=!1),zot(m)&&(m=0);var w=this.backdrop=new createjs.Shape,x=w.graphics;x.f("black"),x.drawRect(-5e3,-5e3,1e4,1e4),this.setBounds(-o/2,-n/2,o,n),w.alpha=c;var C=this;w.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",z);var S=new e.Dictionary(!0);w.on("mousedown",function(e){e.stopImmediatePropagation()}),l&&this.addChild(w);var T;if(zot(p)?((x=(T=this.display=new createjs.Shape).graphics).f(r),x.rr(0,0,o,n,d),T.setBounds(0,0,o,n),T.regX=o/2,T.regY=n/2):T=p,g&&(T.cursor="pointer",T.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",z)),-1!=u&&h>0&&(T.shadow=new createjs.Shadow(u,8,8,h)),T.on("click",function(e){e.stopImmediatePropagation()}),this.resetX,this.resetY,a){T.cursor="pointer";var k,j;T.on("mousedown",function(e){isNaN(C.resetX)&&(C.resetX=C.x),isNaN(C.resetY)&&(C.resetY=C.y),k=e.stageX-C.x,j=e.stageY-C.y,T.cursor="pointer"}),T.on("pressmove",function(o){var n=b(o.stageX-k,o.stageY-j);C.x=n.x,C.y=n.y;for(var i,r=0;r<C.numChildren;r++)(i=C.getChildAt(r)).constructor!=e.TextArea&&i.constructor!=e.Loader||i.resize();t.getStage().update()}),this.on("pressup",function(e){T.cursor="pointer",t.getStage().update()})}this.addChild(T),i&&(this.addChild(i),e.center(i,this),this.label=i,this.text=i.text,i.mouseEnabled=!1),Object.defineProperty(C,"text",{get:function(){return" "==i.text?"":i.text},set:function(e){i.text=e}}),this.hide=function(){v()},this.show=function(){f&&isNaN(C.resetX)&&(C.x=t.getBounds().width/2,C.y=t.getBounds().height/2),t.addChild(C);for(var e=0;e<S.length;e++)C.addChildAt(S.objects[e].obj,S.objects[e].depth);return m>0?(C.alpha=0,C.animate({alpha:1},m)):t.getStage()&&t.getStage().update(),C},this.toggle=function(){return t.contains(C)?C.hide():C.show(),C},this.clone=function(){var z=i.x,v=i.y,b=C.cloneProps(new e.Pane(t,o,n,i.clone(),r,a,s,l,d,c,u,h,f,g,zot(p)?p.clone():null,m));return b.label.x=z,b.label.y=v,b},this.dispose=function(){return T.removeAllEventListeners(),C.removeChild(T),T=null,!0}}else zog("zim build - Pane(): Please give the container bounds using setBounds()");else zog("zim build - Pane(): Please pass in a reference to a container with bounds set as first parameter")},e.extend(e.Pane,e.Container,"clone","zimContainer",!1),e.Window=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C){function S(){_.setBounds(0,0,t,o),L.graphics.f(n).rr(0,0,t,o,s),-1!=v&&b>0&&(L.shadow=new createjs.Shadow(v,8,8,b)),r>0&&N.graphics.c().s(i).ss(r).rr(0,0,t,o,s)}function T(){e.dragRect(R,new createjs.Rectangle(0,0,K?-_.scrollXMax:0,Q?-_.scrollYMax:0))}function k(){ze=R.y,C&&ve.immediate(ze),d&&j()}function j(){W&&(W.x=-R.x,W.y=-R.y),K&&d&&(G.x=V.convert(R.x)),Q&&d&&(H.y=q.convert(R.y))}function M(){I(_),l&&(e.drag({obj:R,currentTarget:!0,localBounds:!0,slide:g,slideDamp:p,slideSnap:(!0===l||"auto"==l||"vertical"==l)&&m}),R.getBounds()&&R.getBounds().width>0&&setTimeout(function(){T()},300))}function P(t){e.Ticker.remove(k),ie=!1,K&&f&&e.animate(G,{alpha:0},F.fadeTime),Q&&f&&e.animate(H,{alpha:0},F.fadeTime)}function E(){se=Date.now(),e.Ticker.add(O,R.stage)}function B(){ge||(_.dispatchEvent("hoverout"),ge=!0),e.Ticker.remove(O)}function O(){Math.abs(le-R.stage.mouseX)>fe||Math.abs(de-R.stage.mouseY)>fe?(ge||(_.dispatchEvent("hoverout"),ge=!0),se=Date.now(),le=R.stage.mouseX,de=R.stage.mouseY):Date.now()-se>he&&((Math.abs(ce-R.stage.mouseX)>fe||Math.abs(ue-R.stage.mouseY)>fe)&&(_.contentMouse=R.globalToLocal(R.stage.mouseX,R.stage.mouseY),_.dispatchEvent("hoverover"),ce=R.stage.mouseX,ue=R.stage.mouseY,ge=!1),se=Date.now())}function A(e){if(Q&&_.getStage()&&_.hitTestPoint(_.getStage().mouseX,_.getStage().mouseY)){zot(e)&&(e=event);var t=e.detail?-19*e.detail:e.wheelDelta;ze+=t,ze=Math.max(-_.scrollYMax,Math.min(0,ze)),C||(_.scrollY=ze,R.stage.update())}}function I(t){C&&!be&&t.getStage()&&(be=!0,ve=new e.Damp(_.scrollY,C),e.Ticker.add(function(){ie||zot(ze)||(_.scrollY=ve.convert(ze))},t.getStage()))}var D;if(D=zob(e.Window,arguments,"width, height, color, borderColor, borderWidth, padding, corner, swipe, indicatorActive, indicatorDrag, indicatorColor, indicatorAlpha, indicatorFade, slide, slideDamp, slideSnap, interactive, shadowColor, shadowBlur, paddingHorizontal, paddingVertical, scrollWheel, damp",this))return D;z_d("58.1"),this.zimContainer_constructor(),zot(t)&&(t=300),zot(o)&&(o=200),zot(n)&&(n="#333"),zot(i)&&(i="#999"),zot(r)&&(r=1),zot(a)&&(a=10),zot(s)&&(s=0),zot(l)&&(l=!0),zot(d)&&(d=!0),zot(c)&&(c=!1),zot(u)&&(u=i),zot(h)&&(h=.3),zot(f)&&(f=!0),c&&(f=!1),zot(g)&&(g=!0),zot(p)&&(p=.6),zot(m)&&(m="vertical"),zot(z)&&(z=!0),zot(v)&&(v="rgba(0,0,0,.3)"),zot(b)&&(b=20),zot(w)&&(w=a),zot(y)&&(y=a),zot(x)&&(x=!0);var _=this;this.scrollX=this.scrollY=this.scrollXMax=this.scrollYMax=0;var L=this.backing=new createjs.Shape;this.addChild(L);var X=new createjs.Shape,Y=X.graphics;this.addChild(X);var R=this.content=new e.Container;if(this.addChild(R),R.mask=X,!z)var W=new createjs.Shape;if(r>0){var N=new createjs.Shape;this.addChild(N)}S();var F=this.indicator={};if(F.size=6,F.minSize=2*F.size,F.spacing=3.5+r/2,F.margin=0,F.corner=F.size/2,F.showTime=500,F.fadeTime=3e3,d){var G=this.hIndicator=new e.Shape,Z=G.graphics;G.alpha=h,this.addChild(G),c&&G.drag({localBounds:!0});var H=this.vIndicator=new e.Shape,U=H.graphics;H.alpha=h,this.addChild(H),c&&H.drag({localBounds:!0})}var V,q,K,Q,J,$,ee,te,oe,ne;this.update=function(){d&&(Z.clear(),U.clear()),J=d?F.size+2*F.spacing:0,$=R.getBounds().width,ee=R.getBounds().height,K=$>t-y&&(!0===l||"auto"==l||"horizontal"==l),Q=ee>o-w&&(!0===l||"auto"==l||"vertical"==l),_.scrollXMax=$+2*y-t+(Q?J+F.margin:0),_.scrollYMax=ee+2*w-o+(K?J+F.margin:0),Y.clear();var n=r/2,i=r/2,a=t-(Q&&d?F.size+2*F.spacing:0)-(Q?0:r),h=o-(K&&d?F.size+2*F.spacing:0)-(K?0:r);Y.f("rgba(0,0,0,.01)").rr(n,i,a,h,s),z||(W.graphics.c().f("red").dr(n,i,a,h),R.hitArea=W);var f=Math.max(s,Math.min(F.corner,F.spacing)),g=f+r/2,p=f+(Q?J:0)+r/2,m=f+r/2,v=f+(K?J:0)+r/2;if(K&&d&&(indicatorLength=Math.max(F.minSize,(t-g-p)*(t-g-p)/($+y+F.margin)),Z.f(u).rr(0,0,indicatorLength,F.size,F.corner),G.x=g,G.y=o-F.size-F.spacing,V=new e.Proportion(-_.scrollXMax,0,g,t-indicatorLength-p,-1),c)){G.setBounds(0,0,indicatorLength,F.size);b=new createjs.Rectangle(g,G.y,t-indicatorLength-g-p,0);G.dragRect(b),G.proportion=new e.Proportion(b.x,b.x+b.width,0,-_.scrollXMax),G.off("pressmove",te),te=G.on("pressmove",function(){R.x=G.proportion.convert(G.x)})}if(Q&&d&&(indicatorLength=Math.max(F.minSize,(o-m-v)*(o-m-v)/(ee+w+F.margin)),U.f(u).rr(0,0,F.size,indicatorLength,F.corner),H.x=t-F.size-F.spacing,H.y=m,q=new e.Proportion(-_.scrollYMax,0,m,o-indicatorLength-v,-1),c)){H.setBounds(0,0,F.size,indicatorLength);var b=new createjs.Rectangle(H.x,m,0,o-indicatorLength-m-v);H.dragRect(b),H.proportion=new e.Proportion(b.y,b.y+b.height,0,-_.scrollYMax),H.off("pressmove",oe),oe=H.on("pressmove",function(){ze=R.y=H.proportion.convert(H.y)})}j(),clearTimeout(ne),ne=setTimeout(function(){T()},300)},this.resize=function(e,n){zot(e)&&(e=t),zot(n)&&(n=o),t=e,o=n,S(),_.update(),ze=R.y,C&&ve.immediate(ze)},this.add=function(e){I(e),e.getBounds()?(R.addChild(e),0==e.x&&(e.x=y),0==e.y&&(e.y=w),_.update()):zog("SwipeBox.add() - please add content with bounds set")},this.remove=function(e){R.removeChild(e),_.update()};var ie=!1;if(l&&R.on("mousedown",function(){ie||e.Ticker.add(k,R.stage),ie=!0,K&&d&&f&&e.animate(G,{alpha:h},F.showTime),Q&&d&&f&&e.animate(H,{alpha:h},F.showTime)}),this.on("added",M,null,!0),g?R.on("slidestop",P):R.on("mousedown",function(){R.stage.on("stagemouseup",P,null,!0)}),z){var re,ae;R.on("mousedown",function(){re=R.stage.mouseX,ae=Date.now()}),R.on("click",function(){Date.now()-ae<600&&Math.abs(R.stage.mouseX-re)<5&&(_.contentMouse=R.globalToLocal(R.stage.mouseX,R.stage.mouseY),_.dispatchEvent("select"))}),R.on("mouseover",E),R.on("mouseout",B);var se,le=0,de=0,ce=0,ue=0,he=300,fe=2,ge=!1}var pe,me,ze=_.scrollY;x&&(pe=window.addEventListener("mousewheel",A),me=window.addEventListener("DOMMouseScroll",A));var ve,be=!1;Object.defineProperty(_,"scrollX",{get:function(){return R.x},set:function(e){R.x=e,j()}}),Object.defineProperty(_,"scrollY",{get:function(){return R.y},set:function(e){R.y=e,j()}}),this.clone=function(x){zot(x)&&(x=!0);var C=_.cloneProps(new e.Window(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w));return x&&(_.content.cloneChildren(C.content),C.update()),C},this.dispose=function(){return x&&(window.removeEventListener("mousewheel",pe),window.removeEventListener("DOMMouseScroll",me)),_.removeAllEventListeners(),G.off("pressmove",te),H.off("pressmove",oe),R.removeAllEventListeners(),e.Ticker.remove(O),e.Ticker.remove(k),e.noDrag(R),!0}},e.extend(e.Window,e.Container,"clone","zimContainer",!1),e.Waiter=function(t,o,n,i,r,a,s,l){var d;if(d=zob(e.Waiter,arguments,"container, speed, color, circleColor, corner, shadowColor, shadowBlur, fadeTime",this))return d;if(z_d("59"),this.zimContainer_constructor(),!zot(t)&&t.getBounds)if(t.getBounds())if(zot(t.getStage))zog("zim build - Waiter(): Please give the container that has a stage property");else{zot(o)&&(o=600),zot(n)&&(n="orange"),zot(i)&&(i="white"),zot(r)&&(r=16),zot(a)&&(a="rgba(0,0,0,.3)"),zot(s)&&(s=14),zot(l)&&(l=0);var c=12;this.setBounds(-52,-20,104,40);var u=this,h=this.display=new createjs.Shape;this.addChild(h),h.setBounds(0,0,104,40),h.regX=52,h.regY=20;var f=h.graphics;f.f(n),f.rr(0,0,104,40,r),-1!=a&&s>0&&(h.shadow=new createjs.Shadow(a,3,3,s)),h.on("click",function(e){e.stopImmediatePropagation()});var g=new e.Container;this.addChild(g);for(var p,m=0;m<3;m++)(p=new createjs.Shape).graphics.f(i).dc(0,0,c),p.x=32*(m-1),g.addChild(p),p.cache(-c,-c,24,24),p.alpha=0;this.hide=function(){function e(){u.parent&&u.parent.removeChild(u),t.getStage().update()}l>0?u.animate({obj:{alpha:0},time:l,call:e}):e()},this.show=function(){for(var e,n=0,i=0;i<g.getNumChildren();i++)u.alpha=0,createjs.Tween.get(u,{override:!0}).to({alpha:1},300),setTimeout(function(){e=g.getChildAt(n),createjs.Tween.get(e,{loop:!0}).to({alpha:1},o/3/2).wait(o/3).to({alpha:0},o/3).wait(o-o/3-o/3/2),n++},i*o/3);return u.ticker=createjs.Ticker.on("tick",function(){t.getStage().update()}),u.x=t.getBounds().width/2,u.y=t.getBounds().height/2,t.addChild(u),l>0&&(u.alpha=0,u.animate({alpha:1},l)),u},this.clone=function(){return u.cloneProps(new e.Waiter(t,o,n,i,r,a,s,l))},this.dispose=function(){return u.ticker&&createjs.Ticker.off("tick",u.ticker),h.removeAllEventListeners(),u.removeChild(h),u.removeChild(g),h=null,g=null,!0}}else zog("zim build - Waiter(): Please give the container bounds using setBounds()");else zog("zim build - Waiter(): Please pass in a reference to a container with bounds set as first parameter")},e.extend(e.Waiter,e.Container,"clone","zimContainer",!1),e.Indicator=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g){function p(t){t>=n&&(t=-1);for(var o,a=0;a<n;a++)o=d&&a<t?i:r,a==t&&(o=i),w.getChildAt(a).color=o;!e.OPTIMIZE&&v.getStage()&&v.getStage().update()}var m;if(m=zob(e.Indicator,arguments,"width, height, num, color, offColor, borderColor, backingColor, type, fill, scale, lightScale, press, shadowColor, shadowBlur",this))return m;z_d("60"),this.zimContainer_constructor(),zot(t)&&(t=300),zot(o)&&(o=50),zot(n)&&(n=6),zot(i)&&(i="#f58e25"),zot(r)&&(r="#666"),r<0&&(r="rgba(0,0,0,.01)"),a<0&&(a=null),zot(s)&&(s=-1),zot(l)&&(l="dot"),zot(d)&&(d=!1),zot(c)&&(c=1),zot(u)&&(u=1),zot(h)&&(h=!1),zot(f)&&(f="rgba(0,0,0,.3)"),zot(g)&&(g=5);var z="mousedown"==e.ACTIONEVENT?"mousedown":"click",v=this;this.lights=[];var b;new e.Container;if(-1!=s){var y=new e.Rectangle(t,o,s);this.addChild(y),this.backing=y}var w=this.lightsContainer=new e.Container;this.addChild(w);var x,C=.5*o,S=t/(n+1),T=new createjs.Shape;"square"==l||"box"==l?T.graphics.f("black").dr(-S/2/u+C/2,-o/2+C/2,S/u,o):T.graphics.f("black").dr(-S/2/u,-o/2,S/u,o);for(var k=0;k<n;k++)"square"==l||"box"==l?((x=new e.Rectangle(C,C,r,a)).regX=x.width/2,x.regY=x.height/2):x=new e.Circle(C/2,r,a),this.lights.push(x),x.znum=k,x.scaleX=x.scaleY=u,x.hitArea=T,x.x=S+S*k,x.y=o/2,w.addChild(x);if(w.setBounds(0,0,t,o),w.regX=w.x=t/2,w.regY=w.y=o/2,this.addChild(w),-1!=f&&g>0&&(w.shadow=new createjs.Shadow(f,2,2,g)),h){w.cursor="pointer";w.on(z,function(e){b!=e.target.znum&&(p(b=e.target.znum),v.dispatchEvent("change"))})}w.scaleX=w.scaleY=c,Object.defineProperty(this,"selectedIndex",{get:function(){return b},set:function(e){p(b=Math.floor(e))}}),Object.defineProperty(this,"num",{get:function(){return n},set:function(e){zon&&zog("num is read only")}}),this.clone=function(){return v.cloneProps(new e.Indicator(t,o,n,i,r,a,s,l,d,c,u,h,f,g))},this.dispose=function(){return v.removeAllEventListeners(),!0}},e.extend(e.Indicator,e.Container,"clone","zimContainer",!1),e.Stepper=function(o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S,T,k,j,M,P,E,B){function O(e){var t=String(e).split(".")[1];return t=t?t.length:0}function A(t,o,n){if(p){fe=F.getStage().mouseX,holdY=F.getStage().mouseY,0==fe&&(fe=1),0==holdY&&(holdY=1),v||(b=1),ge=new e.Proportion(0,y,z,z*b);var i=z;J=setTimeout(function(){function e(){$=setTimeout(function(){var r=t;if(v){var a=Math.abs(K-fe),l=Math.abs(Q-holdY);s?(o||n||(a=0),n&&(l=0)):(o||n||(l=0),n&&(a=0)),(a>=10||l>=10)&&(a>l?(G=s?T:S,r=K-fe>0?1:-1,i=ge.convert(Math.abs(fe-K))):(G=s?S:T,r=Q-holdY>0?1:-1,"number"==w&&(r*=-1),i=ge.convert(Math.abs(holdY-Q))))}D(r),e()},i)}de=!0,e()},m)}}function I(){de=!1,clearTimeout(J),clearTimeout($)}function D(t){var n;if("number"==w){var i=W;W+=G*t*Z,W=e.decimals(W,N),h?W>F.max?W=F.min:W<F.min&&(W=F.max):(W>F.max?(W=1==S?F.max:i,f&&(he.cursor="default")):f&&(he.cursor="pointer"),W<F.min&&(W=1==S?F.min:i))}else{if(n=R+t,h)n>o.length-1&&(n=0),n<0&&(n=o.length-1);else{if(n>o.length-1)return void(f&&(he.cursor="default"));if(f&&(he.cursor="pointer"),n<0)return}R=n}_("number"==w?W:o[R],"number"==w?W:R),F.dispatchEvent("change")}function _(t,n){R=n,f&&("number"==w&&0!=t&&N>0&&(t=e.decimals(t,N,!0)),a.text=t,a.x=he.x+he.getBounds().width/2,a.y=he.y+(he.getBounds().height-a.getBounds().height)/2),l&&(te.alpha=1,oe.color=i,te.cursor="pointer",ne.alpha=1,ie.color=i,ne.cursor="pointer",h||("number"==w?(R==F.min&&(Z>0?L():X()),R==F.max&&(Z>0?X():L())):(0==R&&(s?X():L()),R==o.length-1&&(s?L():X())))),ne&&!e.OPTIMIZE&&ne.getStage()?ne.getStage().update():a&&!e.OPTIMIZE&&a.getStage()&&a.getStage().update()}function L(){l&&(te.alpha=.8,oe.color="#aaa",te.cursor="default")}function X(){l&&(ne.alpha=.8,ie.color="#aaa",ne.cursor="default")}var Y;if(Y=zob(e.Stepper,arguments,"list, width, color, borderColor, label, vertical, arrows, corner, shadowColor, shadowBlur, loop, display, press, hold, holdDelay, holdSpeed, drag, dragSensitivity, dragRange, type, min, max, step, step2, arrows2, arrows2Scale, keyEnabled, keyArrows, rightForward, downForward",this))return Y;z_d("61"),this.zimContainer_constructor(),zot(o)&&(o=[0,1,2,3,4,5,6,7,8,9]),zot(n)&&(n=200),zot(i)&&(i="white"),zot(r)&&(r=null),zot(a)&&(a=""),"string"!=typeof a&&"number"!=typeof a||(a=new e.Label(a,64,"arial","#555",null,null,null,"center")),zot(s)&&(s=!1),zot(l)&&(l=!0),zot(d)&&(d=16),zot(c)&&(c="rgba(0,0,0,.3)"),zot(u)&&(u=14),zot(h)&&(h=!1),zot(f)&&(f=!0),zot(g)&&(g=!0),zot(p)&&(p=!0),zot(m)&&(m=400),zot(z)&&(z=200),zot(v)&&(v=!0),(zot(b)||b<=0)&&(b=.1),zot(y)&&(y=200),zot(w)&&(w="list"),zot(x)&&(x=0),zot(C)&&(C=100),zot(S)&&(S=1),zot(T)&&(T=S),zot(k)&&T!=S&&"number"==w&&(k=!0),zot(j)&&(j=.5),zot(M)&&(M=!0),zot(P)&&(P=!0),zot(E)&&(E=!0),zot(B)&&(B="number"!=w);var R,W,N,F=this,G=S,Z=1;if("number"==w){if(x=Number(x),C=Number(C),NaN==x&&(x=0),NaN==C&&(C=100),C<x){Z=-1;var H=C;C=x,x=H,W=C}else W=x;this.min=x,this.max=C,0>x&&0<C&&(W=0),S=Math.abs(S),N=Math.max(O(S),O(T))}else if("letter"==w){o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),"string"!=typeof x&&(x="A"),"string"!=typeof C&&(C="Z"),x=x.substr(0,1).toUpperCase(),C=C.substr(0,1).toUpperCase();var U=o.indexOf(x);U<0&&(x="A",U=0);var V=o.indexOf(C);V<0&&(C="Z",V=o.length),V<U&&(o.reverse(),U=o.length-1-U,V=o.length-1-V),o=o.splice(U,V-U+1)}else w="list";var q,K=0,Q=0;v&&this.on("mousedown",function(){this.getStage().mouseMoveOutside=!0,q=this.getStage().on("stagemousemove",function(e){K=e.rawX,Q=e.rawY})},null,!0),this.label=a,a.mouseChildren=!1,a.mouseEnabled=!1;var J,$,ee,te,oe,ne,ie,re,ae,se,le,de=!1,ce=!1;if(l||k){var ue=new createjs.Shape;ue.graphics.f("rgba(255,255,255,.11)").r(0,0,150,150),ue.regX=75,ue.regY=87.5}if(l&&(te=this.prev=new e.Container,this.addChild(te),te.hitArea=ue,oe=this.arrowPrev=new e.Triangle(100,80,80,i),-1!=c&&u>0&&(te.shadow=new createjs.Shadow(c,3,3,u)),te.addChild(oe),te.cursor="pointer",te.on("mousedown",function(e){G=S;var t=s?B?1:-1:E?-1:1;D(t),A(t)}),p&&te.on("pressup",I),s?(te.rotation=180,te.x=n/2,te.y=f?te.height+25+100+te.height/2+25:2*te.height):(te.rotation=-90,te.x=te.height/2,te.y=te.width/2)),f){var he=this.textBox=new createjs.Shape;he.cursor="pointer",this.addChild(he),he.setBounds(0,0,n,100),null!=r&&he.graphics.s(r).ss(1.5),he.graphics.f(i).rr(0,0,n,100,d),-1!=c&&u>0&&(he.shadow=new createjs.Shadow(c,3,3,u)),l&&(s?l&&(he.y=oe.height+25):l&&(he.x=oe.height+25)),this.addChild(a),o.length>0&&(R=0,a.text=o[R]),a.x=50+he.x+he.getBounds().width/2,a.y=he.y+(he.getBounds().height-a.getBounds().height)/2,he.on("mousedown",function(e){g&&D(1),A(1,!0),"number"==w&&(clearTimeout(ee),ce=!0,ee=setTimeout(function(){ce=!1},200))}),he.on("pressup",function(){ce&&(_(W=Math.round(W),W),F.dispatchEvent("change"))})}else o.length>0&&(R=0);l&&(ne=this.next=new e.Container,this.addChild(ne),ne.hitArea=ue.clone(),ie=this.arrowNext=new e.Triangle(100,80,80,i),-1!=c&&u>0&&(ne.shadow=new createjs.Shadow(c,3,3,u)),ne.addChild(ie),ne.cursor="pointer",ne.on("mousedown",function(e){G=S;var t=s?B?-1:1:E?1:-1;D(t),A(t)}),p&&ne.on("pressup",I),s?(ne.rotation=0,ne.x=n/2,ne.y=ne.getBounds().height/2):(ne.rotation=90,ne.x=f?he.x+he.getBounds().width+ne.getBounds().height/2+25:te.x+te.getBounds().width,ne.y=ne.getBounds().width/2));var fe,ge;p&&f&&he.on("pressup",I),k&&((re=this.prev2=new e.Container).hitArea=ue.clone(),ae=this.arrowPrev2=new e.Triangle(100,80,80,"rgba(0,0,0,.2)",i,2),re.addChild(ae),re.cursor="pointer",re.scale(j),re.alpha=.5,re.on("mousedown",function(e){G=T;var t=s?E?-1:1:B?1:-1;D(t),A(t,null,!0)}),p&&re.on("pressup",I),(se=this.next2=new e.Container).hitArea=ue.clone(),le=this.arrowNext2=new e.Triangle(100,80,80,"rgba(0,0,0,.2)",i,2),se.addChild(le),se.cursor="pointer",se.scale(j),se.alpha=.5,se.on("mousedown",function(e){G=T;var t=s?E?1:-1:B?-1:1;D(t),A(t,null,!0)}),p&&se.on("pressup",I),s?(re.y=this.height/2,re.x=-re.width/2-25*Math.max(.2,Math.min(1,j)),re.rotation=270,se.y=this.height/2,se.x=this.width+se.width/2+25*Math.max(.2,Math.min(1,j)),se.rotation=90):(se.x=this.width/2,se.y=-se.height/2-25*Math.max(.2,Math.min(1,j)),se.rotation=0,re.x=this.width/2,re.y=this.height+re.height/2+25*Math.max(.2,Math.min(1,j)),re.rotation=180),this.addChild(re,se)),_("number"==w?W:o[R],"number"==w?W:R),zot(e.focus)&&(e.focus=this),Object.defineProperty(this,"currentIndex",{get:function(){return"number"==w?void 0:R},set:function(e){zot(e)||(e=Math.min(o.length-1,Math.max(0,e)),_(o[R=e],R))}}),Object.defineProperty(this,"currentValue",{get:function(){return"number"==w?W:o[R]},set:function(e){if(!zot(e))if("number"==w){if(F.max>F.min){if(e>F.max||e<F.min)return}else if(e<F.max||e>F.min)return;_(W=e,W)}else{if(!(o.indexOf(e)>-1))return;if((e=o.indexOf(e))==F.currentIndex)return;_(o[R=e],R)}}}),Object.defineProperty(this,"loop",{get:function(){return h},set:function(e){h=e,"number"==w?_(W,W):_(o[F.currentIndex],F.currentIndex)}}),Object.defineProperty(this,"stepperArray",{get:function(){return o},set:function(e){o=e,F.currentIndex=F.currentIndex}}),Object.defineProperty(this,"focus",{get:function(){return e.focus==F},set:function(t){t?e.focus=F:e.focus==F&&(e.focus=null)}}),this._enabled=!0,Object.defineProperty(F,"enabled",{get:function(){return F._enabled},set:function(n){t(F,n),n?("number"==w?_(W,W):_(o[F.currentIndex],F.currentIndex),window.addEventListener("keydown",F.keyDownEvent)):(L(),X(),window.removeEventListener("keydown",F.keyDownEvent),f&&(a.mouseChildren=!1),f&&(a.mouseEnabled=!1)),ne&&!e.OPTIMIZE&&ne.getStage()?ne.getStage().update():a&&!e.OPTIMIZE&&a.getStage()&&a.getStage().update()}});var pe=!1,me=!1,ze=!1;this.on("mousedown",function(){e.focus=F,pe=!0,me=!1,ze=!1}),this.keyDownEvent=function(t){if(e.focus==F){t||(t=event);var o=t.keyCode;if(P&&o>=37&&o<=40){var n=B?40:38,i=E?39:37,r=B?38:40,l=E?37:39;o==n||o==i?(G=s&&o==n||!s&&o==i?S:T,D(1)):o!=r&&o!=l||(G=s&&o==r||!s&&o==l?S:T,D(-1))}if(M)if("number"==w){var d;!t.shiftKey&&o>=48&&o<=57?d=o-48:o>=96&&o<=105?d=o-96:190==o?me=!0:173==o||189==o?(F.currentValue=-1*F.currentValue,F.dispatchEvent("change"),ze=!ze):46==o&&(pe=!0,me=!1),pe&&!zot(d)?(me&&(d/=10),ze&&(d*=-1),F.currentValue=d,pe=!1,F.dispatchEvent("change")):zot(d)||(me&&(d=String(d/10).substr(1)),F.currentValue=Number(Math.floor(Number(a.text))+String(d)),F.dispatchEvent("change"))}else{var c=F.currentValue;F.currentValue=String.fromCharCode(t.keyCode),F.currentValue!=c&&F.dispatchEvent("change")}}},window.addEventListener("keydown",this.keyDownEvent),this.next=function(){D(1)},this.prev=function(){D(-1)},this.clone=function(){return F.cloneProps(new e.Stepper(o,n,i,r,a.clone(),s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S,T,k,j,M,P,E,B))},this.dispose=function(){return F.removeAllEventListeners(),window.removeEventListener("keydown",F.keyDownEvent),F.getStage()&&F.getStage().off(q),!0}},e.zut=function(t){if(zot(t)||!t.key)return!0;e.async("http://zimjs.com/code/gamdata.php?id="+t.key+"&player="+t.player+"&score="+t.score+"&reverse="+t.info.reverse+"&total="+t.info.total+"&allowZero="+t.info.allowZero,t.info.type)},e.extend(e.Stepper,e.Container,"clone","zimContainer",!1),e.Slider=function(o,n,i,r,a,s,l,d,c,u){function h(e){return 0==i?e:Math.round(e/i)*i}function f(t){var i=y.globalToLocal(t.stageX,t.stageY),a=g(i.x-A,i.y-I,S);d?(r.x=a.x,w=h((a.y-S.y)/S.height*(o-n)),r.y=S.y+w*S.height/(o-n),w+=n,r.y!=x&&y.dispatchEvent("change"),x=r.y):(w=h((a.x-S.x)/S.width*(n-o)),r.x=S.x+w*S.width/(n-o),w+=o,r.y=a.y,r.x!=x&&y.dispatchEvent("change"),x=r.x),!e.OPTIMIZE&&y.getStage()&&y.getStage().update()}function g(e,t,o){return e=Math.max(o.x,Math.min(o.x+o.width,e)),t=Math.max(o.y,Math.min(o.y+o.height,t)),{x:e,y:t}}var p;if(p=zob(e.Slider,arguments,"min, max, step, button, barLength, barWidth, barColor, vertical, useTicks, inside",this))return p;if(z_d("62"),this.zimContainer_constructor(),zot(o)&&(o=0),zot(n)&&(n=10),n-o!=0){if(zot(i)&&(i=0),zot(a)&&(a=300),zot(s)&&(s=3),zot(l)&&(l="#666"),zot(d)&&(d=!1),zot(c)&&(c=!1),zot(u)&&(u=!1),zot(r)){var m=30,z=40;d&&(m=50,z=40),r=new e.Button(m,z,"","#fff","#ddd","#666",1,0,null,null,30)}r.rollPersist=!0;var v,b;d?(v=r.width,u?(b=a,this.setBounds(0,0,v,b)):(b=a+r.height,this.setBounds(-r.width/2,-r.height/2,v,b))):(b=r.height,u?(v=a,this.setBounds(0,0,v,b)):(v=a+r.width,this.setBounds(-r.width/2,-r.height/2,v,b)));var y=this,w=o,x=0;this.button=r,this.cursor="pointer";var C,S,T,k,j;if(c&&0!=i){k=this.ticks=new e.Shape,this.addChild(k),(j=k.graphics).ss(1).s(l);var M=Math.round((n-o)/i),P=(n-o)/M;if(P!=i&&zon&&zog("zim.Slider() : non-divisible step ("+i+") adjusted"),i=P,u)E=(a-(d?r.height:r.width))/M;else var E=a/M}if(d){B=u?r.height/2:0;if(c&&0!=i){for(O=0;O<=M;O++)j.mt(0,B+E*O).lt(20,B+E*O);k.x=10}C=this.bar=new e.Rectangle(s,a,l),this.addChild(C),e.centerReg(r),this.addChild(r),T=C.getBounds(),S=new createjs.Rectangle(T.width/2,T.y+B,0,T.height-2*B)}else{var B=u?r.width/2:0;if(c&&0!=i){for(var O=0;O<=M;O++)j.mt(B+E*O,0).lt(B+E*O,-20);k.y=-10}C=this.bar=new e.Rectangle(a,s,l),this.addChild(C),e.centerReg(r),this.addChild(r),T=C.getBounds(),S=new createjs.Rectangle(T.x+B,T.height/2,T.width-2*B,0)}r.x=S.x,r.y=S.y;var A,I;r.on("mousedown",function(e){var t=y.globalToLocal(e.stageX,e.stageY);A=t.x-r.x,I=t.y-r.y,y.getStage()&&(y.getStage().mouseMoveOutside=!0)}),r.on("pressmove",function(e){f(e)}),C.on("mousedown",function(e){A=r.width/2,I=r.height/2,f(e)}),Object.defineProperty(this,"currentValue",{get:function(){return w},set:function(t){zot(t)||(o<n?(t<o&&(t=o),t>n&&(t=n)):(t>o&&(t=o),t<n&&(t=n)),w=t=h(t),d?(r.y=(t-n)/(o-n)*S.height+B,x=r.y):(r.x=(t-o)/(n-o)*S.width+B,x=r.x),!e.OPTIMIZE&&y.getStage()&&y.getStage().update())}}),Object.defineProperty(this,"min",{get:function(){return o},set:function(e){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return n},set:function(e){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(e){zon&&zog("step is read only")}}),this._enabled=!0,Object.defineProperty(y,"enabled",{get:function(){return y._enabled},set:function(e){t(y,e)}}),this.clone=function(){return y.cloneProps(new e.Slider(o,n,i,r.clone(),a,s,l,d,c,u))},this.dispose=function(){return r.removeAllEventListeners(),!0}}else zog("ZIM Slider range must not be 0")},e.extend(e.Slider,e.Container,"clone","zimContainer",!1),e.Dial=function(o,n,i,r,a,s,l,d,c,u,h,f,g,p){function m(e){return 0==i?e:Math.round(e/i)*i}function z(t){var r;t<0&&(t+=360),t%=360,0!=i?(r=m((t=Math.min(t,360-360/(j+1)))/(360-360/(j+1))*(n-o)),E.rotation=r*(360-360/(j+1))/(n-o)):(E.rotation=t,r=t/360*(n-o)),r!=x&&(x=r,w=r+o,b.dispatchEvent("change"),!e.OPTIMIZE&&b.getStage()&&b.getStage().update())}var v;if(v=zob(e.Dial,arguments,"min, max, step, width, color, indicatorColor, indicatorScale, type, innerCircle, innerScale, useTicks, innerTicks, tickColor, limit",this))return v;if(z_d("63"),this.zimContainer_constructor(),zot(o)&&(o=0),zot(n)&&(n=10),n-o!=0){zot(i)&&(i=1),zot(r)&&(r=100),zot(a)&&(a="#666"),zot(s)&&(s="#222"),zot(l)&&(l=1),zot(d)&&(d="arrow"),zot(c)&&(c=!0),zot(u)&&(u=.5),zot(h)&&(h=!0),zot(f)&&(f=!1),zot(g)&&(g=s),zot(p)&&(p=!0);var b=this;this.cursor="pointer";var y=r/2,w=o,x=0,C=this.backing=new e.Circle(y,a);if(this.addChild(C),c){var S=f?"rgba(0,0,0,.2)":"rgba(0,0,0,.1)";"black"!=a&&"#000"!=a&&"#000000"!=a&&"#111"!=a&&"#111111"!=a||(S="#222");var T=this.inner=new e.Circle(y*u,S);if(this.addChild(T),!f){var k=this.inner2=new e.Circle(y*(u-.1),"rgba(0,0,0,.1)");this.addChild(k)}}var j=(n-o)/i;if(h&&0!=i){ticks=this.ticks=new e.Container,this.addChild(ticks);for(var M,P=0;P<j+1;P++)(M=new e.Rectangle(1,.2*y,g)).regY=y*(f?u-.05:1.28),M.regX=.5,M.rotation=360/(j+1)*P,ticks.addChild(M)}if(this.setBounds(-y,-y,r,r),"dot"==d||"circle"==d){var E=this.indicator=new e.Container,B=this.indicatorShape=new e.Circle(.19*y,s);E.addChild(B),e.scale(E,l),E.regY=y-E.getBounds().width*l/2-.07*y}else if("line"==d||"rectangle"==d){var E=this.indicator=new e.Container,B=this.indicatorShape=new e.Rectangle(.1*y,.3*y,s);E.addChild(B),e.scale(E,l),E.regY=y-E.getBounds().width*l/2-.07*y,E.regX=.05*y}else{var E=this.indicator=new e.Container,B=this.indicatorShape=new e.Triangle(.4*y,.4*y,.4*y,s);E.addChild(B),e.scale(E,l),E.regY=y-E.getBounds().height*l*(f?.85:.75),f&&(B.rotation=180)}E.regY/=l,this.addChild(E);var O,A,I,D,_=0;this.on("mousedown",function(){O=E.rotation;var e=b.parent.globalToLocal(b.getStage().mouseX,b.getStage().mouseY),t=e.x-b.x,o=b.y-e.y;A=180*Math.atan2(t,o)/Math.PI;var n=(new Date).getTime();I=b.on("pressmove",function(){e=b.parent.globalToLocal(b.getStage().mouseX,b.getStage().mouseY),t=e.x-b.x,o=b.y-e.y;var n=O+180*Math.atan2(t,o)/Math.PI-A;p&&(n<0&&(n+=360),n%=360,Math.abs(n-_)>180)||(_=n,z(n))}),D=this.on("pressup",function(){(new Date).getTime()-n<200&&(e=b.parent.globalToLocal(b.getStage().mouseX,b.getStage().mouseY),t=e.x-b.x,o=b.y-e.y,z(180*Math.atan2(t,o)/Math.PI)),O=E.rotation,b.off("pressmove",I),b.off("pressup",D)})}),Object.defineProperty(this,"currentValue",{get:function(){return w},set:function(t){zot(t)||(o<n?(t<o&&(t=o),t>n&&(t=n)):(t>o&&(t=o),t<n&&(t=n)),w=t,t=m(t),E.rotation=0!=i?(t-o)*(360-360/(j+1))/(n-o):360*(t-o)/(n-o),x=t-o,_=E.rotation,!e.OPTIMIZE&&b.getStage()&&b.getStage().update())}}),Object.defineProperty(this,"min",{get:function(){return o},set:function(e){zon&&zog("min is read only")}}),Object.defineProperty(this,"max",{get:function(){return n},set:function(e){zon&&zog("max is read only")}}),Object.defineProperty(this,"step",{get:function(){return i},set:function(e){zon&&zog("step is read only")}}),this._enabled=!0,Object.defineProperty(b,"enabled",{get:function(){return b._enabled},set:function(e){t(b,e)}}),this.clone=function(){return b.cloneProps(new e.Dial(o,n,i,r,a,s,l,d,c,u,h,f,g,p))},this.dispose=function(){return b.removeAllEventListeners(),!0}}else zog("ZIM Dial range must not be 0")},e.extend(e.Dial,e.Container,"clone","zimContainer",!1),e.Tabs=function(o,n,i,r,a,s,l,d,c,u,h,f,g,p){function m(e){var t=i[y];t&&(x[y].color=zot(t.offColor)?s:t.offColor,d||(x[y].enabled=!0)),(t=i[y=e])&&(x[y].color=zot(t.color)?r:t.color,d||(x[y].enabled=!1))}var z;if(z=zob(e.Tabs,arguments,"width, height, tabs, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor, flatBottom, keyEnabled, gradient, gloss",this))return z;z_d("65"),this.zimContainer_constructor(),zot(o)&&(o=240),zot(n)&&(n=60),(zot(i)||i.length<=0)&&(i=[{label:1},{label:2},{label:3},{label:4}]),zot(r)&&(r="#333"),zot(a)&&(a="#555"),zot(s)&&(s="#777"),zot(d)&&(d=!1),zot(l)&&(l=1),zot(c)&&(c=0),zot(u)&&(u="white"),zot(h)&&(h=!0),zot(f)&&(f=!0);var v=this;this.keyEnabled=f;var b,y=0,w=[],x=[],C=i.length,S=(o-l*(C-1))/C;if(zog(o),"number"==typeof i[0]||"string"==typeof i[0])for(P=0;P<i.length;P++)i[P]={label:String(null!=i[P])?i[P]:"1"};for(var T,k,j=0,M=0,P=0;P<i.length;P++)zot((T=i[P]).width)&&M++,j+=zot(T.width)?S:T.width;if(j>o-l*(C-1))for(P=0;P<i.length;P++)(T=i[P]).width=(o-l*(C-1))/j*(zot(T.width)?S:T.width);else if(Math.round(j)<Math.round(o-l*(C-1)))if(M>0)for(k=(C*S-(j-M*S))/M,P=0;P<i.length;P++)(T=i[P]).width=zot(T.width)?k:T.width;else zon&&zog("ZIM Tabs - total less than width"),o=j+l*(C-1);var E,B=0;for(P=0;P<i.length;P++)zot((T=i[P]).label)&&(T.label=" "),E=0==P?zot(T.color)?r:T.color:zot(T.offColor)?s:T.offColor,"string"!=typeof T.label&&"number"!=typeof T.label||(T.label=new e.Label(T.label,n/2,"arial",u)),(b=new e.Button(zot(T.width)?S:T.width,n,T.label,E,zot(T.rollColor)?a:T.rollColor,null,null,c,-1,null,null,g,p,h)).znum=P,T.label.znum=P,w.push(T.label),x.push(b),this.addChild(b),b.x=B,B=b.x+b.width+l,0!=P||d||(b.enabled=!1);zog(this.width),this.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(t){m(t.target.znum),v.dispatchEvent("change"),!e.OPTIMIZE&&v.getStage()&&v.getStage().update()}),window.addEventListener("keydown",function(t){if(v.keyEnabled&&9==t.keyCode){var o=y;m(t.shiftKey?--o<0?i.length-1:o:++o>i.length-1?0:o),v.dispatchEvent("change"),!e.OPTIMIZE&&v.getStage()&&v.getStage().update(),t.preventDefault()}}),Object.defineProperty(this,"selected",{get:function(){return x[y]},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"selectedIndex",{get:function(){return y},set:function(t){m(t),!e.OPTIMIZE&&v.getStage()&&v.getStage().update()}}),Object.defineProperty(this,"tabs",{get:function(){return y},set:function(t){m(Math.min(Math.max(t,0),i.length-1)),!e.OPTIMIZE&&v.getStage()&&v.getStage().update()}}),Object.defineProperty(this,"color",{get:function(){return r},set:function(t){r=t,zot(i[y].color)&&(x[y].color=r,!e.OPTIMIZE&&v.getStage()&&v.getStage().update())}}),Object.defineProperty(this,"rollColor",{get:function(){return a},set:function(e){a=e;for(var t=0;t<i.length;t++)zot(i[y].rollColor)&&(x[t].rollColor=a)}}),Object.defineProperty(this,"offColor",{get:function(){return s},set:function(t){s=t;for(var o=0;o<i.length;o++)zot(i[y].offColor)&&(x[o].color=s);!e.OPTIMIZE&&v.getStage()&&v.getStage().update()}}),Object.defineProperty(this,"label",{get:function(){return w[y]},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"text",{get:function(){return null!=w[y]?w[y].text:void 0},set:function(e){zon&&zog("selected is read only - try selectedIndex")}}),Object.defineProperty(this,"buttons",{get:function(){return x},set:function(e){zon&&zog("buttons is read only")}}),Object.defineProperty(this,"labels",{get:function(){return w},set:function(e){zon&&zog("labels is read only")}}),this._enabled=!0,Object.defineProperty(v,"enabled",{get:function(){return v._enabled},set:function(e){t(v,e)}}),this.clone=function(){for(var t=e.copy(i),m=0;m<t.length;m++)t[m].label=t[m].label.clone();return v.cloneProps(new e.Tabs(o,n,t,r,a,s,l,d,c,u,h,f,g,p))},this.dispose=function(){for(var e=0;e<v.buttons.length;e++)v.buttons[e].dispose(),v.labels[e].dispose();return v.removeAllEventListeners(),!0}},e.extend(e.Tabs,e.Container,"clone","zimContainer",!1),e.Pad=function(o,n,i,r,a,s,l,d,c,u,h){function f(t){var o=t.target;m.selected=o.selected,m.text=o.text,m.label=o.label;for(var i=o.selectedIndex,r=0;r<b.length;r++)b[r].selectedIndex=-1;o.selectedIndex=i,p=o.znum*n+i,m.dispatchEvent("change"),!e.OPTIMIZE&&m.getStage()&&m.getStage().update()}var g;if(g=zob(e.Pad,arguments,"width, cols, rows, keys, color, rollColor, offColor, spacing, currentEnabled, corner, labelColor",this))return g;if(z_d("66"),this.zimContainer_constructor(),zot(o)&&(o=150),zot(n)&&(n=3),zot(i)&&(i=n),zot(r)){r=[];for(w=1;w<=i*n;w++)r.push(w)}zot(c)&&(c=!0),zot(d)&&(d=1);var p,m=this;this.cols=n,this.rows=i;var z,v=o/n-d,b=[],y=0;this.labels=[],this.buttons=[];for(var w=0;w<i;w++){for(var x=[],C=0;C<n;C++)x.push(null!=r[y]?r[y]:""),y++;z=b[w]=new e.Tabs(o,v,x,a,s,l,d,c,u,h,!1,!1),this.labels=this.labels.concat(z.labels),this.buttons=this.buttons.concat(z.buttons),this.addChild(z),z.selectedIndex=-1,z.y=(v+d)*w,z.znum=w,z.on("change",f)}this.tabs=b,Object.defineProperty(this,"selectedIndex",{get:function(){return p},set:function(e){p=e;for(var t=0;t<b.length;t++)b[t].selectedIndex=-1;var o=Math.floor(p/n);o>=0&&o<m.tabs.length&&(m.tabs[o].selectedIndex=p%n)}}),this._enabled=!0,Object.defineProperty(m,"enabled",{get:function(){return m._enabled},set:function(e){t(m,e)}}),this.clone=function(){return m.cloneProps(new e.Pad(o,n,i,r,a,s,l,d,c,u,h))},this.dispose=function(){for(var e=0;e<m.tabs.length;e++)m.tabs[e].dispose();return m.removeAllEventListeners(),!0}},e.extend(e.Pad,e.Container,"clone","zimContainer",!1),e.ColorPicker=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g){function p(e){return(e=Math.floor(e).toString(16))+""+e}function m(e){"#000"==_||"#000000"==_||"black"==_?(f.color="#222",f.alpha=1):(f.color="black",f.alpha=.5),f.x=T.x+e%n*(j+i)+j/2,f.y=T.x+Math.floor(e/n)*(j+i)+j/2}function z(){if(_!=W||S!=C){if(M&&r){var t=[x=w,w=W];for(O=0;O<2;O++){var o=T.graphics;X=Math.floor(O/n),Y=(L=O%n)*(j+i),R=X*(j+i)+Z,P[O]=t[O],o.f(se.color).r(Y-1,R-1,j+2,j+2).f(t[O]).r(Y,R,j,j)}!e.OPTIMIZE&&y.getStage()&&y.getStage().update()}W=_,C=S,y.dispatchEvent("change")}else y.dispatchEvent("close")}function v(e){return Math.round(e*Math.pow(10,2))/Math.pow(10,2)}var b;if(b=zob(e.ColorPicker,arguments,"width, colors, cols, spacing, greyPicker, alphaPicker, startColor, drag, shadowColor, shadowBlur, buttonBar, circles, indicator, backingColor",this))return b;z_d("67"),this.zimContainer_constructor(),zot(t)&&(t=500),zot(o)&&(M=!0),zot(n)&&(n=10),zot(i)&&(i=2),zot(a)&&(a=!0),zot(r)&&(r=!0),zot(l)&&(l=!0),zot(d)&&(d="rgba(0,0,0,.3)"),zot(c)&&(c=14),zot(u)&&(u=!0),zot(h)&&(h=!1),zot(f)&&(f=!1,u||(f=!0)),zot(g)&&(g="black");var y=this,w="#e472c4",x="#50c4b7",C=1,S=1,T=new createjs.Shape;this.addChild(T),T.x+=i,T.y+=i;var k,j,M=!1,P=[];if(zot(o)){M=!0;var E=6,B=E*E*E;E=Math.ceil(Math.pow(B,.5)),j=(t-i)/18-i;F=Math.floor(Math.pow(E*E,1/3));k=[];for(var O=0;O<6;O++)for(var A=0;A<6;A++)for(var I=0;I<6;I++)k.push("#"+p(3*O)+p(3*A)+p(3*I));o=[];for(O=0;O<k.length;O++)X=Math.floor(O/6),o[18*((L=O%6)+6*(F=X>=18?1:0))+(X-6*F*3)]=k[O];n=18,P=[x,w]}else j=(t-i)/n-i;var D=Math.ceil(o.length/n),_=String(o[o.length-1]);zot(s)||(_=String(s));var L,X,Y,R,W=x,N=T.graphics,F=0;for(O=0;O<o.length;O++)X=O%n,L=Math.floor(O/n),Y=X*(j+i),R=L*(j+i),h?N.f(o[O]).dc(Y+j/2,R+j/2,j/2):N.f(o[O]).r(Y,R,j,j);var G=R+j+i,Z=G;if(r){for(O=0;O<16;O++)P.push("#"+p(O)+p(O)+p(O));for(O=0;O<P.length;O++)X=Math.floor(O/n),Y=(L=O%n)*(j+i),R=X*(j+i)+G,h?N.f(P[O]).dc(Y+j/2,R+j/2,j/2):N.f(P[O]).r(Y,R,j,j);G=R+j+i;var H=n,U=Math.ceil(P.length/n)}f&&((f=this.indicator=h?new e.Circle(j/2*.5):new e.Rectangle(.5*j,.5*j)).alpha=.5,f.centerReg(),this.addChild(f),m(o.indexOf(_)));if(a){var V=new e.Container;V.setBounds(0,0,600,70),this.addChild(V),V.x=0,V.y=G;var q=this.alphaBacking=new e.Rectangle(580,50,"#222",null,null,0);V.addChild(q),e.centerReg(q,V);var K=this.alphaBut=new e.Button({width:20,height:30,label:"",corner:0,hitPadding:20}),Q=this.alphaSlider=new e.Slider(0,1,.05,K,330);Q.currentValue=1,V.addChild(Q),Q.x=40,Q.y=V.height/2;var J=this.alphaText=new e.Label("Alpha: 1",30,null,"orange");V.addChild(J),J.x=Q.x+Q.bar.width+40,J.y=V.height/2-J.height/2,V.scaleX=V.scaleY=t/600,Q.on("change",function(){J.text="Alpha: "+v(Q.currentValue),re&&(re.alpha=S=Q.currentValue),u?y.dispatchEvent("set"):y.dispatchEvent("change"),y.getStage()&&y.getStage().update()}),G+=V.height-10}if(u){var $=new e.Container;$.setBounds(0,0,600,100),this.addChild($),$.x=0,$.y=G+10;var ee=this.swatchText=new e.Label(_.toUpperCase().substr(0,7),30,null,"orange");if($.addChild(ee),e.centerReg(ee),ee.x=90,ee.y=48,l){var te=this.grip=new createjs.Shape;$.addChild(te),te.graphics.f("rgba(256,256,256,.25)").r(0,0,5,20).r(10,0,5,20).r(20,0,5,20).r(30,0,5,20),te.x=70,te.y=65,ee.y=40}var oe=this.closeBut=new e.Button(90,90,"X","#222","#444",null,null,0);$.addChild(oe),oe.x=600-oe.width-10,oe.y=0,oe.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(){y.dispatchEvent("close")});var ne=this.okBut=new e.Button(150,90,"OK","#222","#444",null,null,0);$.addChild(ne),ne.x=oe.x-ne.width-10,ne.y=0,ne.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",z);var ie=this.swatchBacking=new createjs.Shape;$.addChild(ie),(N=ie.graphics).f("black").r(.5,.5,50,89).f("#666").r(50,.5,50,89).f("white").r(100,.5,49.5,89),ie.x=ne.x-150-10,ie.y=0;var re=this.swatch=new e.Rectangle(150,90,_);$.addChild(re),re.x=ie.x,re.y=0,re.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",z),re.cursor="pointer",$.scaleX=$.scaleY=t/600,G+=$.height}else T.cursor="pointer";a||u||(G-=10-i);var ae=G+10;this.setBounds(0,0,t,ae);var se=this.backing=new e.Rectangle(t,ae,g);if(this.addChildAt(se,0),-1!=d&&c>0&&(se.shadow=new createjs.Shadow(d,8,8,c)),l){var le,de;se.on("mousedown",function(e){le=e.stageX-y.x,de=e.stageY-y.y,se.cursor="move"}),se.on("pressmove",function(e){y.x=e.stageX-le,y.y=e.stageY-de,y.getStage()&&y.getStage().update()}),se.on("pressup",function(e){se.cursor="default",y.getStage()&&y.getStage().update()})}var ce=n*(j+i),ue=D*(j+i);if(r)var he=H*(j+i),fe=U*(j+i);T.on("mousedown"==e.ACTIONEVENT?"mousedown":"click",function(){var t=e.hitTestGrid(T,ce,ue,n,D,y.getStage().mouseX,y.getStage().mouseY,0,0,i,i);zot(t)||(_=o[t],u?(re.color=_,ee.text=String(o[t]).toUpperCase().substr(0,7),e.centerReg(ee),_!=W&&y.dispatchEvent("set")):z()),r&&(t=null,zot(t=e.hitTestGrid(T,he,fe,H,U,y.getStage().mouseX,y.getStage().mouseY,0,ue,i,i))||(_=P[t],u?(re.color=_,ee.text=P[t].toUpperCase(),e.centerReg(ee),_!=W&&y.dispatchEvent("set")):z())),f&&m(o.indexOf(_)),u?y.getStage()&&y.getStage().update():f&&y.getStage()&&y.getStage().update()}),Object.defineProperty(this,"selectedColor",{get:function(){return _},set:function(t){W=_=t,u&&(re.color=_,ee.text=_,e.centerReg(ee),y.getStage()&&y.getStage().update()),f&&m(o.indexOf(_))}}),Object.defineProperty(this,"selectedIndex",{get:function(){return o.indexOf(_)},set:function(t){W=_=o[t],u&&(re.color=_,ee.text=_,e.centerReg(ee),y.getStage()&&y.getStage().update()),f&&m(o.indexOf(_))}}),Object.defineProperty(this,"selectedAlpha",{get:function(){return a?v(Q.currentValue):1},set:function(e){a&&(C=Q.currentValue=e,re&&(re.alpha=C),J&&(J.text="Alpha: "+v(Q.currentValue)),y.getStage()&&y.getStage().update())}}),this.clone=function(){return y.cloneProps(new e.ColorPicker(t,M?null:o,n,i,r,a,s,l,d,c,u,h,f,g))},this.dispose=function(){return Q.dispose(),T.removeAllEventListeners(),se.removeAllEventListeners(),oe.removeAllEventListeners(),re.removeAllEventListeners(),ne.removeAllEventListeners(),!0}},e.extend(e.ColorPicker,e.Container,"clone","zimContainer",!1),e.Loader=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S){function T(t){var o;o=t.dataTransfer&&t.dataTransfer.files&&t.dataTransfer.files.length>0?t.dataTransfer.files:t.target.files;for(var n,i=[],r=0;r<o.length;r++)!function(t){var r=new FileReader;r.onload=function(t){var r=new Image;r.onload=function(){var t=new e.Bitmap(r);if(i.push(t),1==i.length&&(n=t),i.length==o.length){var a=new createjs.Event("loaded");a.bitmaps=i,a.bitmap=n,a.lastBitmap=t,a.total=i.length,j.dispatchEvent(a),P.value=""}},r.src=t.target.result},r.readAsDataURL(t)}(o[r])}var k;if(k=zob(e.Loader,arguments,"frame, width, height, label, color, rollColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, hitPadding, gradient, gloss, flatBottom, backing, rollBacking, rollPersist, icon, rollIcon, toggle, rollToggle, toggleEvent, dashed",this))return k;if(z_d("68"),zot(t))zon&&zog("zim.Loader - please provide a reference to zim Frame");else{zot(o)&&(o=250),zot(n)&&(n=70),zot(r)&&(r="rgba(0,0,0,.05)"),zot(a)&&(a="rgba(0,0,0,.1)"),zot(s)&&(s="rgba(0,0,0,.3)"),zot(l)&&(l=1),zot(S)&&(S=!0),zot(d)&&(d=0),zot(i)&&(i=new e.Label({text:"UPLOAD PIC",color:"rgba(0,0,0,.4)",valign:"center",align:"center"})),this.zimButton_constructor(o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S);var j=this,M=t.stage;i=j.label;var P=j.tag=document.createElement("input");document.body.appendChild(P),P.setAttribute("type","file"),P.setAttribute("multiple","multiple"),P.style.cssText="border:thin solid grey; z-index:2; width:"+o+"px; height:"+n+"px; overflow:hidden; outline:none;position:absolute; left:0px; top:0px; display:none; cursor:pointer; opacity: 0; filter: alpha(opacity=0);",P.addEventListener("change",T);var E=new createjs.DOMElement(P);M.addChild(E),E.alpha=0,this.resize=function(){j.getStage()&&setTimeout(function(){var o=j.localToGlobal(0,0);E.x=t.x+o.x*t.scale,E.y=t.y+o.y*t.scale,e.scale(E,t.scale*j.scaleX,t.scale*j.scaleY),M.update()},50)},this.resize(),j.on("added",function(){P.style.display="block",j.resize()}),j.on("removed",function(){P.style.display="none"}),t.on("resize",j.resize),(new XMLHttpRequest).upload&&P.addEventListener("drop",function(e){P.removeEventListener("change",T),T(e),setInterval(function(){P.addEventListener("change",T)},100)}),this.save=function(e,o,n,i,r,a,s,l){var d;return(d=zob(j.save,arguments,"content, x, y, width, height, cached, cachedBounds, type"))?d:(zot(e)&&(e=t.stage),zot(o)&&(o=0),zot(n)&&(n=0),zot(i)&&(i=t.width),zot(r)&&(r=t.height),zot(l)&&(l="png"),e.cache(o,n,i,r),zgo(e.cacheCanvas.toDataURL("image/"+l),"_blank"),a?s&&e.cache(cashedBound.x,cashedBound.y,cashedBound.width,cashedBound.height):e.uncache(),j)},this.clone=function(){var T=new e.Loader(t,o,n,zot(i)?null:i.clone(),r,a,s,l,d,c,u,h,f,g,p,zot(m)?null:m.clone(),zot(z)?null:z.clone(),v,zot(b)?null:b.clone(),zot(y)?null:y.clone(),zot(w)?null:"string"==typeof w?w:w.clone(),zot(x)?null:x.clone(),C,S);return j.cloneProps(T)},this.dispose=function(){return j.zimButton_dispose(),j.removeAllEventListeners(),j.removeChild(E),document.body.removeChild(P),!0}}},e.extend(e.Loader,e.Button,["clone","dispose"],"zimButton",!1),e.TextArea=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m){var z;if(z=zob(e.TextArea,arguments,"frame, width, height, size, padding, color, backingColor, borderColor, borderWidth, corner, shadowColor, shadowBlur, dashed, id, placeholder, readOnly",this))return z;if(z_d("69"),zot(t))zon&&zog("zim.TextArea - please provide a reference to zim Frame");else{zot(o)&&(o=250),zot(n)&&(n=70),zot(i)&&(i=20),zot(r)&&(r=5),zot(a)&&(a="#666"),zot(s)&&(s="rgba(256,256,256,.1)"),zot(l)&&(l="rgba(0,0,0,.1)"),zot(c)&&(c=0),!zot(h)&&zot(u)&&(u="rgba(0,0,0,.3)"),!zot(u)&&zot(h)&&(h=10),this.zimContainer_constructor(o,n);var v=this,b=t.stage,y=this.backing=new e.Rectangle(o,n,s,l,d,c,null,f);-1!=u&&h>0&&(y.shadow=new createjs.Shadow(u,3,3,h)),v.addChild(y);var w=v.tag=document.createElement("textarea");document.body.appendChild(w),zot(g)||(w.setAttribute("id",g),w.setAttribute("name",g)),m&&(w.readOnly=!0),zot(p)||w.setAttribute("placeholder",p),w.style.cssText="background-color:transparent; color:"+a+"; resize:none; z-index:3; width:"+(o-2*r)+"px; height:"+(n-2*r)+"px; overflow:hidden; outline:none;font-size:"+i+"px; font-family:verdana; border:none; position:absolute; left:0px; top:0px; display:none;",w.addEventListener("change",function(){v.dispatchEvent("change")}),w.addEventListener("input",function(){v.dispatchEvent("input")}),w.addEventListener("focus",function(){window.removeEventListener("keydown",t.zil[0]),v.dispatchEvent("focus")}),w.addEventListener("blur",function(){window.addEventListener("keydown",t.zil[0]),v.dispatchEvent("blur")});var x=new createjs.DOMElement(w);x.alpha=0,this.resize=function(){setTimeout(function(){var o=v.localToGlobal(r,r);x.x=t.x+o.x*t.scale,x.y=t.y+o.y*t.scale,e.scale(x,t.scale*v.scaleX,t.scale*v.scaleY),x.alpha=1,v.getStage()&&b.update()},50)},this.resize(),v.on("added",function(){b.addChild(x),w.style.display="block",v.resize()}),v.on("removed",function(){b.removeChild(x),w.style.display="none"}),t.on("resize",v.resize),Object.defineProperty(this,"currentValue",{get:function(){return w.value},set:function(e){w.value=e}}),Object.defineProperty(this,"text",{get:function(){return w.value},set:function(e){w.value=e}}),Object.defineProperty(this,"readOnly",{get:function(){return w.readOnly},set:function(e){w.readOnly=e}}),this.clone=function(){var z=new e.Loader(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m);return v.cloneProps(z)},this.dispose=function(){return v.removeAllEventListeners(),v.removeChild(x),document.body.removeChild(w),!0}}},e.extend(e.TextArea,e.Container,["clone","dispose"],"zimContainer",!1),e.drag=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p){function m(){C=0,S=0,t.zimDragRect&&(s?(k=e.boundsToGlobal(t.parent,t.zimDragRect),d&&(j=t.zimDragRect)):(k=t.zimDragRect,d&&(j=e.boundsToGlobal(t.parent,t.zimDragRect,!0)))),k&&p&&(T=t.parent.localToGlobal(t.x,t.y),v(t,T.x,T.y)),c&&(t.zimDragMoving=!0,y())}function z(){t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)}function v(o,n,i){if(zot(o)&&(o=F||t),o.parent&&o.getStage()){if(zot(n)||zot(i)){var r=o.parent.localToGlobal(o.x,o.y);C=S=0,t.zimDragRect&&(s?(k=e.boundsToGlobal(o.parent,t.zimDragRect),d&&(j=o.zimDragRect)):(k=t.zimDragRect,d&&(j=e.boundsToGlobal(o.parent,t.zimDragRect,!0)))),n=r.x,i=r.y,c&&(L=o.x,X=o.y,F=o,P.immediate(L),E.immediate(X))}var a,l=o.parent.globalToLocal(n,i);c&&h?"vertical"==h?(a=b(o,l.x-C,l.y-S),o.x=a.x,o.y=l.y-S):"horizontal"==h?(a=b(o,l.x-C,l.y-S),o.x=l.x-C,o.y=a.y):(o.x=l.x-C,o.y=l.y-S):(a=b(o,l.x-C,l.y-S),o.x=a.x,o.y=a.y),o.zimMask&&(o.zimMask.x=o.x,o.zimMask.y=o.y)}}function b(e,t,o){if(k)if(d){var n=e.getBounds().width,i=e.getBounds().height,r=e.getBounds().x,a=e.getBounds().y;n<j.width?t=j.x+(j.width-n)/2+(e.regX-r):(t-(e.regX-r)>j.x&&(t=j.x+(e.regX-r)),t-(e.regX-r)+n<j.x+j.width&&(t=j.x+j.width+(e.regX-r)-n)),e.height<j.height?o=j.y+(j.height-i)/2+(e.regY-a):(o-(e.regY-a)>j.y&&(o=j.y+(e.regY-a)),o-(e.regY-a)+i<j.y+j.height&&(o=j.y+j.height+(e.regY-a)-i))}else{var s=e.parent.localToGlobal(t,o);t=Math.max(k.x,Math.min(k.x+k.width,s.x)),o=Math.max(k.y,Math.min(k.y+k.height,s.y)),t=(s=e.parent.globalToLocal(t,o)).x,o=s.y}return{x:t,y:o}}function y(){function o(e,o,n,i,r){Math.abs(e.x-W)<.1&&Math.abs(e.y-N)<.1?(t.zimDragMoving=!1,e.x=i,e.y=r,e.dispatchEvent("slidestop")):(W=o,N=n)}var n=t.getStage();t.zimDragTicker=function(){if(F||(F=t),M){var e=F.parent.globalToLocal(n.mouseX,n.mouseY);O++,A.push(e.x),I.push(e.y),O>=B?(Y=A.shift(),R=I.shift()):(Y=A[0],R=I[0])}else{if(!t.zimDragMoving)return;var i=L+D-Y,r=X+_-R;if(k&&(i=(a=b(F,i,r)).x,r=a.y),h)F.x=P.convert(i),F.y=E.convert(r),o(F,F.x,F.y,i,r);else{var a=b(F,P.convert(i),E.convert(r));F.x=a.x,F.y=a.y,o(F,F.x,F.y,F.x,F.y)}}},e.Ticker.add(t.zimDragTicker,n)}var w;if(w=zob(e.drag,arguments,"obj, rect, overCursor, dragCursor, currentTarget, swipe, localBounds, onTop, surround, slide, slideDamp, slideSnap, reg, removeTweens, startBounds"))return w;if(z_d("31"),!zot(t)&&t.on){t.cursor=zot(n)?"pointer":n,zot(r)&&(r=!1),zot(a)&&(a=!1),zot(s)&&(s=!1),zot(l)&&(l=!0),zot(d)&&(d=!1),zot(c)&&(c=!1),zot(u)&&(u=.3),zot(h)&&(h=!0);var x=["horizontal","vertical","auto"];!0!==h&&x.indexOf(h)<0&&(h=!1),zot(f)&&(f=!1),zot(g)&&(g=!0),zot(p)&&(p=!0),e.setSwipe(t,a),t.zimDragRect=o,t.zimLocalBounds=s;var C,S,T,k,j,M=!1;if(t.zimAdded=t.on("added",m,null,!0),t.zimRemoved=t.on("removed",z,null,!0),t.parent&&m(),c)var P=new e.Damp(t.x,u),E=new e.Damp(t.y,u),B=3,O=0,A=[],I=[],D=t.x,_=t.y,L=t.x,X=t.y,Y=t.x,R=t.y,W=-1e4,N=-1e4;var F;return t.zimDown=t.on("mousedown",function(o){if(F=r?o.currentTarget:o.target,!t.zimDragRect||F.getBounds()){M=!0,t.getStage().mouseMoveOutside=!0,c||(t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker),t.zimDragTicker=e.Ticker.add(function(){},t.getStage())),g&&createjs.Tween.removeTweens(F),l&&F.parent.setChildIndex(F,F.parent.numChildren-1);var n=F.parent.globalToLocal(o.stageX,o.stageY);f&&(F.x=n.x,F.y=n.y),C=n.x-F.x,S=n.y-F.y,t.zimDragRect&&(s?(k=e.boundsToGlobal(F.parent,t.zimDragRect),d&&(j=t.zimDragRect)):(k=t.zimDragRect,d&&(j=e.boundsToGlobal(F.parent,t.zimDragRect,!0)))),t.cursor=zot(i)?"pointer":i,c&&(O=0,A=[n.x],I=[n.y],W=-1e4,N=-1e4,t.zimDragMoving=!0)}else zog("zim.drag() - drag object needs bounds set")},!0),t.zimMove=t.on("pressmove",function(e){M&&v(F,e.stageX,e.stageY)},!0),t.zimPosition=v,t.zimUp=t.on("pressup",function(o){if(M)if(t.cursor=zot(n)?"pointer":n,c){var i=F.parent.globalToLocal(o.stageX,o.stageY);M=!1,D=i.x,_=i.y,L=F.x,X=F.y,P.immediate(F.x),E.immediate(F.y)}else t.zimDragTicker&&e.Ticker.remove(t.zimDragTicker)},!0),t}},e.noDrag=function(t){if(z_d("32"),!zot(t)&&t.on)return t.cursor="default",e.setSwipe(t,!0),t.off("added",t.zimAdded),t.off("removed",t.zimRemoved),t.off("mousedown",t.zimDown),t.off("pressmove",t.zimMove),t.off("pressup",t.zimUp),e.Ticker&&t.zimDragSlide&&e.Ticker.remove(t.zimDragSlide),t.zimDragMoving=t.zimAdded=t.zimRemoved=t.zimDown=t.zimMove=t.zimUp=t.zimDragRect=t.zimDragSlide=null,t},e.dragRect=function(e,t){if(z_d("33"),!zot(e)&&e.on&&!zot(t))return e.zimDragRect=t,e.zimDragMoving=!0,e.zimPosition&&e.zimPosition(),e},e.setSwipe=function(e,t){function o(t){for(var n,i=t.getNumChildren(),r=0;r<i;r++)(n=t.getChildAt(r)).zimNoSwipe=e.zimNoSwipe,n instanceof createjs.Container&&o(n)}if(z_d("34"),!zot(e)&&e.on)return e.zimNoSwipe=!t||null,e instanceof createjs.Container&&o(e),e},e.hitTestPoint=function(e,t,o){if(z_d("35"),!e.stage)return!1;if(!zot(e)&&e.globalToLocal){var n=e.globalToLocal(t,o),i=e.getBounds();if(i){if(n.x>i.x+i.width||n.x<i.x)return;if(n.y>i.y+i.height||n.y<i.y)return}return e.hitTest(n.x,n.y)}},e.hitTestReg=function(e,t){if(z_d("36"),!e.stage||!t.stage)return!1;if(!zot(e)&&!zot(t)&&e.localToLocal&&t.localToLocal){var o=t.localToLocal(t.regX,t.regY,e),n=e.getBounds();if(n){if(o.x>n.x+n.width||o.x<n.x)return;if(o.y>n.y+n.height||o.y<n.y)return}return e.hitTest(o.x,o.y)}},e.hitTestRect=function(t,o,n){if(z_d("37"),!t.stage||!o.stage)return!1;if(!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds){zot(n)&&(n=0);var i=o.getBounds();if(i){if(!t.getBounds()||e.hitTestBounds(t,o)){var r=i.x+i.width/2,a=i.y+i.height/2,s=o.localToLocal(r,a,t);if(t.hitTest(s.x,s.y))return!0;for(var l,d,c=0;c<=n;c++){if(l=i.width*(c+1)/(n+1),d=i.height*(c+1)/(n+1),s=o.localToLocal(i.x+l,i.y,t),t.hitTest(s.x,s.y))return!0;if(s=o.localToLocal(i.x+i.width,i.y+d,t),t.hitTest(s.x,s.y))return!0;if(s=o.localToLocal(i.x+i.width-l,i.y+i.height,t),t.hitTest(s.x,s.y))return!0;if(s=o.localToLocal(i.x,i.y+i.height-d,t),t.hitTest(s.x,s.y))return!0}}}else zog("zim create - hitTestRect():\n please setBounds() on param b object")}},e.hitTestCircle=function(t,o,n){if(z_d("38"),!t.stage||!o.stage)return!1;if(!zot(t)&&!zot(o)&&t.hitTest&&o.getBounds){zot(n)&&(n=8);var i=o.getBounds();if(i){if(!t.getBounds()||e.hitTestBounds(t,o)){var r=i.x+i.width/2,a=i.y+i.height/2,s=o.localToLocal(r,a,t);if(t.hitTest(s.x,s.y))return!0;for(var l,d,c,u=(i.width+i.height)/2/2,h=0;h<n;h++)if(l=h/n*2*Math.PI,d=r+u*Math.cos(l),c=a+u*Math.sin(l),s=o.localToLocal(d,c,t),t.hitTest(s.x,s.y))return!0}}else zog("zim create - hitTestCircle():\n please setBounds() on param b object")}},e.hitTestBounds=function(t,o,n){if(z_d("39"),!t.stage||!o.stage)return!1;if(!zot(t)&&!zot(o)&&t.getBounds&&o.getBounds){var i=!1;n&&n.graphics&&(i=!0);var r=t.getBounds(),a=o.getBounds();if(r&&a){var s=e.boundsToGlobal(t),l=e.boundsToGlobal(o);if(i){var d=n.graphics;d.c(),d.ss(1).s("blue"),d.r(s.x,s.y,s.width,s.height),d.s("green"),d.r(l.x,l.y,l.width,l.height),n.getStage().update()}return function(e,t){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)}(s,l)}zog("zim create - hitTestBounds():\n please setBounds() on both objects")}},e.boundsToGlobal=function(e,t,o){if(z_d("40"),!zot(e)&&e.getBounds){zot(o)&&(o=!1);var n=e.getBounds();if(n||!zot(t)){if(t&&(n=t),o)var i=e.globalToLocal(n.x,n.y),r=e.globalToLocal(n.x+n.width,n.y),a=e.globalToLocal(n.x+n.width,n.y+n.height),s=e.globalToLocal(n.x,n.y+n.height);else var i=e.localToGlobal(n.x,n.y),r=e.localToGlobal(n.x+n.width,n.y),a=e.localToGlobal(n.x+n.width,n.y+n.height),s=e.localToGlobal(n.x,n.y+n.height);var l=Math.min(i.x,r.x,a.x,s.x),d=Math.min(i.y,r.y,a.y,s.y),c=Math.max(i.x,r.x,a.x,s.x),u=Math.max(i.y,r.y,a.y,s.y);return new createjs.Rectangle(l,d,c-l,u-d)}zog("zim create - boundsToGlobal():\n please setBounds() on object (or a rectangle)")}},e.hitTestGrid=function(e,t,o,n,i,r,a,s,l,d,c,u,h){if(z_d("41"),!e.stage)return!1;if(!zot(e)&&!u){var f=e.globalToLocal(r,a);r=f.x,a=f.y}zot(s)&&(s=0),zot(l)&&(l=0),zot(d)&&(d=0),zot(c)&&(c=0);var g=t/n,p=o/i,m=Math.min(n-1,Math.max(0,Math.floor((r-s)/g))),z=Math.min(i-1,Math.max(0,Math.floor((a-l)/p)));if(!(r-s>g*(m+1)-d||r-s<g*m||a-l>p*(z+1)-c||a-l<p*z)){var v=z*n+m;return zot(h)||"index"==h?v:"col"==h?m:"row"==h?z:"array"==h?[v,m,z]:void 0}},e.move=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S,T,k,j,M,P,E,B,O,A,I){var D;if(D=zob(e.move,arguments,"target, x, y, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, protect, override, from, set, id"))return D;if(z_d("44"),!zot(o)||!zot(n)){var _={x:zik(o),y:zik(n)};return zot(o)?_={y:zik(n)}:zot(n)&&(_={x:zik(o)}),e.animate(t,_,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S,T,k,j,M,P,null,E,B,O,A,I)}},e.animate=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S,T,k,j,M,P,E,B,O,A,I){function D(){for(var t,n,i=s,r=0,a=0;a<o.length;a++)if(t=o[a],!zot(t.target)){zot(t.time)&&(t.time=ie),i+=t.wait?t.wait:0,n=t.time,t.rewind&&(n=2*n+(t.rewindWait?t.rewindWait:0)),t.loop&&(n*=t.loopCount,n+=(t.loopCount-1)*(t.loopWait?t.loopWait:0));var l={target:t.target,obj:e.copy(t.obj),wait:r+i,waitedCall:t.waitedCall,waitedParams:t.waitedParams,time:t.time,ease:t.ease,from:t.from,rewind:t.rewind,call:t.call,params:t.params,loop:t.loop,loopCount:t.loopCount,loopWait:t.loopWait,loopCall:t.loopCall,loopParams:t.loopParams,loopWaitCall:t.loopWaitCall,loopWaitParams:t.loopWaitParams,rewind:t.rewind,rewindWait:t.rewindWait,rewindCall:t.rewindCall,rewindParams:t.rewindParams,rewindWaitCall:t.rewindWaitCall,rewindWaitParams:t.rewindWaitParams,set:t.set,override:!1,id:I};a==o.length-1&&_(l),e.animate(l),r+=i+n,i=0}}function _(e){M.loop&&(!M.count||de<M.count)?e.call=function(){function e(){for(var e=0;e<le.objects.length;e++)le.objects[e].set&&le.objects[e].set(le.values[e]);M.loopWaitCall&&"function"==typeof M.loopWaitCall&&M.loopWaitCall(M.loopWaitParams),D()}M.loopCall&&"function"==typeof M.loopCall&&M.loopCall(M.loopParams),M.loopWait?re=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,{override:M.override}).wait(M.loopWait).call(e):e()}:e.call=function(){r&&"function"==typeof r&&r(a),q(I)},de++}function L(){zot(I)?I=e.makeID(10):(I=String(I),se=I),zot(t.zimIdSets)&&(t.zimIdSets={}),zot(t.zimIdSets[I])?zot(t.zimTweens[I])||(ae=I,I=e.makeID(10),t.zimIdSets[ae]=[ae],t.zimTweens[ae].zimIdSet=ae,t.zimIdSets[ae].push(I)):(ae=I,I=e.makeID(10),t.zimIdSets[ae].push(I))}function X(e,t,o,n){var i={};for(oe in t)o&&!zot(o[oe])?i[oe]=o[oe]:i[oe]=e[oe],n&&(e[oe]=t[oe]);return i}function Y(){fe&&"function"==typeof fe&&fe(ge)}function R(){pe&&"function"==typeof pe&&pe(me)}function W(){be&&"function"==typeof be&&be(ye)}function N(){we&&"function"==typeof we&&we(xe)}function F(){var e=H();t.set&&!O&&t.set(A),re=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,M).to(o,ie,createjs.Ease[i]).call(N).wait(ve).call(W).to(e,ie,createjs.Ease[ze]).call(Z).wait(he).call(Y),V()}function G(){t.set&&!O&&t.set(A),re=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,M).to(o,ie,createjs.Ease[i]).call(Z).wait(he).call(Y),V()}function Z(){if(M.loop){if(!(ue>0))return void R();if(de<ue)return R(),void de++;z?t.set&&t.set(H()):t.set&&t.set(o)}q(I),r&&"function"==typeof r&&r(a)}function H(){var e={};for(var n in o)P?zot(A[n])||O?e[n]=t.style[n]:e[n]=A[n]:zot(A[n])||O?e[n]=t[n]:e[n]=A[n];return e}function U(o){if(t.zimBusy){for(var n in o)delete t.zimBusy[n];e.isEmpty(t.zimBusy)&&(t.zimBusy=null)}}function V(){re.zimObj=o,re.zimTicker=Ce,re.zimPaused=Se,ae&&(re.zimIdSet=ae),se&&(zot(e.idSets)&&(e.idSets={}),zot(e.idSets[se])?e.idSets[se]=[t]:e.idSets[se].indexOf(t)<0&&e.idSets[se].push(t)),e.animatedObjects||(e.animatedObjects=new e.Dictionary(!0)),e.animatedObjects.add(t,!0)}function q(o){if(!zot(t.zimTweens)&&!zot(t.zimTweens[o])){U(t.zimTweens[o].zimObj),t.zimTweens[o].setPaused(!0),K(o);var n=t.zimTweens[o].zimIdSet;if(!zot(n)&&t.zimIdSets){var i=t.zimIdSets[n];i&&i.splice(i.indexOf(o),1),i&&0==i.length&&(delete t.zimIdSets[n],e.isEmpty(t.zimIdSets)&&delete t.zimIdSets)}if(delete t.zimTweens[o],e.isEmpty(t.zimTweens)&&t.stopZimAnimate(),t.zimTweens&&t.zimTweens[o]||t.zimIdSets&&t.zimIdSets[n||o]);else if(e.idSets&&e.idSets[n||o]){e.idSets[n||o];var r=e.idSets[n||o].indexOf(t);r>=0&&e.idSets[n||o].splice(r,1),e.idSets[n||o].length<=0&&(delete e.idSets[n||o],e.isEmpty(e.idSets)&&delete e.idSets)}}}function K(o){-function(){var n=t.zimTweens[o].zimTicker;setTimeout(function(){n&&e.Ticker.remove(n),n=null},200)}()}function Q(o,n){var i=t.zimTweens[o];i.setPaused(n),n!=i.zimPaused&&(i.zimPaused=n,n?i.zimTicker&&(i.zimAnimateTimeout=setTimeout(function(){e.Ticker.remove(i.zimTicker)},200)):(clearTimeout(i.zimAnimateTimeout),i.zimTicker&&e.Ticker.add(i.zimTicker,t.getStage())))}function J(e){for(var o=[],n=0;n<e.length;n++)t.zimIdSets&&!zot(t.zimIdSets[e[n]])?o=o.concat(t.zimIdSets[e[n]]):o.push(e[n]);return o}var $;if($=zob(e.animate,arguments,"target, obj, time, ease, call, params, wait, waitedCall, waitedParams, loop, loopCount, loopWait, loopCall, loopParams, loopWaitCall, loopWaitParams, rewind, rewindWait, rewindCall, rewindParams, rewindWaitCall, rewindWaitParams, sequence, sequenceCall, sequenceParams, sequenceReverse, ticker, props, css, protect, override, from, set, id"))return $;if(z_d("45"),0!=e.ANIMATE){t=zik(t),n=zik(n),i=zik(i),s=zik(s),u=zik(u),h=zik(h),z=zik(z),v=zik(v),k=zik(k),O=zik(O),A=zik(A);var ee={override:!0};if(zot(c)||(ee.loop=c),zot(u)||(ee.count=u),zot(h)||(ee.loopWait=h),zot(f)||(ee.loopCall=f),zot(m)||(ee.loopWaitParams=m),zot(p)||(ee.loopWaitCall=p),zot(g)||(ee.loopParams=g),zot(z)||(ee.rewind=z),zot(v)||(ee.rewindWait=v),zot(b)||(ee.rewindCall=b),zot(y)||(ee.rewindParams=y),zot(w)||(ee.rewindWaitCall=w),zot(x)||(ee.rewindWaitParams=x),zot(M)||(ee=e.merge(ee,M)),M=ee,zot(C)&&(C=0),C>0&&t.addChild){for(var te=[],oe=0;oe<t.numChildren;oe++)te.push(t.getChildAt(oe));t=te}if(t instanceof Array){k&&t.reverse();for(var ne=0,oe=0;oe<t.length;oe++)-function(){var l=oe;if(O){var d;t[oe].zimObj={};for(var c in o)d=o[c],t[oe].zimObj[c]=t[oe][c],t[oe][c]=d}else t[oe].zimObj=o;setTimeout(function(){var o=t[ne];if(ne++,e.animate(o,o.zimObj,n,i,r,a,s,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,j,e.copy(M),P,E,B,null,A,I),l==t.length-1&&S){var d=n||1e3;M&&M.rewind&&(d+=(n||1e3)+(M.rewindWait?M.rewindWait:0)),M&&M.loop&&M.loopWait&&(d+=M.loopWait),setTimeout(function(){S(T)},d)}},C*oe)}()}else{var ie=n;zot(ie)&&(ie=1e3),zot(i)&&(i="quadInOut"),zot(s)&&(s=0),zot(M)&&(M={override:!0}),zot(a)&&(a=t),zot(j)&&(j=!0),zot(P)&&(P=!1),zot(E)&&(E=!1),zot(O)&&(O=!1),zot(A)&&(A={}),A.scale&&(A.scaleX=A.scaleY=A.scale,delete A.scale),zot(B)||(M.override=B);var re,ae,se;if(o instanceof Array){var le,de=1;return 0==o.length?this:(function(){var n=new e.Dictionary;le=new e.Dictionary;for(var r=0;r<o.length;r++)if(ce=o[r],t||(t=ce.target),zot(ce.target)&&(ce.target=t),zot(ce.ease)&&(ce.ease=i),!zot(ce.target)){if(ce.loop&&(zot(ce.loopCount)||ce.loopCount<=0)&&(ce.loopCount=0,o.splice(r+1,o.length)),zot(ce.obj.scale)||(ce.obj.scaleX=ce.obj.scaleY=ce.obj.scale,delete ce.obj.scale),ce.from){var a=n.at(ce.target);if(a){if(ce.set){var s=e.copy(ce.obj),l=e.merge(a,ce.set);ce.obj=X(ce.target,ce.obj,l),ce.set=e.merge(ce.set,s)}else ce.set=e.copy(ce.obj),ce.obj=X(ce.target,ce.obj,a);ce.from=!1}else n.add(ce.target,X(ce.target,ce.obj,ce.set))}var d={};for(var c in ce.obj)d[c]=ce.set&&ce.set[c]?ce.set[c]:ce.target[c];zot(le.at(ce.target))&&le.add(ce.target,{});var u=e.merge(le.at(ce.target),d);le.remove(ce.target),le.add(ce.target,u)}zot(t.zimTweens)&&(t.zimTweens={})}(),L(),D(),t)}if(!zot(t))if(P&&(j=!1),zot(t.zimTweens)&&(t.zimTweens={}),j&&(zot(t.getStage)||zot(t.getStage())))zon&&zog("zim.move(), zim.animate() - please add target to stage before animating");else{zot(o.scale)||(o.scaleX=o.scaleY=zik(o.scale),delete o.scale);for(var ce in o){if(!t.zimBusy)break;t.zimBusy[ce]&&delete o[ce]}if(!e.isEmpty(o)){(E||M.loop||M.rewind)&&function(){t.mouseEnabled=!1,setTimeout(function(){t.zimBusy||(t.zimBusy={});for(var e in o)t.zimBusy[e]=!0;t.mouseEnabled=!0},70)}(),L();for(var oe in o)o[oe]=zik(o[oe]);for(oe in A)A[oe]=zik(A[oe]);for(oe in M)"waitedCall"!=oe&&"waitedParams"!=oe&&"loopCall"!=oe&&"rewindCall"!=oe&&"loopWaitCall"!=oe&&"rewindWaitCall"!=oe&&(M[oe]=zik(M[oe]));for(oe in o)"string"==typeof o[oe]&&(o[oe]=t[oe]+Number(o[oe].replace(/\s/g,"")));for(oe in A)"string"==typeof A[oe]&&(A[oe]=t[oe]+Number(A[oe].replace(/\s/g,"")));O&&(o=X(t,o,A,!0));var ue=0;if(M.loop&&!zot(M.count)){ue=M.count,delete M.count;de=1}var he=0;M.loopWait&&(he=M.loopWait,delete M.loopWait);var fe;M.loopCall&&(fe=M.loopCall,delete M.loopCall);var ge=t;M.loopParams&&(ge=M.loopParams,delete M.loopParams);var pe;M.loopWaitCall&&(pe=M.loopWaitCall,delete M.loopWaitCall);var me=t;if(M.loopWaitParams&&(me=M.loopWaitParams,delete M.loopWaitParams),M.rewind){if(i){var ze=i;-1==ze.indexOf("InOut")&&(-1!=ze.indexOf("Out")?ze=ze.replace("Out","In"):-1!=ze.indexOf("In")&&(ze=ze.replace("In","Out")))}var ve=0;delete M.rewind,M.rewindWait&&(ve=M.rewindWait,delete M.rewindWait);var be;if(M.rewindCall){be=M.rewindCall;var ye=M.rewindParams;zot(ye)&&(ye=t),delete M.rewindCall,delete M.rewindParams}var we;if(M.rewindWaitCall){we=M.rewindWaitCall;var xe=M.rewindWaitParams;zot(xe)&&(xe=t),delete M.rewindWaitCall,delete M.rewindWaitParams}s>0?re=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,{override:M.override}).wait(s).call(function(){l&&"function"==typeof l&&l(zot(d)?t:d),F()}):F()}else s>0?re=t.zimTweens[I]=t.zimTween=createjs.Tween.get(t,{override:M.override}).wait(s).call(function(){l&&"function"==typeof l&&l(zot(d)?t:d),G()}):G();var Ce;!P&&j&&(Ce=t.zimMask?e.Ticker.add(function(){e.copyMatrix(t.zimMask,t),t.zimMask.regX=t.regX,t.zimMask.regY=t.regY},t.getStage()):e.Ticker.add(function(){},t.getStage()));var Se=!1;return V(),t.stopZimAnimate&&t.stopZimAnimate.real||(t.stopZimAnimate=function(o,n){if(zot(n)&&(n=!0),zot(o)){if(!n)return;t.zimBusy=null,createjs.Tween.removeTweens(t);for(var i in t.zimTweens)K(i);t.zimTweens=null,t.zimIdSets=null,e.idSets&&e.idSets[ae||i]&&(delete e.idSets[ae||i],e.isEmpty(e.idSets)&&delete e.idSets),e.animatedObjects.remove(t)}else{Array.isArray(o)||(o=[o]);var r=J(o);for(var i in t.zimTweens)n&&r.indexOf(i)>=0&&q(i),!n&&r.indexOf(i)<0&&q(i)}return t},t.stopZimAnimate.real=!0,t.pauseZimAnimate=function(e,o,n){if(zot(e)&&(e=!0),zot(n)&&(n=!0),!zot(o)||n){if(zot(o))for(var i in t.zimTweens)Q(i,e);else{Array.isArray(o)||(o=[o]);var r=J(o);for(var i in t.zimTweens)n&&r.indexOf(i)>=0&&Q(i,e),!n&&r.indexOf(i)<0&&Q(i,e)}return t}}),t}}}}},e.stopZimAnimate=function(t){if(z_d("45.1"),zot(t)){if(e.animatedObjects)for(i=e.animatedObjects.length-1;i>=0;i--)e.animatedObjects.objects[i].stopZimAnimate()}else if(Array.isArray(t)||(t=[t]),e.idSets)for(var o=0;o<t.length;o++){var n=t[o];if(e.idSets[n])for(var i=e.idSets[n].length-1;i>=0;i--)e.idSets[n][i].stopZimAnimate(n)}},e.pauseZimAnimate=function(t,o){if(z_d("45.2"),zot(t)&&(t=!0),zot(o)){if(e.animatedObjects)for(r=e.animatedObjects.length-1;r>=0;r--)e.animatedObjects.objects[r].pauseZimAnimate(t)}else if(Array.isArray(o)||(o=[o]),e.idSets)for(var n=0;n<o.length;n++){var i=o[n];if(e.idSets[i])for(var r=e.idSets[i].length-1;r>=0;r--)e.idSets[i][r].pauseZimAnimate(t,i)}},e.wiggle=function(t,o,n,i,r,a,s,l,d,c,u){function h(){var f=e.rand(a,s),m={},z={};if(z[o]=n,"negative"==l)v=-e.rand(i,r,c);else if("positive"==l)v=e.rand(i,r,c);else if(0==p)v=e.rand(i,r,c,!0);else var v=e.rand(i,r,c)*e.sign(g)*-1;m[o]=n+v,0==p&&(f/=2),g=v,p++,"negative"==l||"positive"==l?e.animate({target:t,obj:m,set:z,ease:d,time:2*f,rewind:!0,override:!1,call:h,id:u,ticker:!!t.getStage}):e.animate({target:t,obj:m,ease:d,time:f,override:!1,call:h,id:u,ticker:!!t.getStage})}var f;if(f=zob(e.wiggle,arguments,"target, property, baseAmount, minAmount, maxAmount, minTime, maxTime, type, ease, integer, id"))return f;if(z_d("45.25"),zot(t)||zot(n)||zot(i))return t;zot(r)&&(r=i),zot(a)&&(a=1e3),zot(s)&&(s=a),zot(d)&&(d="quadInOut"),zot(c)&&(c=!1),zot(u)&&(u=e.makeID()),zot(l)&&(l="both");var g,p=0;return h(),t},e.loop=function(t,o,n,i,r,a){function s(e){return zot(r)&&(r=n?e:0),zot(a)&&(a=n?0:e),n&&a>r||!n&&r>a?0:(r<0&&a)<0||r>e&&a>e?0:(r=Math.max(0,Math.min(r,e)),a=Math.max(0,Math.min(a,e)),Math.floor((n?r-a:a-r)/i)+1)}var l;if(l=zob(e.loop,arguments,"obj, call, reverse, step, start, end"))return l;if(z_d("45.3"),!zot(t)&&!zot(o)){zot(n)&&(n=!1),(zot(i)||i<=0)&&(i=1);var d="number"==typeof t?"number":t.constructor===Array?"array":t.constructor==={}.constructor?"object":"container";if("container"!=d||t.addChild)if("number"==d||"array"==d){if(0==(g=s((u="number"==d?t:t.length)-1)))return;if(n)for(f=r;f>=a;f-=i){if("number"==d)c=o(f,g,r,a,t);else c=o(t[f],f,g,r,a,t);if(void 0!==c)return c}else for(f=r;f<=a;f+=i){if("number"==d)c=o(f,g,r,a,t);else var c=o(t[f],f,g,r,a,t);if(void 0!==c)return c}}else if("object"==d){var u=0,h=[];for(var f in t)u++,h.push(f);if(0==(g=s(u-1)))return;if(n){for(f=r;f>=a;f-=i)if(void 0!==(c=o(h[f],t[h[f]],f,g,r,a,t)))return c}else for(f=r;f<=a;f+=i)if(void 0!==(c=o(h[f],t[h[f]],f,g,r,a,t)))return c}else{var g=s(t.numChildren-1);if(0==g)return;if(n){for(f=r;f>=a;f-=i)if(void 0!==(c=o(t.getChildAt(f),f,g,r,a,t)))return c}else for(f=r;f<=a;f+=i)if(void 0!==(c=o(t.getChildAt(f),f,g,r,a,t)))return c}}},e.copyMatrix=function(e,t){return z_d("45.5"),e.x=t.x,e.y=t.y,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.regX=t.regX,e.regY=t.regY,e.rotation=t.rotation,e.skewX=t.skewX,e.skewY=t.skewY,e},e.pos=function(e,t,o){if(z_d("41.5"),!zot(e))return zot(t)||(e.x=t),zot(o)||(e.y=o),e},e.mov=function(e,t,o){if(z_d("41.6"),!zot(e))return zot(t)||(e.x+=t),zot(o)||(e.y+=o),e},e.alp=function(e,t){if(z_d("41.7"),!zot(e))return zot(t)||(e.alpha=t),e},e.rot=function(e,t){if(z_d("41.8"),!zot(e))return zot(t)||(e.rotation=t),e},e.siz=function(e,t,o,n){if(z_d("41.85"),!zot(e))return zot(n)&&(n=!1),zot(t)||zot(o)?zot(t)?zot(o)||(n?e.heightOnly=o:e.height=o):n?e.widthOnly=t:e.width=t:(e.widthOnly=t,e.heightOnly=o),e},e.ske=function(e,t,o){if(z_d("41.9"),!zot(e))return zot(t)||(e.skewX=t),zot(o)||(e.skewY=o),e},e.reg=function(e,t,o){if(z_d("41.95"),!zot(e))return zot(t)||(e.regX=t),zot(o)||(e.regY=o),e},e.sca=function(e,t,o){if(z_d("41.97"),!zot(e)&&!zot(e.scaleX))return zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e},e.scale=function(e,t,o){if(z_d("42"),!zot(e)&&!zot(e.scaleX))return zot(t)&&(t=e.scaleX),zot(o)&&(o=t),e.scaleX=t,e.scaleY=o,e},e.scaleTo=function(t,o,n,i,r,a){var s;if(s=zob(e.scaleTo,arguments,"obj, boundObj, percentX, percentY, type, boundsOnly"))return s;if(z_d("43"),!zot(t)&&t.getBounds&&t.getBounds()){if(!zot(o)&&o.getBounds&&o.getBounds()){zot(n)&&(n=-1),zot(i)&&(i=-1),-1==n&&-1==i&&(n=i=100),zot(r)&&(r="smallest"),zot(a)&&(a=!1);var l=o.getBounds().width*n/100*(a?1:o.scaleX),d=o.getBounds().height*i/100*(a?1:o.scaleY);if((-1==n||-1==i)&&"both"!=r&&"stretch"!=r)return-1==n?e.scale(t,d/t.getBounds().height):e.scale(t,l/t.getBounds().width),t;if("both"==r||"stretch"==r)return t.scaleX=-1!=n?l/t.getBounds().width:t.scaleX,t.scaleY=-1!=i?d/t.getBounds().height:t.scaleY,t;if("biggest"==r||"largest"==r||"outside"==r)c=Math.max(l/t.getBounds().width,d/t.getBounds().height);else var c=Math.min(l/t.getBounds().width,d/t.getBounds().height);return e.scale(t,c),t}zog("zim create - scaleTo(): please provide a boundObject (with setBounds) to scale to")}else zog("zim create - scaleTo(): please provide an object (with setBounds) to scale")},e.fit=function(t,o,n,i,r,a){var s;if(s=zob(e.fit,arguments,"obj, left, top, width, height, inside"))return s;if(z_d("46"),!zot(t)&&t.getBounds){if(t.getBounds()){if(zot(o)){if(!t.getStage())return void zog("zim create - fit(): please add boundary dimensions or add obj to stage first");if(!t.getStage().getBounds())return void zog("zim create - fit(): please add boundary dimensions or add obj with bounds to stage first");o=0,n=0,i=t.getStage().getBounds().width,r=t.getStage().getBounds().height}zot(a)&&(a=!0),t.scaleX=t.scaleY=1;var l,d=i,c=r,u=t.getBounds().width,h=t.getBounds().height;l=a?d/c>=u/h?c/h:d/u:d/c>=u/h?d/u:c/h,t.scaleX=t.scaleY=l;var f=u*l,g=h*l;return t.x=(t.regX-t.getBounds().x)*l+o+(d-f)/2,t.y=(t.regY-t.getBounds().y)*l+n+(c-g)/2,{x:t.x,y:t.y,width:f,height:g,scale:l,bX:o,bY:n,bWidth:i,bHeight:r}}zog("zim create - fit(): please setBounds() on object")}},e.outline=function(t,o,n){var i;if(i=zob(e.outline,arguments,"obj, color, size"))return i;if(z_d("47"),!zot(t)&&t.getBounds)if(t.getBounds()){if(t.parent){zot(o)&&(o="brown"),zot(n)&&(n=2);var r=t.getBounds(),a=new createjs.Shape,s=new createjs.Shape,l=t.parent,d=t.localToLocal(r.x,r.y,l),c=t.localToLocal(r.x+r.width,r.y,l),u=t.localToLocal(r.x+r.width,r.y+r.height,l),h=t.localToLocal(r.x,r.y+r.height,l),f=t.localToLocal(0,0,l),g=a.graphics,p=s.graphics;g.s(o).ss(n).mt(d.x,d.y).lt(c.x,c.y).lt(u.x,u.y).lt(h.x,h.y).lt(d.x,d.y);var m=10;return p.s("white").ss(n+2),p.mt(-11,0).lt(11,0),p.mt(0,-11).lt(0,11),p.s(o).ss(n),p.mt(-m,0).lt(m,0),p.mt(0,-m).lt(0,m),s.x=f.x,s.y=f.y,s.rotation=t.rotation,g.s("white").ss(n+2).dc(t.x,t.y,16),g.s(o).ss(n).dc(t.x,t.y,16),t.parent.addChild(a),t.parent.addChild(s),a.mouseEnabled=!1,s.mouseEnabled=!1,t.getStage()&&t.getStage().update(),t}zog("zim create - outline(): object should be on stage first")}else zog("zim create - outline(): please setBounds() on object");else zog("zim create - outline(): please provide object with bounds set")},e.addTo=function(e,t,o){if(z_d("47.5"),zot(e))zog("zim create - addTo(): please provide object");else{if(!zot(t))return zot(o)||isNaN(o)?t.addChild(e):t.addChildAt(e,o),e;zog("zim create - addTo(): please provide container")}},e.removeFrom=function(e,t){if(z_d("47.6"),zot(e))zog("zim create - removeFrom(): please provide object");else{if(!zot(t))return t.removeChild(e),e;zog("zim create - removeFrom(): please provide container")}},e.added=function(e,t,o,n){if(z_d("47.7"),!zot(e)&&!zot(t)&&"function"==typeof t){if(zot(o)&&(o=100),!e.getStage()){var i=Date.now(),r=setInterval(function(){n>0&&i-Date.now()>n&&clearInterval(r),e.getStage()&&(t(e.getStage(),e),clearInterval(r))},o);return r}t(e.getStage(),e)}},e.centerReg=function(t,o,n,i){var r;if(r=zob(e.centerReg,arguments,"obj, container, add, index"))return r;if(z_d("48"),!zot(t)&&t.getBounds&&t.getBounds()){var a=t.getBounds();return t.regX=a.x+a.width/2,t.regY=a.y+a.height/2,o?e.center(t,o,n,i):t}zog("zim create - centerReg(): please provide object with bounds set")},e.center=function(t,o,n,i){var r;if(r=zob(e.center,arguments,"obj, container, add, index"))return r;if(z_d("48.1"),!zot(t)&&t.getBounds){if(!zot(o)&&o.getBounds){var a=t.getBounds(),s=o.getBounds();if(zot(n)&&(n=!0),n&&o.addChild&&(zot(i)||"number"==typeof i&&isNaN(i)?o.addChild(t):o.addChildAt(t,i)),zot(s))return t;if(zot(a))return t.x=o.getBounds().width/2,t.y=o.getBounds().height/2,t;var l=t.localToLocal(t.regX,t.regY,o),d=e.boundsToGlobal(t),c=e.boundsToGlobal(o,d,!0);if(t.x=s.x+s.width/2-c.width/2+(l.x-c.x),t.y=s.y+s.height/2-c.height/2+(l.y-c.y),!n&&o.getStage&&o.getStage()&&t.parent){var u=o.localToLocal(t.x,t.y,t.parent);t.x=u.x,t.y=u.y}return t}zog("zim.center(): please provide container with bounds")}else zog("zim.center(): please provide object with bounds")},e.place=function(t,o){function n(){zog(o+".x = "+Math.round(t.x)+"; "+o+".y = "+Math.round(t.y)+";"),zog(o+".pos("+Math.round(t.x)+", "+Math.round(t.y)+");")}z_d("49"),zot(t)||(zot(o)&&(o="obj"),e.drag({obj:t,currentTarget:!0,dragCursor:"crosshair"}),zog("place "+o+" - to get new position"),t.on("click",n))},e.placeReg=function(t,o){function n(){var e=t.globalToLocal(a.x,a.y);zog(o+".regX = "+Math.round(e.x)+"; "+o+".regY = "+Math.round(e.y)+";"),zog(o+".reg("+Math.round(e.x)+", "+Math.round(e.y)+");")}if(z_d("49.5"),!zot(t)){var i=t.getStage();if(zot(i))zog("zim.placeReg() - add object to stage before calling placeReg()");else{zot(o)&&(o="obj");var r=t.parent.localToGlobal(t.x,t.y),a=new e.Shape(-25,-25,50,50).addTo(i).pos(r.x,r.y);a.graphics.s("white").mt(-25,0).lt(25,0).mt(0,-25).lt(0,20),a.compositeOperation="difference",a.expand(0),e.drag({obj:a}),zog("place cursor to get new registration point location"),i.on("stagemouseup",n)}}},e.expand=function(e,t,o){z_d("50");{if(!zot(e)&&e.getBounds){zot(t)&&(t=20),zot(o)&&(o=t);var n=e.getBounds(),i=new createjs.Shape;return i.graphics.f("0").r(n.x-t,n.y-o,n.width+2*t,n.height+2*o),e.hitArea=i,e}zog("zim create - expand(): please provide object with bounds set")}},e.setMask=function(t,o){z_d("50.1");{if(!zot(t)){var n;return o&&o.shape?(o.zimMask=n=o.shape.clone(),e.copyMatrix(n,o),n.regX=o.regX,n.regY=o.regY,n.centerReg||zimify(n),o.addChildAt(n,0),n.alpha=0):n=o,t.mask=n,n}zog("zim create - setMask(): please provide obj")}},e.ANIMATE=!0,e.OPTIMIZE=!1,e.ACTIONEVENT="mousedown",e.Ticker={stages:null,myUpdate:null,alwaysList:new e.Dictionary,list:new e.Dictionary,setFPS:function(t,o){zot(t)&&zot(o)?(t=30,o=60):zot(t)?t=30:zot(o)&&(o=t),e.Ticker.framerate=createjs.Ticker.framerate=e.mobile()?t:o},setTimingMode:function(e){createjs.Ticker.timingMode=createjs.Ticker.RAF,"synched"==e&&(createjs.Ticker.timingMode=createjs.Ticker.RAF_SYNCHED),"timeout"==e&&(createjs.Ticker.timingMode=createjs.Ticker.TIMEOUT)},add:function(t,o){z_d("30");var n=e.Ticker;if(n.framerate||n.setFPS(),!zot(o)&&o.update||(o=zimDefaultFrame.stage),!zot(t)&&"function"==typeof t)return n.ticker||(n.ticker=createjs.Ticker.on("tick",n.call)),n.list.at(o)?n.list.at(o).push(t):n.list.add(o,[t]),t;zog("zim.Ticker.add() - only add functions")},call:function(t){for(var o,n,i=e.Ticker,r=0;r<i.list.length;r++){o=i.list.objects[r],n=i.list.values[r];for(var a=0;a<n.length;a++)n[a]();i.alwaysList.at(o)?o.update():n.length>0&&(zot(i.update)&&!e.OPTIMIZE?o.update():i.update&&o.update())}for(r=0;r<i.alwaysList.length;r++)o=i.alwaysList.objects[r],null==i.list[o]&&o.update()},always:function(t){z_d("30");var o=e.Ticker;o.framerate||o.setFPS(),!zot(t)&&t.update||(t=zimDefaultFrame.stage),o.alwaysList.add(t,!0),o.ticker||(o.ticker=createjs.Ticker.on("tick",o.call))},alwaysOff:function(t){var o=e.Ticker;!zot(t)&&t.update||(t=zimDefaultFrame.stage),o.alwaysList.remove(t)},remove:function(t){var o=e.Ticker;if(zot(t)||"function"!=typeof t)zog("zim.Ticker - only remove functions");else{for(var n=0,i=0;i<o.list.length;i++){o.list.objects[i];var r=o.list.values[i].indexOf(t);r>-1&&o.list.values[i].splice(r,1),n+=o.list.values[i].length}o.alwaysList.length>0||0==n&&(createjs.Ticker.off("tick",o.ticker),o.ticker=null)}},removeAll:function(t){for(var o,n=e.Ticker,i=0,r=0;r<n.list.length;r++)o=n.list.objects[r],(zot(t)||t===o)&&(n.list.values[r]=[]),i+=n.list.values[r].length;n.alwaysList.length>0||0==i&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null)},has:function(t,o){return e.Ticker.list&&e.Ticker.list.at(t)&&e.Ticker.list.at(t).indexOf(o)>=0},dispose:function(t){for(var o,n=e.Ticker,i=0,r=n.list.length-1;r>=0;r--)o=n.list.objects[r],zot(t)||t===o?(n.list.remove(t),n.alwaysList.remove(t)):i+=n.list.values[r].length;if(!(n.alwaysList.length>0))return 0==i&&(createjs.Ticker.off("tick",n.ticker),n.ticker=null),!0}},Object.defineProperty(e.Ticker,"update",{get:function(){return e.Ticker.myUpdate},set:function(t){var o=e.Ticker;"boolean"!=typeof t&&(t=null),o.myUpdate=t,!1===o.myUpdate&&(cancelAnimationFrame(o.ticker),o.alwaysList=new e.Dictionary)}}),e.Swipe=function(t,o,n){var i;if(i=zob(e.Swipe,arguments,"obj, distance, duration",this))return i;if(z_d("70"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.on){zot(o)&&(o=30),zot(n)&&(n=80),this.distance=o,this.duration=n,this.active=!0;var r,a,s,l,d,c,u=this;t.on("mousedown",function(e){function o(){var e=new createjs.Event("swipe");e.obj=u.obj,e.swipeX=e.swipeY=0,u.direction="none",Math.abs(s-r)>Math.abs(l-a)?(s-r>u.distance&&(e.swipeX=1,u.direction="right"),r-s>u.distance&&(e.swipeX=-1,u.direction="left")):(l-a>u.distance&&(e.swipeY=1,u.direction="down"),a-l>u.distance&&(e.swipeY=-1,u.direction="up")),u.dispatchEvent(e)}u.active&&!e.target.zimNoSwipe&&(u.obj=e.target,s=r=e.stageX,l=a=e.stageY,d=!0,u.dispatchEvent("swipedown"),clearTimeout(c),c=setTimeout(function(){d&&(o(),d=!1)},u.duration),t.on("pressmove",function(e){s=e.stageX,l=e.stageY}),t.on("pressup",function(e){d&&(o(),d=!1,clearTimeout(c))}))}),this.disable=function(){u.active=!1},this.enable=function(){u.active=!0}}else zog("zim pages - Swipe():\nPlease pass in object")},e.extend(e.Swipe,createjs.EventDispatcher,"clone","cjsEventDispatcher",!1),e.Pages=function(t,o,n,i,r){function a(){(l=new createjs.Shape).graphics.f("black").r(0,0,u,h+1),(d=new createjs.Shape).graphics.f("white").r(0,0,u,h+1)}var s;if(s=zob(e.Pages,arguments,"holder, pages, transition, speed, transitionTable",this))return s;if(z_d("71"),this.zimContainer_constructor(),!zot(t)&&t.getBounds&&t.getBounds()){zot(o)&&(o=[]),zot(n)&&(n="none"),zot(i)&&(i=200),zot(r)&&(r=[]),this.transitionTable=r,this.speed=i,this.active=!0;var l,d,c=this,u=t.getBounds().width,h=t.getBounds().height,f=this.page=o[0]?o[0].page:null;"none"==n&&r==[]||a();for(var g,p,m=["left","right","up","down"],z=0;z<o.length;z++)(g=o[z]).page.zimSwipeArray=g.swipe?g.swipe:[],g.page.parent&&g.page.parent.removeChild(g.page);this.addChild(f),this.swipe=new e.Swipe(t);var v,b=!1,y=this.swipe.on("swipe",function(e){if(c.active){var t=e.currentTarget.direction;if("none"!=t){var o="";"left"==t?o="right":"right"==t?o="left":"up"==t?o="down":"down"==t&&(o="up"),t=o;var n=m.indexOf(t);p=f.zimSwipeArray[n],v=[p,t,null,null,!0],c.page=f,c.nextPage=p,c.direction=t,c.dispatchEvent("swipe"),setTimeout(function(){b||c.go(p,t,null,null,!0)},50)}}});this.addPage=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[],f?o.page.parent&&o.page.parent.removeChild(o.page):(f=c.page=o.page,c.addChild(f))},this.removePage=function(e){c.currentPage==e&&(c.removeChild(e),t.getStage()&&t.getStage().update()),e.zimSwipeArray=null},this.setSwipe=function(e,t){zot(t)&&(t=[]);var o={page:e,swipe:t};o.page.zimSwipeArray=o.swipe?o.swipe:[]},this.pause=function(){b=!0},this.unpause=function(){b&&c.go(v[0],v[1],v[2],v[3],v[4])};var w=!0;this.go=function(o,r,a,s,g){function p(e){e[0].uncache(),e[1].uncache(),c.dispatchEvent("pagetransitioned"),c.removeChild(c.lastPage),c.removeChild(l),c.removeChild(d),w=!0}function z(t){c.removeChild(c.lastPage),e.animate(t.shift(),{alpha:0},c.speed/2,null,p,t)}setTimeout(function(){b=!1},200);for(var v=[{x:u},{x:-u},{y:h},{y:-h}],y=[{x:0},{x:0},{y:0},{y:0}],x=[{x:u/2,alpha:0},{x:-u/2,alpha:0},{y:h/2,alpha:0},{y:-h/2,alpha:0}],C=n,S=i,T=0;T<c.transitionTable.length;T++)if(c.transitionTable[T][0]==f&&c.transitionTable[T][1]==o){C=c.transitionTable[T][2],S=c.transitionTable[T][3];break}if(zot(a)&&(a=C),zot(s)&&(s=S),c.speed=s,c.direction=r,""==o||null==o)c.page=f,c.dispatchEvent("nothing");else if("string"==typeof o)c.page=f,c.dispatchEvent(o);else{if(o==f)return;zot(r)&&(r="right");var k=m.indexOf(r);if(!w)return;w=!1,o.x=0,o.y=0,o.alpha=1,"slide"==a?(o.x=-(0|v[k].x),o.y=-(0|v[k].y),o.cache(0,0,(u+1)/o.scaleX,(h+1)/o.scaleY),f.cache(0,0,(u+1)/f.scaleX,(h+1)/f.scaleY),c.addChild(o),c.addChild(f),e.animate(f,v[k],c.speed,null,p,[f,o]),e.animate(o,y[k],c.speed)):"reveal"==a?(o.cache(0,0,(u+1)/o.scaleX,(h+1)/o.scaleY),f.cache(0,0,(u+1)/f.scaleX,(h+1)/f.scaleY),c.addChild(o),c.addChild(f),e.animate(f,x[k],c.speed,null,p,[f,o])):"fade"==a?(o.cache(0,0,(u+1)/o.scaleX,(h+1)/o.scaleY),f.cache(0,0,(u+1)/f.scaleX,(h+1)/f.scaleY),o.alpha=1,c.addChild(o),c.addChild(f),e.animate(f,{alpha:0},c.speed,null,p,[f,o])):"black"==a?(o.cache(0,0,(u+1)/o.scaleX,(h+1)/o.scaleY),f.cache(0,0,(u+1)/f.scaleX,(h+1)/f.scaleY),o.alpha=1,c.addChild(o),c.addChild(f),l.alpha=0,c.addChild(l),e.animate(l,{alpha:1},c.speed/2,null,z,[l,f,o])):"white"==a?(o.cache(0,0,(u+1)/o.scaleX,(h+1)/o.scaleY),f.cache(0,0,(u+1)/f.scaleX,(h+1)/f.scaleY),o.alpha=1,c.addChild(o),c.addChild(f),d.alpha=0,c.addChild(d),e.animate(d,{alpha:1},c.speed/2,null,z,[d,f,o])):(c.addChild(o),c.removeChild(f),w=!0),c.lastPage=f,c.page=o,zot(g)&&(g=!1),c.fromSwipe=g,c.dispatchEvent("page"),f=o,t.getStage()&&t.getStage().update()}},this.resize=function(){u=t.getBounds().width,h=t.getBounds().height,"none"==n&&r==[]||a()},this.puff=function(e){for(var t=0;t<o.length;t++)c.addChild(o[t].page);c.addChild(f),e>0&&setTimeout(function(){c.settle()},e)},this.settle=function(){c.removeAllChildren(),c.addChild(f),c.dispatchEvent("puffed")},this.disable=function(){c.active=!1},this.enable=function(){c.active=!0},this.dispose=function(){return c.swipe.off("swipe",y),c.removeAllChildren(),o=null,!0}}else zog("zim pages - Pages():\nobject must have bounds set")},e.extend(e.Pages,e.Container,"clone","zimContainer",!1),zot(e.ACTIONEVENT)&&(e.ACTIONEVENT="mousedown"),e.HotSpots=function(t,o,n){function i(t){var i=null;if(!Array.isArray(t.rect)){if(!(i=t.rect))return void zog("zim pages - HotSpots(): HotSpot "+t.page+" "+t.rect+" button does not exist");t.rect=[i.x,i.y,1,1]}(l=new e.HotSpot(t.page,t.rect[0],t.rect[1],t.rect[2],t.rect[3],t.call,o)).zimHSpage=t.page,l.button=i,c.push(l),l.on(d,r),i&&(l.spot.mouseEnabled=!1,l.spot.mouseChildren=!1,i.zimHScall=t.call,i.zimHSEvent=i.on(d,r,!0),n||(i.zimHSMDEvent=i.on("mousedown",function(e){e.stopImmediatePropagation()})),i.cursor="pointer")}function r(e){e.stopImmediatePropagation&&e.stopImmediatePropagation(),window.event&&(window.event.cancelBubble=!0),"function"==typeof e.currentTarget.zimHScall&&e.currentTarget.zimHScall(e)}var a;if(a=zob(e.HotSpots,arguments,"spots, local, mouseDowns",this))return a;if(z_d("72"),this.zimContainer_constructor(),!zot(t)&&Array.isArray(t)){zot(o)&&(o=!0),zot(n)&&(n=!1);for(var s,l,d="mousedown"==e.ACTIONEVENT?"mousedown":"click",c=[],u=0;u<t.length;u++)i(t[u]);this.addHotSpot=function(e,o,n){s={page:e,rect:o,call:n},t.push(s),i(s)},this.show=function(){for(var e=0;e<c.length;e++)(l=c[e]).button||l.show()},this.hide=function(){for(var e=0;e<c.length;e++)(l=c[e]).hide()},this.removeHotSpots=function(o,i){for(var a=t.length-1;a>=0;a--)s=t[a],l=c[a],i&&!Array.isArray(i)&&(i=[i.x,i.y,i.getBounds().width,i.getBounds().height]),(zot(o)&&zot(i)||zot(i)&&o==s.page||zot(o)&&e.arraysEqual(i,s.rect)||o==s.page&&e.arraysEqual(i,s.rect))&&(t.splice(a,1),l.button&&(l.button.off(d,l.button.zimHSEvent),l.button.zimHSEvent=null,n||(l.button.off("mousedown",l.button.zimHSMDEvent),l.button.zimHSMDEvent=null)),l.off(d,r),l.dispose(),c.splice(a,1))},this.dispose=function(){for(var e=0;e<c.length;e++)(l=c[e]).button&&(l.button.off(d,l.button.zimHSEvent),l.button.zimHSCall=null,l.button.zimHSEvent=null,n||(l.button.off("mousedown",l.button.zimHSMDEvent),l.button.zimHSMDEvent=null)),l.off(d,r),l.dispose();return!0}}else zog("zim pages - HotSpots():\nplease provide an array of HotSpot data")},e.extend(e.HotSpots,e.Container,"clone","zimContainer",!1),e.HotSpot=function(t,o,n,i,r,a,s){var l;if(l=zob(e.HotSpot,arguments,"obj, x, y, width, height, call, local",this))return l;if(z_d("73"),this.zimContainer_constructor(),!zot(t)&&t.addChild)if(t instanceof createjs.Container!=0)if(zot(o)||zot(n)||zot(i)||zot(r))zog("zim pages - HotSpot():\nPlease pass in x, y, width, height");else{zot(s)&&(s=!0),eventType="mousedown"==e.ACTIONEVENT?"mousedown":"click";var d=i,c=r,u=new createjs.Shape,h=new createjs.Shape;if(s)u.graphics.f("#999999").dr(o,n,d,c),h.graphics.f("#999999").dr(o,n,1,1);else{var f=t.globalToLocal(o,n),g=t.globalToLocal(o+d,n+c),p=g.x-f.x,m=g.y-f.y;u.graphics.f("#999999").dr(f.x,f.y,p,m),h.graphics.f("#999999").dr(f.x,f.y,1,1)}u.alpha=.4,u.mouseEnabled=!1,h.alpha=.01,h.cursor="pointer",this.spot=h;var z=h.on(eventType,function(e){"function"==typeof a&&a()});t.addChild(h),h.hitArea=u,this.show=function(){t.addChild(u)},this.hide=function(){t.removeChild(u)},this.dispose=function(){return h.off(eventType,z),t.removeChild(h),delete h,!0}}else zog("zim pages - HotSpot():\nObjects passed in should be Containers");else zog("zim pages - HotSpot():\nPlease pass in container object for obj")},e.extend(e.HotSpot,e.Container,"clone","zimContainer",!1),e.Manager=function(e){z_d("75");var t=this;this.items=[],this.add=function(e){t.items.push(e)},this.resize=function(){if(t)for(var e=0;e<t.items.length;e++)t.items[e].resize()||t.items.splice(e)},this.dispose=function(){zog(t.items.length);for(var e=t.items.length-1;e>=0;e--)t.items[e].dispose();return t.items=[],t=null,!0}},e.Guide=function(t,o,n,i,r){function a(t,o,n){var i=new e.Container;return i.shape=new createjs.Shape,i.shape.graphics.s(o).ss(1).f(t).r(0,0,z,v),i.shape.alpha=.9,i.addChild(i.shape),i.label=new createjs.Text("10","16px verdana",n),i.label.textAlign="center",i.label.textBaseline="middle",i.addChild(i.label),i.mouseChildren=!1,i.mouseEnabled=!1,i}function s(){"stage"==t?(w=m.getStage(),t=w):w=t.getStage(),t.addChild(m),x=t.getBounds().width,C=t.getBounds().height,o?(p.y=C/2,p.label.text="y:"+(m.pixels?Math.round(70*x/100):"70%")):(p.x=x/2,p.label.text="x:"+(m.pixels?Math.round(70*C/100):"70%")),S=new createjs.Shape,m.addChild(S),o?S.x=.7*x:S.y=.7*C,j||(t.addChild(m),d()),w.off("stagemousemove",h),h=w.on("stagemousemove",l),w.update()}function l(e){var i,r;e?(i=t.globalToLocal(e.rawX,e.rawY),M=i):i={x:M.x,y:M.y},n?o?(r=Math.round(Math.abs(i.x-S.x)/x*100),p.label.text="x:"+Math.max(0,Math.min(r,100))+"%",p.y=Math.max(y,Math.min(i.y,g))):(r=Math.round(Math.abs(i.y-S.y)/C*100),p.label.text="y:"+Math.max(0,Math.min(r,100))+"%",p.x=Math.max(b,Math.min(i.x,f))):o?(r=Math.round(Math.abs(i.x-S.x)),p.label.text="x:"+Math.max(0,Math.min(r,Math.round(x))),p.y=Math.max(y,Math.min(i.y,g))):(r=Math.round(Math.abs(i.y-S.y)),p.label.text="y:"+Math.max(0,Math.min(r,Math.round(C))),p.x=Math.max(b,Math.min(i.x,f))),w&&w.update()}function d(){j=!0,x=t.getBounds().width,C=t.getBounds().height;var n;o?(n="ew-resize",T=new createjs.Rectangle(0,0,x,0)):(n="ns-resize",T=new createjs.Rectangle(0,0,0,C)),e.noDrag(S),setTimeout(function(){e.drag(S,T,n,n,null,null,!0)},500),w.mouseMoveOutside=!0,w.enableMouseOver(10),f=x-2*z/3,g=C-v-v,S.uncache();var i=S.graphics;o?(i.c().s("rgba(0,255,255,.1)").ss(20).mt(0,0).lt(0,C),i.f().s("white").ss(2).mt(0,0).lt(0,C),i.s("#00c5af").sd([20,20]).mt(0,0).lt(0,C).sd(),S.cache(-10,0,20,C)):(i.c().s("rgba(255,0,255,.1)").ss(20).mt(0,0).lt(x,0),i.f().s("white").ss(2).mt(0,0).lt(x,0),i.s("#d61fa0").sd([20,20]).mt(0,0).lt(x,0).sd(),S.cache(0,-10,x,20)),o?p.x=x:p.y=C,m.addChild(p)}function c(e){e||(e=event),w&&(String.fromCharCode(e.keyCode)==i.toUpperCase()&&(m.visible=!m.visible,w.off("stagemousemove",h),m.visible&&(h=w.on("stagemousemove",l,m)),w.update()),String.fromCharCode(e.keyCode)==r.toUpperCase()&&(m.pixels=!m.pixels))}var u;if(u=zob(e.Guide,arguments,"obj, vertical, percent, hideKey, pixelKey",this))return u;if(z_d("76"),this.zimContainer_constructor(),zot(t)&&(t=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(o)&&(o=!0),"stage"==t||t.addChild&&t.getBounds&&t.getBounds()){zot(n)&&(n=!0),zot(i)&&(i="G"),zot(r)&&(r="P");var h,f,g,p,m=this,z=80,v=26,b=z/6+z/2,y=2*v;o?((p=a("#00c5af","white","white")).shape.regX=z+z/6,p.shape.regY=v/2,p.label.x=-z/2-z/6):((p=a("#d61fa0","white","white")).shape.regX=z/2,p.shape.regY=v+v/4,p.label.y=3*-v/4);var w;"stage"!=t&&t.addChild(m);var x,C,S,T,k=e.added(m,s),j=!1,M={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,m.resize()}}),window.addEventListener("keydown",c),this.resize=function(){return!!m&&(w&&(d(),l()),!0)},this.dispose=function(){return!!m&&(e.noDrag(S),clearInterval(k),m.removeAllChildren(),window.removeEventListener("keydown",c),m.parent&&m.parent.removeChild(m),m=null,!0)}}else zog("zim pages - Guide(): Please provide container with bounds for the obj (setBounds())")},e.extend(e.Guide,e.Container,"clone","zimContainer",!1),e.GuideManager=function(){z_d("77"),e.Manager.call(this,"GuideManager")},e.GuideManager.prototype=new e.Manager,e.GuideManager.prototype.constructor=e.GuideManager,e.Grid=function(t,o,n,i,r){function a(t,o,n){var i=new e.Container;return i.shape=new createjs.Shape,i.shape.graphics.s(o).ss(1).f(t).r(0,0,p,m),i.shape.alpha=.9,i.addChild(i.shape),i.label=new createjs.Text("10","16px verdana",n),i.label.textAlign="center",i.label.textBaseline="middle",i.addChild(i.label),i.mouseChildren=!1,i.mouseEnabled=!1,i}function s(){"stage"==t?(C=f.getStage(),t=C):C=t.getStage(),M||(d(),t.addChild(f)),C.off("stagemousemove",h),h=C.on("stagemousemove",l),C.update()}function l(e){var o;e?(o=t.globalToLocal(e.rawX,e.rawY),P=o):o={x:P.x,y:P.y},n?(z.label.text="x:"+Math.max(0,Math.min(Math.round(o.x/S*100),100))+"%",z.x=Math.max(w,Math.min(o.x,b)),v.label.text="y:"+Math.max(0,Math.min(Math.round(o.y/T*100),100))+"%",v.y=Math.max(x,Math.min(o.y,y))):(z.label.text="x:"+Math.max(0,Math.min(Math.round(o.x),Math.round(S))),z.x=Math.max(w,Math.min(o.x,b)),v.label.text="y:"+Math.max(0,Math.min(Math.round(o.y),Math.round(T))),v.y=Math.max(x,Math.min(o.y,y))),C&&C.update()}function d(){M=!0,t&&t.getBounds&&(S=t.getBounds().width,T=t.getBounds().height),C&&(C.mouseMoveOutside=!0,C.enableMouseOver(10)),b=S-2*p/3,y=T-m-m,k=new e.Container,f.addChild(k);var i=new createjs.Shape;k.addChild(i);var r=i.graphics;r.s(o).ss(1);var a=new createjs.Shape;if(k.addChild(a),n){for(s=1;s<22;s++)r.mt(s*S/20,0).lt(s*S/20,T);for(s=1;s<20;s++)r.mt(0,s*T/20).lt(S,s*T/20);i.alpha=.3,(r=a.graphics).s(o).ss(1);for(s=1;s<10;s++)r.mt(s*S/10,0).lt(s*S/10,T);for(s=1;s<10;s++)r.mt(0,s*T/10).lt(S,s*T/10)}else{for(s=0;s<S/g;s++)r.mt(s*g,0).lt(s*g,T);for(s=0;s<T/g;s++)r.mt(0,s*g).lt(S,s*g);i.alpha=.3,(r=a.graphics).s(o).ss(1);for(s=0;s<S/(10*g);s++)r.mt(s*(10*g),0).lt(s*(10*g),T);for(var s=0;s<T/(10*g);s++)r.mt(0,s*(10*g)).lt(S,s*(10*g))}r.s("#FFFFFF").ss(8),r.mt(S/2,T/2-40).lt(S/2,T/2+40),r.mt(S/2-40,T/2).lt(S/2+40,T/2),r.s("#000000").ss(4),r.mt(S/2,T/2-40).lt(S/2,T/2+40),r.mt(S/2-40,T/2).lt(S/2+40,T/2),r.s(o).ss(3),r.dr(0,0,S,T),a.alpha=.5,k.cache(0,0,S,T),f.addChild(z),f.addChild(v),C&&C.update()}function c(e){e||(e=event),C&&(String.fromCharCode(e.keyCode)==i.toUpperCase()&&(f.visible=!f.visible,C.off("stagemousemove",h),f.visible&&(h=C.on("stagemousemove",l,f)),C.update()),String.fromCharCode(e.keyCode)==r.toUpperCase()&&(f.removeChild(k),k=null,f.pixels=!f.pixels))}var u;if(u=zob(e.Grid,arguments,"obj, color, percent, hideKey, pixelKey",this))return u;if(z_d("78"),this.zimContainer_constructor(),zot(t)&&(t=zimDefaultFrame?zimDefaultFrame.stage:"stage"),zot(o)&&(o="black"),"stage"==t||t.addChild&&t.getBounds&&t.getBounds()){zot(n)&&(n=!0),zot(i)&&(i="G"),zot(r)&&(r="P");var h,f=this,g=10;this.mouseChildren=!1,this.mouseEnabled=!1;var p=80,m=26,z=a("#dddddd",o,"#333333");z.shape.regX=p/2,z.shape.regY=-m/4,z.label.y=3*m/4;var v=a("#dddddd",o,"#333333");v.shape.regX=-p/6,v.shape.regY=m/2,v.label.x=p/2+p/6;var b,y,w=p/6+p/2,x=2*m;z.x=w,v.y=x,z.label.text="x:0",v.label.text="y:0";var C;"stage"!=t&&t.addChild(f);var S,T,k,j=e.added(f,s),M=!1,P={x:0,y:0};Object.defineProperty(this,"pixels",{get:function(){return!n},set:function(e){n=!e,f.resize()}}),window.addEventListener("keydown",c),this.resize=function(){return!!f&&(f.removeChild(k),k=null,C&&(d(),l(),setTimeout(function(){f.removeChild(k),k=null,d()},200)),!0)},this.dispose=function(){return clearInterval(j),f.removeAllChildren(),window.removeEventListener("keydown",c),f.parent&&f.parent.removeChild(f),f=null,!0}}else zog("zim pages - Grid(): Please provide container with bounds for the obj (setBounds())")},e.extend(e.Grid,e.Container,"clone","zimContainer",!1),e.GridManager=function(){z_d("79"),e.Manager.call(this,"GridManager")},e.GridManager.prototype=new e.Manager,e.GridManager.prototype.constructor=e.GridManager,e.Layout=function(t,o,n,i,r,a,s,l){function d(){for(var e=0,t=0;t<o.length;t++)(p=o[t]).given=0,0==p[v]&&(e+=p.object.getBounds()[v]);for(t=0;t<o.length;t++)0==(p=o[t])[v]&&(p.given=p.object.getBounds()[v]/e*C)}function c(e){e||(e=event),a&&String.fromCharCode(e.keyCode)==l.toUpperCase()&&(a.visible=!a.visible,a.getStage()&&a.getStage().update())}var u;if(u=zob(e.Layout,arguments,"holder, regions, lastMargin, backgroundColor, vertical, regionShape, scalingObject, hideKey",this))return u;if(z_d("80"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.getBounds)if((s=zot(s)?t:s).getBounds&&s.getBounds()){var h=s.getBounds();t.setBounds(0,0,h.width,h.height),zot(n)&&(n=0),zot(r)&&(r=!0),zot(i)&&(i=""),zot(l)&&(l="B");var f=new createjs.Shape,g=this;this.active=!0,this.regions=o;var p,m=0,z="minWidth",v="width",b="height",y="marginLeft",w="maxHeight";r&&(z="minHeight",v="height",b="width",y="marginTop",w="maxWidth","y","x");for(var x=0;x<o.length;x++){if(!(p=o[x]).object||!p.object.getBounds())return void zog("zim pages - Layout(): each region object must have an object with setBounds() set");p[z]||(p[z]=0),p[v]||(p[v]=0),p.backgroundColor||(p.backgroundColor=""),p.given=0,p.maxGiven=0,p[y]||(p[y]=0),p[w]||(p[w]=100),r?(p.align||(p.align="middle"),p.valign||(0==x?p.valign="top":x==o.length-1?p.valign="bottom":p.valign="middle",1==o.length&&(p.valign="middle"))):(p.valign||(p.valign="top"),p.align||(0==x?p.align="left":x==o.length-1?p.align="right":p.align="middle",1==o.length&&(p.align="middle"))),p[v]&&(p[z]=0),m+=p[v]+p[y]}if((m+=n)>100)zog("zim pages - Layout(): cannot fit regions into 100% bounds");else{var C=100-m;d(),this.resize=function(){if(g.active){h=s.getBounds(),t.setBounds(0,0,h.width,h.height),f.graphics.clear(),""!=i&&f.graphics.f(i).r(0,0,h.width,h.height);for(P=0;P<o.length;P++)(p=o[P]).maxGiven=0,p.marginGiven=0;for(var l,c,u,x=!0,S=C;x;){c=0,x=!1,l=!0;for(P=0;P<o.length;P++)(p=o[P]).given>0&&0==p.maxGiven&&(B=p.object.getBounds()[v],(O=p.object.getBounds()[b])/B*(p.given*h[v]/100)>(u=p[w]*h[b]/100)?(p.maxGiven=B/O*u*100/h[v],c+=p.given-p.maxGiven,S-=p.maxGiven):l=!1);if(l)break;totalPrimaries=0;for(P=0;P<o.length;P++)0==(p=o[P])[v]&&0==p.maxGiven&&(totalPrimaries+=p.object.getBounds()[v]);for(P=0;P<o.length;P++)0==(p=o[P])[v]&&0==p.maxGiven&&(p.given=p.object.getBounds()[v]/totalPrimaries*S)}var T=!0;if(p=o[0],p.maxGiven>0?p.maxGiven<p[z]&&(p[v]=p[z],T=!1):p.given>0&&p.given<p[z]&&(p[v]=p[z],T=!1),p=o[o.length-1],p.maxGiven>0?p.maxGiven<p[z]&&(p[v]=p[z],T=!1):p.given>0&&p.given<p[z]&&(p[v]=p[z],T=!1),!T){m=0;for(P=0;P<o.length;P++)p=o[P],m+=p[v]+p[y];return(m+=n)>100?void zog("zim build - Layout(): cannot fit regions into 100% bounds"):(C=100-m,d(),void g.resize())}for(var k=!0,j=0,M=0,P=0;P<o.length;P++)j+=(p=o[P])[y],p[v]>0?M+=p[v]:p.maxGiven>0?M+=p.maxGiven:p.given>0&&(M+=p.given),0==p[v]&&(k=!1);if(k||l){var E=100-M-(j+=n);if(j-=n+o[0][y],0!=E&&0!=j)for(P=0;P<o.length;P++)0!=P&&((p=o[P]).marginGiven=p[y]/j*(j+E))}var B,O,A,I,D,_=0,L=0;if(a&&a.graphics){var X=a.graphics;X.c()}for(P=0;P<o.length;P++)(p=o[P]).marginGiven>0?_+=p.marginGiven*h[v]/100:_+=p[y]*h[v]/100,B=(B=p[v]>0?p[v]:p.maxGiven>0?p.maxGiven:p.given>0?p.given:0)*h[v]/100,O=p[w]*h[b]/100,L=(h[b]-O)/2,A=r?e.fit(p.object,L,_,O,B):e.fit(p.object,_,L,B,O),"top"==p.valign?p.object.y=A.bY:"bottom"==p.valign&&(p.object.y=A.bY+A.bHeight-A.height),"left"==p.align?p.object.x=A.bX:"right"==p.align&&(p.object.x=A.bX+A.bWidth-A.width),a&&a.graphics&&(X.s("white").ss(2).r(A.bX,A.bY,A.bWidth,A.bHeight),X.s("#ff8203").sd([20,20]).r(A.bX,A.bY,A.bWidth,A.bHeight).sd()),D=I=0,0!=_&&_+B!=h[v]||(r?D=1:I=1),O==h[b]&&(r?I=1:D=1),""!=p.backgroundColor&&f.graphics.f(p.backgroundColor).r(A.bX,A.bY,A.bWidth+I,A.bHeight+D),_+=B}},this.resize(),a&&t.addChild(a),t.addChildAt(f,0),window.addEventListener("keydown",c),this.disable=function(){g.active=!1,window.removeEventListener("keydown",c),a&&(a.alpha=0)},this.enable=function(){g.active=!0,window.addEventListener("keydown",c),g.resize(),a&&(a.alpha=1)},this.removeShape=function(){a&&(a.graphics.clear(),t.removeChild(a),a=null,a=!1),window.removeEventListener("keydown",c)},this.addShape=function(e,o){g.removeShape(),a=e,window.addEventListener("keydown",c),t.addChild(a),g.resize()},this.dispose=function(){return g.removeShape(),!0}}}else zog("zim pages - Layout(): holder must have bounds set or provide a scalingObject with bounds");else zog("zim pages - Layout(): please provide an object with bounds set that holds the objects being laid out")},e.extend(e.Layout,createjs.EventDispatcher,"clone","cjsEventDispatcher",!1),e.LayoutManager=function(){z_d("81");var e=this;this.items=[],this.add=function(t){e.items.push(t)},this.resize=function(){for(var t=0;t<e.items.length;t++)e.items[t].resize()},this.disable=function(){for(var t=0;t<e.items.length;t++)e.items[t].disable()},this.enable=function(){for(var t=0;t<e.items.length;t++)e.items[t].enable()},this.dispose=function(){for(var t=0;t<e.items.length;t++)e.items[t].removeShape();return!0}},e.Parallax=function(t,o,n,i){function r(e){l.step()}var a;if(a=zob(e.Parallax,arguments,"stage, damp, layers, auto",this))return a;if(z_d("68"),!zot(t)&&t.getBounds)if(t.getBounds()){zot(i)&&(i=!0);var s=t.getBounds().width,l=(t.getBounds().height,this),d=zot(o)?.1:o;this.addLayer=function(t){if(!(zot(t.obj)||zot(t.prop)||zot(t.propChange))){var o={obj:t.obj,prop:t.prop};o[o.prop]=t.propChange,zot(t.input)&&(t.input="mouseX"),o.input=t.input;var n=zot(t.inMin)?0:t.inMin,i=zot(t.inMax)?s:t.inMax,r=zot(t.factor)?1:t.factor,a=!zot(t.integer)&&t.integer;return o["p_"+o.prop]=new e.ProportionDamp(n,i,0,o[o.prop],d,r,a),"scale"==o.prop?o["s_"+o.prop]=o.obj.scaleX:"frame"==o.prop?o["s_"+o.prop]=o.obj.currentFrame:o["s_"+o.prop]=o.obj[o.prop],c.push(o),c.length-1}},this.removeLayer=function(e){if(!zot(e)){var t=c[e];t["p_"+t.prop].dispose(),c.splice(e,1)}},this.immediate=function(e){for(var t,o=0;o<c.length;o++)(t=c[o])["p_"+t.prop].immediate(e[o])},this.dispose=function(){return c=null,i&&e.Ticker.remove(h),!0},n=zot(n)?[]:n;for(var c=[],u=0;u<n.length;u++)this.addLayer(n[u]);if(i)var h=e.Ticker.add(r,t);this.step=function(o){for(var n,r,a=0;a<c.length;a++)n=c[a],zot(o)?"mouseX"==n.input?r=t.mouseX:"mouseY"==n.input?r=t.mouseY:"scrollX"==n.input?r=e.scrollX():"scrollY"==n.input&&(r=e.scrollY()):r=o,"scale"==n.prop?n.obj.scaleX=n.obj.scaleY=n["s_"+n.prop]+n["p_"+n.prop].convert(r):"frame"==n.prop?n.obj.gotoAndStop(n["s_"+n.prop]+n["p_"+n.prop].convert(r)):(n.obj[n.prop]=n["s_"+n.prop]+n["p_"+n.prop].convert(r),"mouseX"==n.input&&i&&(n.obj[n.prop]-=n[n.prop]/2))},Object.defineProperty(l,"damp",{get:function(){return d},set:function(e){d=e;for(var t,o=0;o<c.length;o++)(t=c[o])["p_"+t.prop].damp=d}})}else zog("zim build - Parallax(): Please give the stage bounds using setBounds()");else zog("zim build - Parallax(): please pass in the stage with bounds as first parameter")},e.Scroller=function(t,o,n,i,r,a,s){function l(e){p||(p=s.getBounds().width,m=s.getBounds().height),0!=h.speed&&0!=h.direction&&(i?(c.x-=h.speed*h.direction,c.x<u.x?u.x=c.x+z:u.x=c.x-z,h.direction*h.speed>0?u.x<0&&c.x<u.x?c.x=u.x+z:c.x<0&&u.x<c.x&&(u.x=c.x+z):u.x>p&&u.x>c.x?u.x=c.x-z:c.x>p&&c.x>u.x&&(c.x=u.x-z)):(c.y-=h.speed*h.direction,c.y<u.y?u.y=c.y+v:u.y=c.y-v,h.direction*h.speed>0?u.y<0&&c.y<u.y?c.y=u.y+v:c.y<0&&u.y<c.y&&(u.y=c.y+v):u.y>m&&u.y>c.y?u.y=c.y-v:c.y>m&&c.y>u.y&&(c.y=u.y-v)))}var d;if(d=zob(e.Scroller,arguments,"backing, speed, direction, horizontal, gapFix, stage, container",this))return d;z_d("69"),this.cjsEventDispatcher_constructor();var c=this.backing1=t;if(!zot(c)&&c.getBounds){var u=this.backing2=t.clone();c.parent.addChild(u),zot(i)&&(i=!0),zot(r)&&(r=0);var h=this;this.speed=zot(o)?1:o;var f=this.baseSpeed=this.speed;this.direction=zot(n)?1:n;var g=i?c.scaleX:c.scaleY;if(c.getBounds())if(a||c.getStage())if(a=a||c.getStage(),zot(s)&&(s=a),s.getBounds()){var p,m,z=c.getBounds().width*g-r,v=c.getBounds().height*g-r;i?u.x=z:u.y=v;var b=!1,y=e.Ticker.add(l,a);this.paused=!1,this.pause=function(t,o){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(f=h.speed,o>0?(b=!0,e.animate({target:h,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){h.speed=0,h.paused=!0,b=!1,h.dispatchEvent("pause")}})):(b=!1,h.speed=0,h.paused=!0,setTimeout(function(){h.dispatchEvent("pause")},10))):(b=!1,o>0?e.animate({target:h,obj:{pausingSpeed:f},ticker:!1,time:o,call:function(){h.speed=f,h.paused=!1,b=!1}}):(h.speed=f,h.paused=!1)),h},Object.defineProperty(h,"percentSpeed",{get:function(){return 0==h.baseSpeed?NaN:h.speed/h.baseSpeed*100},set:function(e){b||h.paused||(h.speed=h.baseSpeed*e/100)}}),Object.defineProperty(h,"pausingSpeed",{get:function(){return 0==h.baseSpeed?NaN:h.speed/h.baseSpeed*100},set:function(e){h.speed=h.baseSpeed*e/100}}),this.dispose=function(){return zon&&zog("bye from Scroller"),e.Ticker.remove(y),!0}}else zog("zim build - Scroller(): please setBounds() on container or stage if no container");else zog("zim build - Scroller(): please pass in stage parameter or add backing objects to stage to start");else zog("zim build - Scroller(): please setBounds() on backing objects")}},e.extend(e.Scroller,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Dynamo=function(t,o,n,i,r,a,s){function l(){if(f=requestAnimationFrame(l),g=c[u].s,0!=v.speed&&0!=g&&(m=1e3/Math.abs(v.speed)*g,(p=Date.now())-b>m)){b=p;var e=v.frame+(v.speed>0||!s?1:-1),o=!1;e>=c.length&&(o=!0,e=0),e<0&&(o=!0,e=c.length-1),v.frame=e,o&&v.dispatchEvent("loop"),v.dispatchEvent("change"),a&&t.getStage()&&t.getStage().update(),zot(z)||z!=v.frame||(y=!1,v.speed=0,v.paused=!0,v.dispatchEvent("pause"))}}var d;if(d=zob(e.Dynamo,arguments,"sprite, speed, label, startFrame, endFrame, update, reversable",this))return d;z_d("69.2"),this.cjsEventDispatcher_constructor();var c=this.frames=t.parseFrames(n,i,r);if(0!=c.length){this.totalFrames=c.length;var u=0;zot(o)&&(o=30),zot(s)&&(s=!0);var h=this.baseSpeed=this.speed=o;zot(a)&&(a=!1);var f,g,p,m,z,v=this,b=Date.now(),y=!1;l(),this.paused=!1,this.pause=function(t,o,n){return zot(t)&&(t=!0),zot(o)&&(o=0),t?(h=v.speed,zot(n)?o>0?(y=!0,e.animate({target:v,obj:{pausingSpeed:0},ticker:!1,time:o,call:function(){y=!1,v.speed=0,v.paused=!0,v.dispatchEvent("pause")}})):(y=!1,v.speed=0,v.paused=!0,setTimeout(function(){v.dispatchEvent("pause")},10)):(y=!0,z=n)):(z=null,o>0?(y=!0,e.animate({target:v,obj:{pausingSpeed:h},ticker:!1,time:o,call:function(){y=!1,v.speed=h,v.paused=!1}})):(y=!1,v.speed=h,v.paused=!1)),v},Object.defineProperty(v,"frame",{get:function(){return u},set:function(e){u=Math.round(e)%c.length;var o=c[u];zot(o)||(t.frame=o.f)}}),Object.defineProperty(v,"percentSpeed",{get:function(){return 0==v.baseSpeed?NaN:v.speed/v.baseSpeed*100},set:function(e){y||v.paused||(v.speed=v.baseSpeed*e/100)}}),Object.defineProperty(v,"pausingSpeed",{get:function(){return 0==v.baseSpeed?NaN:v.speed/v.baseSpeed*100},set:function(e){v.speed=v.baseSpeed*e/100}}),this.dispose=function(){cancelAnimationFrame(f)}}},e.extend(e.Dynamo,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Accelerator=function(e){z_d("69.3"),this.cjsEventDispatcher_constructor();var t=this;this.paused=!1,this.items=[],this.paused=!1,this._percentSpeed=100,this.add=function(e){var o;o=Array.isArray(e)?e:[e];for(var n=0;n<o.length;n++)t.items.indexOf(o[n])<0&&o[n].pause&&t.items.push(o[n]);return t},e&&this.add(e),this.remove=function(e){var o;o=Array.isArray(e)?e:[e];for(var n,i=0;i<o.length;i++)(n=t.items.indexOf(o[i]))>=0&&t.items.splice(n,1);return t},this.pause=function(e,o,n){function i(o){for(var n=0;n<t.items.length;n++)1!=r[n]&&t.items[n].pause(e)}zot(e)&&(e=!0);var r=[];if(e){zot(n)||(o=null);for(var a=!1,s=0;s<t.items.length;s++)(zot(o)||!zot(n)||t.items[s].totalFrames)&&(!t.items[s].totalFrames||zot(o)&&zot(n))||(t.items[s].pause(!0,o,n),a=!0,r[s]=1,t.items[s].on("pause",function(){t.paused||(i(!0),t.paused=!0,t.dispatchEvent("pause"))},null,!0));a||(i(),t.paused=!0,setTimeout(function(){t.dispatchEvent("pause")},10))}else t.paused=!1,i()},Object.defineProperty(t,"percentSpeed",{get:function(){return t._percentSpeed},set:function(e){t._percentSpeed=e;for(var o=0;o<t.items.length;o++)t.items[o].percentSpeed=e}}),this.dispose=function(){for(var e=0;e<t.items.length;e++)t.items[e].dispose();return!0}},e.extend(e.Accelerator,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Swiper=function(t,o,n,i,r,a,s,l,d){function c(){p=r?z.mouseX:z.mouseY,m=v.target[v.property],v.dispatchEvent("swipedown")}function u(){var e=p-(r?z.mouseX:z.mouseY);y=m-e*i,zot(a)||(y=Math.max(y,a)),zot(s)||(y=Math.min(y,s)),v.desiredValue=y,v.dispatchEvent("swipemove")}function h(){b.canvas?(b.off("stagemousedown",w),b.off("stagemousemove",x),b.off("stagemouseup",C)):(b.off("mousedown",w),b.off("pressmove",x),b.off("pressup",C)),e.Ticker.remove(T)}function f(){b.canvas?b.on("stagemousedown",w):(b.on("mousedown",w),b.on("pressmove",x),b.on("pressup",C)),e.Ticker.add(T,z)}var g;if(g=zob(e.Swiper,arguments,"swipeOn, target, property, sensitivity, horizontal, min, max, damp, integer",this))return g;if(z_d("69.5"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.getStage&&t.getStage()){if(!zot(o)){zot(i)&&(i=1),zot(r)&&(r=!0),zot(l)&&(l=.1),zot(d)&&(d=!1);var p,m,z,v=this,b=t,y=v.desiredValue=o[n];this.target=o,this.property=n;var w,x,C;b.canvas?(w=b.on("stagemousedown",function(){c(),x=b.on("stagemousemove",u),C=b.on("stagemouseup",function(){b.off("stagemousemove",x),b.off("stagemouseup",C),v.dispatchEvent("swipeup")})}),z=b):(z=b.getStage(),w=b.on("mousedown",c),x=b.on("pressmove",u),C=b.on("pressup",function(){v.dispatchEvent("swipeup")}));var S=new e.Damp(v.target[v.property]),T=e.Ticker.add(function(){v.target[v.property]=d?Math.round(S.convert(y)):S.convert(y)},z);this.immediate=function(e){S.immediate(e),v.target[v.property]=d?Math.round(e):e,v.desiredValue=y=e};var k=!0;Object.defineProperty(v,"enabled",{get:function(){return k},set:function(e){k!=e&&(e?f():h(),k=Boolean(e))}}),this.dispose=function(){h(),S=null}}}else zog("zim.Swiper() - please provide container on stage")},e.extend(e.Swiper,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),e.MotionController=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m){function z(e){var t,o="keydown"==n?e.keyCode:e.buttonCode;for(Z=0;Z<4;Z++)if(s[Z].indexOf(o)>-1){if(l||"both"!=j.axis||(_.dirX=_.dirY=0),_["dir"+I[Z]]=D[Z],O[Z]=1,0==(t=A.indexOf(Z)))return;return t>0&&A.splice(t,1),void A.unshift(Z)}}function v(e){var t,o="keydown"==n?e.keyCode:e.buttonCode;for(Z=0;Z<4;Z++)if(s[Z].indexOf(o)>-1){if(O[Z]=0,(t=A.indexOf(Z))>=0&&A.splice(t,1),"both"!=j.axis||l)_["dir"+I[Z]]=-O[2*Math.floor(Z/2)]+O[2*Math.floor(Z/2)+1];else if(A.length>0){_["dir"+I[Z]]=0;var i=A[0];_["dir"+I[i]]=D[i]}else _.dirX=_.dirY=0;return}}function b(e){W.rotation+=e.dirX*j.turnSpeed,j.rotation=W.rotation,W.speedX=Math.sin(W.rotation*Math.PI/180)*j.speed*-e.dirY,W.speedY=-Math.cos(W.rotation*Math.PI/180)*j.speed*-e.dirY,j.x+=W.speedX,j.y+=W.speedY}function y(){var e=x(j.x-j.target.x,j.y-j.target.y);if(M=e.speedX,P=e.speedY,u)if(j.rotation=e.angle,zot(j.rotation))j.rotation=j.target.rotation;else{j.rotation+=E;var t=w(j.rotation),o=j.target.rotation=w(j.target.rotation);Math.abs(t-o)>180&&(o>t?o-=360:t-=360),j.dampR.immediate(o),j.target.rotation=o,j.rotation=t}}function w(e){return(e%360+360)%360}function x(e,t){var o,n=j.speed,i=j.speed,r=Math.sqrt(Math.pow(e,2)+Math.pow(t,2));return r>0&&(n=Math.abs(e)/r*j.speed,i=Math.abs(t)/r*j.speed,o=90-180*Math.atan2(e,t)/Math.PI),{speedX:n,speedY:i,angle:o}}function C(){"keydown"==n?(frame.on("keydown",L),frame.on("keyup",Y),e.Ticker.add(N,k)):"gamebutton"==n?(G.on("buttondown",X),G.on("buttonup",R),e.Ticker.add(N,k)):"gamestick"==n?G.on("data",H):"swipe"==n?(U.enabled=!0,V.enabled=!0,U.on("swipemove",q)):"mousedown"!=n&&"mousemove"!=n||k.on("stage"+n,F),e.Ticker.add(ee,k)}function S(){"keydown"==n?(frame.off("keydown",L),frame.off("keyup",Y),e.Ticker.remove(N)):"gamebutton"==n?(G.off("buttondown",X),G.off("buttonup",R),e.Ticker.remove(N)):"gamestick"==n?G.off("data",H):"swipe"==n?(U.enabled=!1,V.enabled=!1,U.off("swipemove",q)):"mousedown"!=n&&"mousemove"!=n||k.off("stage"+n,F),e.Ticker.remove(ee)}var T;if(T=zob(e.MotionController,arguments,"container, target, type, speed, axis, rect, map, diagonal, damp, flip, rotate, constant, firstPerson, turnSpeed, moveThreshold, stickThreshold",this))return T;if(z_d("69.7"),this.cjsEventDispatcher_constructor(),!zot(t)&&t.getStage)if(zot(t.getStage()))zog("zim Controller(): The Container must be on the stage");else{var k=t.getStage();zot(o)&&(o=new e.Container(1,1)),zot(i)&&(i=7),(zot(n)||"mousemove"!=n&&"keydown"!=n&&"gamebutton"!=n&&"gamestick"!=n&&"swipe"!=n&&"manual"!=n)&&(n="mousedown"),zot(r)&&(r="both"),"keydown"==n&&zot(s)&&(s=[[65,37],[68,39],[87,38],[83,40]]),"gamebutton"==n&&zot(s)&&(s=f?[14,15,e.GamePad.RT,e.GamePad.LT]:[14,15,12,13]),"gamestick"==n&&zot(s)&&(s=f?[[0,2],[0,2],[1],[1]]:[0,0,1,1]),"gamestick"==n&&zot(s)&&(s=[0,0,1,1]),zot(l)&&(l=!0),"horizontal"!=r&&"vertical"!=r||(l=!1),zot(d)&&(d="keydown"==n||"gamebutton"==n?1:.1),zot(f)&&(f=!1),zot(g)&&(g=.4*i),zot(p)&&(p=4),zot(m)&&(m=.2);var j=this;this.dirX=0,this.dirY=0,this.speed=i,this.turnSpeed=g,this.axis=r,this.target=o,this.moveThreshold=p,this.stickThreshold=m;var M=j.speed,P=j.speed,E=0;j.rotation=0,j.x=this.target.x,j.y=this.target.y;var B=j.scaleX=o.scaleX;j.scaleY=o.scaleY;if("keydown"==n||"gamebutton"==n){for(Z=0;Z<4;Z++)Array.isArray(s[Z])||(s[Z]=[s[Z]]);var O=[0,0,0,0],A=[],I=["X","X","Y","Y"],D=[-1,1,-1,1],_={dirX:0,dirY:0};if("keydown"==n)var L=frame.on("keydown",z);else var X=(G=j.gamepad=new e.GamePad).on("buttondown",z);if(zot(h))if("keydown"==n)var Y=frame.on("keyup",v);else var R=G.on("buttonup",v);var W={rotation:0,speedX:j.speed,speedY:j.speed},N=e.Ticker.add(function(){if(f)b(_);else{var e=j.speed,t=j.speed;if("both"==j.axis&&0!=_.dirX&&0!=_.dirY){var o=x(_.dirX,_.dirY);e=o.speedX,t=o.speedY}"horizontal"!=j.axis&&"both"!=j.axis||(j.x+=e*_.dirX),"vertical"!=j.axis&&"both"!=j.axis||(j.y+=t*_.dirY),y()}},k)}else if("mousedown"==n||"mousemove"==n)var F=k.on("stage"+n,function(){var e=t.globalToLocal(k.mouseX,k.mouseY);j.x=e.x,j.y=e.y,y()});else if("gamestick"==n){for(var G=this.gamepad=new e.GamePad,Z=0;Z<4;Z++)Array.isArray(s[Z])||(s[Z]=[s[Z]]);var W={rotation:0,speedX:j.speed,speedY:j.speed},H=G.on("data",function(e){for(var t={dirX:0,dirY:0},o=0;o<s[0].length;o++){n=e.axes[s[0][o]];if(Math.abs(n)>j.stickThreshold){t.dirX=n;break}}for(o=0;o<s[2].length;o++){var n=e.axes[s[2][o]];if(Math.abs(n)>j.stickThreshold){t.dirY=n;break}}f?b(t):(j.x+=j.speed*t.dirX,j.y+=j.speed*t.dirY,y())})}else if("swipe"==n)var U=new e.Swiper(k,j,"x",.8),V=new e.Swiper(k,j,"y",.8,!1),q=U.on("swipemove",function(){y()});var K=this.x=this.target.x,Q=this.y=this.target.y;this.dampX=new e.Damp(K,d),this.dampY=new e.Damp(Q,d),this.dampR=new e.Damp(this.target.rotation,d);var J=0,$=0,ee=e.Ticker.add(function(){if(a&&(j.x=e.constrain(j.x,a.x,a.x+a.width),j.y=e.constrain(j.y,a.y,a.y+a.height)),"horizontal"!=j.axis&&"both"!=j.axis||(j.dirX=e.sign(j.x-K),Math.abs(j.x-K)<M?K=j.x:K+=j.dirX*M,j.target.x=j.dampX.convert(K)),"vertical"!=j.axis&&"both"!=j.axis||(j.dirY=e.sign(j.y-Q),Math.abs(j.y-Q)<P?Q=j.y:Q+=e.sign(j.y-Q)*P,j.target.y=j.dampY.convert(Q)),j.dirX!=J||j.dirY!=$){var t=new createjs.Event("change");if(j.dirX!=J){n=["left",null,"right"];t.dir=n[j.dirX+1],J=j.dirX,"horizontal"!=c&&"both"!=c||(j.scaleX=o.scaleX=j.dirX?Math.abs(o.scaleX)*j.dirX:o.scaleX,E=0!=B&&-1==Math.round(j.scaleX/B)?180:0)}else{var n=["up",null,"down"];t.dir=n[j.dirY+1],$=j.dirY,"vertical"!=c&&"both"!=c||(j.scaleY=o.scaleY=j.dirY?Math.abs(o.scaleY)*j.dirY:o.scaleY)}j.dispatchEvent(t)}j.movingX=Math.abs(K-j.target.x)>j.moveThreshold,j.movingY=Math.abs(Q-j.target.y)>j.moveThreshold,j.moving=j.movingX||j.movingY,u&&!zot(j.rotation)&&(j.target.rotation=j.dampR.convert(j.rotation))},k);this.immediate=function(e,t,o){!zot(e)&&j.dampX&&(j.dampX.immediate(e),j.x=j.target.x=K=e,U&&U.immediate(e)),!zot(t)&&j.dampY&&(j.dampY.immediate(t),j.y=j.target.y=Q=t,V&&V.immediate(t)),!zot(o)&&j.dampR&&(j.dampR.immediate(o),j.rotation=j.target.rotation=o)},this.convert=function(e,t){zot(e)||(j.x=e),zot(t)||(j.y=t),y()};var te=!0;Object.defineProperty(j,"enabled",{get:function(){return te},set:function(e){te!=e&&(e?C():S(),te=Boolean(e))}}),this.dispose=function(){S(),G&&G.dispose(),U&&U.dispose(),V&&U.dispose()}}else zog("zim Controller(): Please pass in a reference to a container as first parameter")},e.extend(e.MotionController,createjs.EventDispatcher,"enabled","cjsEventDispatcher"),e.GamePad=function(){function e(e){function r(){if(n=requestAnimationFrame(r),i.data=navigator.getGamepads()[i.currentIndex],i.data){for(var e=i.buttons=[],t=0;t<i.data.buttons.length;t++)if(e[t]=i.data.buttons[t].pressed,e[t]!=i.lastData[t]){if(i.lastData[t]=e[t],e[t])a=new createjs.Event("buttondown");else var a=new createjs.Event("buttonup");a.buttonCode=t,a.button=o[t],i.dispatchEvent(a)}(a=new createjs.Event("data")).axes=i.axes=i.data.axes,a.buttons=i.buttons,i.dispatchEvent(a)}}i.connected=!0,t("gamepadconnected",e);var a=navigator.getGamepads()[i.currentIndex];i.lastData=[];for(var s=0;s<a.buttons.length;s++)i.lastData[s]=a.buttons[s].pressed;r()}function t(e,t){var o=new createjs.Event(e);o.index=t.gamepad.index,o.id=t.gamepad.id,o.buttons=t.gamepad.buttons,o.axes=t.gamepad.axes,i.dispatchEvent(o)}if(z_d("69.8"),this.cjsEventDispatcher_constructor(),!navigator.getGamepads)return this.error=!0,void(zon&&zog("zim.GamePad() - no browswer support"));var n;window.addEventListener("gamepadconnected",e),this.currentIndex=0;var i=this,r=setInterval(function(){navigator.getGamepads&&navigator.getGamepads()[0]&&(i.connected||e(),clearInterval(r))},500),a=window.addEventListener("gamepaddisconnected",function(e){e.gamepad.index==i.currentIndex&&(cancelAnimationFrame(n),connected=!1,i.dispatchEvent("gamepaddisconnected"))});this.dispose=function(){window.removeEventListener("gamepadconnected",e),window.addEventListener("gamepaddisconnected",a),cancelAnimationFrame(n),clearInterval(r),i.connected=!1}};for(var o=["A","B","X","Y","LB","RB","LT","RT","BACK","START","LS","RS","DPAD_UP","DPAD_DOWN","DPAD_LEFT","DPAD_RIGHT"],n=0;n<o.length;n++)e.GamePad[o[n]]=n;var i=["LSX","LSY","RSX","RSY"];for(n=0;n<i.length;n++)e.GamePad[i[n]]=n;return e.extend(e.GamePad,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.Emitter=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C,S,T,k,j,M,P,E){function B(i){if(X=i,zot(k)&&(k=!X.isWebGL&&e.mobile()),k&&(X.snapToPixelEnabled=!0),X){x||C||L.centerReg(),L.zimInterval=e.interval(L.interval,function(){function i(e,t){return e-t}if(L.startPaused)L.pause();else if(!((t=Array.isArray(L.obj)?L.obj:[L.obj]).length<=0)){var r,a;Array.isArray(L.interval)?(L.interval.sort(i),r=L.interval[0]):r=L.interval.constructor=={}.constructor?L.interval.min:L.interval,Array.isArray(L.num)?(L.num.sort(i),a=L.num[L.num.length-1]):a=L.num.constructor=={}.constructor?L.num.max:L.num,e.loop(zik(L.num),function(){if(L.decayTime>0){var i={};L.shrink&&(i.scale=0),L.fade&&(i.alpha=0)}if(L.pool&&Y.length>0&&W>=Math.max(L.poolMin,(L.life/r+5)*a)){if((s=Y[R++%Y.length]).visible=!0,(c=s.trace?s.getChildAt(0):s).emitShape){d=c.template;c.graphics.c().s(d.s?zik(d.s):null).ss(d.ss?zik(d.ss):null).sd(d.sd?zik(d.sd):null,d.offset?zik(d.offset):null)}s.trace&&s.updateCache(),"top"==L.layers?c.emitShape?s.addTo(L):s.centerReg(L):c.emitShape?s.addTo(L,!0,"bottom"==L.layers?0:e.rand(L.numChildren)):s.centerReg(L,!0,"bottom"==L.layers?0:e.rand(L.numChildren)),s.alpha=1,s.scale(1),c.alpha=c.originalAlpha,c.scaleX=c.originalScaleX,c.scaleY=c.originalScaleY,c.endSpurt=!1}else{W++;var s;L.trace&&((s=new e.Container(o,n)).trace=!0);var l=zik(e.shuffle(t)[0]);if("shape"==l.type){var d=l;(c=new e.Shape(1,1)).emitShape=!0,c.template=d,c.graphics.s(d.s?zik(d.s):null).ss(d.ss?zik(d.ss):null).sd(d.sd?zik(d.sd):null,d.offset?zik(d.offset):null),L.trace?c.addTo(s):"top"==L.layers?c.addTo(L):c.addTo(L,"bottom"==L.layers?0:e.rand(L.numChildren))}else{var c=l.clone();c.centerReg||zimify(c),L.trace?c.centerReg(s).pos(-1e3,-1e3):"top"==L.layers?c.centerReg(L):c.centerReg(L,!0,"bottom"==L.layers?0:e.rand(L.numChildren))}L.trace&&("top"==L.layers?s.addTo(L):s.addTo(L,"bottom"==L.layers?0:e.rand(L.numChildren)),s.cache(f,g,o,n)),L.trace||(s=c),s.particle=c,c.originalAlpha=c.alpha,c.originalScaleX=c.scaleX,c.originalScaleY=c.scaleY}L.currentParticle=c,L.particlesEmitted++,s.particleNormal=!0,s.particleDecaying=!1,s.particleFizzing=!1;var u=zik(L.angle),h=zik(L.force),p=h*Math.cos(u*Math.PI/180),m=h*Math.sin(u*Math.PI/180);c.info={position:{x:o/2,y:n/2},velocity:{x:p,y:m}},L.horizontal&&(c.info.position={x:e.rand(0,o),y:L.vertical?n/2:0}),L.vertical&&(c.info.position={x:L.horizontal?o/2:0,y:e.rand(0,n)}),c.emitShape?c.graphics.mt(c.info.position.x,c.info.position.y):c.pos(c.info.position.x,c.info.position.y),L.random&&e.loop(L.random,function(e,t){val=zik(t),"scale"==e?c.scale(val):("x"==e?c.info.position.x=L.horizontal||L.vertical?val:val+o/2:"y"==e&&(c.info.position.y=L.horizontal||L.vertical?val:val+n/2),c[e]=val,c.emitShape&&c.pos(0,0))}),k&&!c.emitShape&&c.cache(c.getBounds().x-10,c.getBounds().y-10,c.getBounds().width+20,c.getBounds().height+20);var z=!c.emitShape&&L.shrink;if(L.decayTime>0&&(L.fade||z||L.trace&&L.traceFadeTime>0)){if(L.trace&&L.traceFadeTime>0&&s.animate({obj:{alpha:0},time:L.traceFadeTime,wait:L.life-L.traceFadeTime,waitedCall:function(e){e.particleNormal=!1,e.particleFizzing=!0},call:O,override:!1,id:"decay"}),L.fade||z){var v={};L.fade&&(v.alpha=0),z&&(v.scaleX=0,v.scaleY=0),c.animate({obj:v,time:L.decayTime,wait:zot(L.decayStart)?L.life-L.decayTime:L.decayStart,waitedCall:function(e){e.parent!=L&&(e=e.parent),e.particleNormal=!1,e.particleDecaying=!0},call:function(t){L.events&&A("decayed",t),t.endSpurt&&A("spurtDecayed",t),L.trace&&L.traceFadeTime>0||(zot(L.decayStart)||L.decayStart+L.decayTime>L.life?O(t.parent.trace?t.parent:t):function(){var t=s;e.timeout(L.life-(L.decayStart+L.decayTime),function(){O(t)})}())},override:!1,id:"decay"})}}else L.life>0&&function(){var t=s;t.timeOut=e.timeout(L.life,function(){O(t)})}();if(L.events&&A("emitted",s),I(c),L.animation){var b=zik(L.animation);zot(b.override)&&(b.override=!1),c.animate(e.copy(b))}})}},null,!0);this.emitterTicker=e.Ticker.add(function(){e.loop(L,function(t){if(t.trace){var o=t;t=t.getChildAt(0)}var n=t.info,i=0,r=0;if(!zot(L.sink)){var a=L.localToGlobal(n.position.x,n.position.y);if(L.sink.parent&&L.sink.parent.localToGlobal)var s=L.sink.parent.localToGlobal(L.sink.x,L.sink.y);else s=new createjs.Point(zik(L.sink.x),zik(L.sink.y));var l=e.angle(a.x,a.y,s.x,s.y),i=L.sinkForce*Math.cos(l*Math.PI/180),r=L.sinkForce*Math.sin(l*Math.PI/180)}var d=L.wind+i,c=L.gravity+r;n.velocity.x+=d*frameRate,n.velocity.y+=c*frameRate,n.position.x+=n.velocity.x*frameRate*100,n.position.y+=n.velocity.y*frameRate*100,t.emitShape?t.graphics.lt(n.position.x,n.position.y):(t.x=n.position.x,t.y=n.position.y),L.trace&&o&&o.updateCache(t.emitShape?null:"source-over")})},X);frameRate=1/e.Ticker.framerate}}function O(e){if(L.events&&A("fizzed",e),(e.trace?e.getChildAt(0).endSpurt:e.endSpurt)&&(A("spurtFizzed",e),L.spurting=!1),L.pool&&"end"!=e.pooled)return e.pooled?void(e.visible=!1):(e.pooled=!0,Y.push(e),void(e.visible=!1));L.removeChild(e),L.trace&&e.uncache(),e=null}function A(e,t){var o=new createjs.Event(e);o.particle=t.trace?t.getChildAt(0):t,L.dispatchEvent(o)}function I(e){zot(L.spurtCount)&&zot(L.spurtNum)||++L.spurtCount>=L.spurtNum&&D(e)}function D(e){L.pause(),L.spurtCount=L.spurtNum=null,A("spurted",e),e.endSpurt=!0}var _;if(_=zob(e.Emitter,arguments,"obj, width, height, interval, num, life, fade, shrink, decayTime, decayStart, trace, traceFadeTime, traceShiftX, traceShiftY, angle, force, gravity, wind, layers, animation, random, horizontal, vertical, sink, sinkForce, cache, events, startPaused, pool, poolMin",this))return _;z_d("69.9"),zot(t)&&(t=[]),zot(o)&&(o=300),zot(n)&&(n=300),zot(i)&&(i=20),"number"==typeof i&&(i=Math.max(10,i)),zot(r)&&(r=1),zot(u)&&(u=!1),zot(h)&&(h=d),zot(f)&&(f=0),zot(g)&&(g=0),zot(a)&&(a=1e3),zot(s)&&(s=!0),zot(l)&&(l=!u),zot(d)&&(d=1e3),zot(p)&&(p={min:0,max:360}),zot(m)&&(m=5),zot(z)&&(z=9.8),zot(v)&&(v=0),zot(b)&&(b="top"),zot(o)&&(o=100),zot(n)&&(n=100),zot(x)&&(x=!1),zot(C)&&(C=!1),!zot(S)&&zot(T)&&(T=10),zot(j)&&(j=!1),zot(M)&&(M=!1),zot(P)&&(P=!0),zot(E)&&(E=0),this.zimContainer_constructor(o,n);var L=this;L.obj=t,L.interval=i,L.num=r,L.life=a,L.fade=s,L.shrink=l,L.decayTime=d,L.decayStart=c,L.trace=u,L.traceFadeTime=h,L.traceShiftX=f,L.traceShiftY=g,L.angle=p,L.force=m,L.gravity=z,L.wind=v,L.layers=b,L.animation=y,L.random=w,L.horizontal=x,L.vertical=C,L.sink=S,L.sinkForce=T,L.events=j,L.startPaused=M,L.pool=P,L.poolMin=E,L.particlesEmitted=0;var X,Y=[],R=0,W=0;e.added(L,B),Object.defineProperty(L,"interval",{get:function(){return i},set:function(e){i=e,L.zimInterval&&(L.zimInterval.time=i)}}),this.spurting=!1,this.spurt=function(t,o,n){var i;if(i=zob(L.spurt,arguments,"num, time, restart"))return i;zot(o)||(e.timeout(zik(o),function(){D(L.currentParticle)}),L.spurting=!0),zot(t)||(L.spurtNum=zik(t),L.spurtCount=0,L.spurting=!0),L.pause(!1,n,null,!0)},this.clearPool=function(){e.loop(L,function(e){e.pooled="end",e.visible||L.removeChild(e)},!0),W=0,R=0,Y=[]},L.startPaused||(this.paused=!1),this.pause=function(t,o,n,i){if(L.startPaused=null,zot(t)&&(t=!0),zot(o)&&(o=!1),zot(n)&&(n=!1),t){if(L.paused)return L;n&&(emitterTicker&&e.Ticker.remove(emitterTicker),e.loop(L,function(e){e.pauseZimAnimate(),e.trace&&e.getChildAt(0).pauseZimAnimate(),e.timeOut&&e.timeOut.pause()})),L.zimInterval.pause(),L.paused=!0}else{if(!L.paused)return L;o&&(e.loop(L,function(e){e.stopZimAnimate(),e.timeOut&&e.timeOut.clear(),e.trace&&e.getChildAt(0).pauseZimAnimate()}),L.removeAllChildren()),X&&emitterTicker&&!e.Ticker.has(X,emitterTicker)&&(e.Ticker.add(emitterTicker,X),e.loop(L,function(e){e.pauseZimAnimate(!1),e.timeOut&&e.timeOut.pause(!1),e.trace&&e.getChildAt(0).pauseZimAnimate(!1)})),L.zimInterval.pause(!1,i),L.paused=!1}return L},this.resize=function(e,t){zot(e)||(o=e),zot(t)||(n=t),L.setBounds(0,0,o,n),x||C||L.centerReg(),L.clearPool()},this.clone=function(){var t;return t=Array.isArray(L.obj)||L.obj.constructor=={}.constructor?e.copy(L.obj):L.obj.clone?L.obj.clone():L.obj,L.cloneProps(new e.Emitter(t,o,n,L.interval,L.num,L.life,L.fade,L.shrink,L.decayTime,L.decayStart,L.trace,L.traceFadeTime,L.traceShiftX,L.traceShiftY,L.angle,L.force,L.gravity,L.wind,L.layers,L.animation,e.copy(L.random),L.horizontal,L.vertical,L.sink,L.sinkForce,k,L.events,M,L.pool,L.poolMin))},this.dispose=function(){return emitterTicker&&e.Ticker.remove(emitterTicker),e.loop(L,function(e){e.stopZimAnimate()}),L.zimInterval.clear(),!0}},e.extend(e.Emitter,e.Container,"clone","zimContainer",!1),e.SoundWave=function(t,o,n,i,r,a,s){function l(i){i.connect(h),"mic"!=o&&h.connect(u.destination),h.fftSize=2*e.SoundWave.bufferLength;var r=Math.floor(n*e.SoundWave.bufferLength/t);if(r<1)zog("ZIM SoundWave: inlcude param is too small or num param is too big");else{var a=h.frequencyBinCount,l=new Uint8Array(a);c.calculate=function(){h.getByteFrequencyData(l);var t=l.map(s);if(1==r)return t;for(var i=[],a=0,d=0;d<n*e.SoundWave.bufferLength;d++)a+=l[d],0!=d&&d%r==0&&(i.push(a/r),a=0);return i.push(a/r),"mic"!=o&&(i[0]*=.75,i[1]*=.9,i[2]*=.95),i[i.length-1]*=1.3,i[i.length-2]*=1.2,i[i.length-3]*=1.1,i},setTimeout(function(){c.dispatchEvent("ready")},50)}}var d;if(d=zob(e.SoundWave,arguments,"num, input, include, smoothing, min, max, operation",this))return d;z_d("69.95"),zot(t)&&(t=120),zot(o)&&(o="mic"),zot(n)&&(n=.1171875),zot(i)&&(i=.85),zot(r)&&(r="mic"==o?-80:-100),zot(a)&&(a="mic"==o?-40:-10),zot(s)&&(s=function(t,o){return t*(.5+1*o/Math.pow(e.SoundWave.bufferLength,.9))}),e.SoundWave.bufferLength=1024,this.num=t;var c=this,u=new(window.AudioContext||window.webkitAudioContext),h=c.analyser=u.createAnalyser();if(h.minDecibels=r,h.maxDecibels=a,h.smoothingTimeConstant=i,"mic"==o)return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,void(navigator.getUserMedia?navigator.getUserMedia({audio:!0},function(e){l(c.source=u.createMediaStreamSource(e))},function(e){zog("ZIM SoundWave: Error occured: "+e)}):zog("ZIM SoundWave: Sorry, mic not supported"));if(o.type&&"sound"==o.type)zog("ZIM SoundWave: pass in the result of a zim.asset('somesound').play() for the input");else{if(o.playbackResource)f=o.playbackResource;else var f=o;l(u.createMediaElementSource(f))}},e.extend(e.SoundWave,createjs.EventDispatcher,null,"cjsEventDispatcher",!1),zon&&zog("ZIM FRAME"),e.Frame=function(t,o,n,i,r,a,s,l,d,c,u,h,f,g,p,m,z,v,b,y,w,x,C){function S(){if(!W){if(W=!0,-1==O.indexOf(t)){if(_=t,zot(zid(_)))return void zog("zim.Frame - scaling: HTML tag with id="+t+" must exist");L=this.tag=zid(_),t=zot(o)||zot(n)?"tag":"inline","myCanvas"==c&&(c=_+"Canvas")}zot(o)&&(o=500),zot(n)&&(n=500),T(),k(),B?(s&&setTimeout(function(){window.scrollTo(0,0)},50),setTimeout(function(){j(),E.dispatchEvent("ready"),R=!0,M()},100),h>100&&setTimeout(function(){j(),M()},h)):(E.dispatchEvent("ready"),R=!0,M())}}function T(){var o=E.canvas=document.createElement("canvas");o.setAttribute("id",c),"full"==t||"tag"==t?(o.setAttribute("width",e.windowWidth()),o.setAttribute("height",e.windowHeight())):(o.setAttribute("width",X),o.setAttribute("height",Y)),"tag"==t||"inline"==t?L.appendChild(o):document.body.appendChild(o),zot(i)||(o.style.backgroundColor=i),"full"!=t&&"fit"!=t&&"outside"!=t||(o.style.position="absolute",document.body.style.overflow="hidden")}function k(){j(),-1!=O.indexOf(t)&&(E.zil=zil()),A=y?new createjs.StageGL(c,w):new createjs.Stage(c),!zot(i)&&y&&A.setClearColor(e.convertColor(i)),A.setBounds(0,0,X,Y),A.width=X,A.height=Y,r&&A.enableMouseOver(10),a&&createjs.Touch.enable(A,!0),x&&(A.nextStage=x.stage),C&&(A.nextStage=C)}function j(){var o,n,i=zid(c),r=e.windowWidth(),a=e.windowHeight();if((I=E.orientation=r>a?"horizontal":"vertical")!=D&&(D=I,E.dispatchEvent("orientation")),B&&s&&setTimeout(function(){window.scrollTo(0,0)},100),i){if("fit"==t)E.scale=r/a>=X/Y?a/Y:r/X;else if("outside"==t)E.scale=r/a>=X/Y?r/X:a/Y;else{if("full"==t)return i.style.left=i.style.top="0px",i.width=X=r,i.height=Y=a,void(A&&(A.setBounds(0,0,X,Y),A.width=X,A.height=Y,y&&A.updateViewport(X,Y)));if("tag"==t)return X=L.offsetWidth,Y=L.offsetHeight,A&&(A.setBounds(0,0,X,Y),A.width=X,A.height=Y,y&&A.updateViewport(X,Y)),L.style.overflow="hidden",void(i.style.left=i.style.top="0px");if("inline"==t)return A&&(A.setBounds(0,0,X,Y),A.width=X,A.height=Y,y&&A.updateViewport(X,Y)),void(i.style.left=i.style.top="0px")}n=Y*E.scale,o=X*E.scale,i.style.width=o+"px",i.style.height=n+"px",E.x="left"==l?0:"right"==l?r-o:(r-o)/2,E.y="top"==d?0:"bottom"==d?a-n:(a-n)/2,i.style.left=E.x+"px",i.style.top=E.y+"px"}}function M(){R&&(E.dispatchEvent("resize"),!e.OPTIMIZE&&A&&"full"==t&&A.update())}var P;if(P=zob(e.Frame,arguments,"scaling, width, height, color, rollover, touch, scrollTop, align, valign, canvasID, rollPerSecond, delay, handleTabs, tabHighlight, tabHighlightScale, tabHighlightAlpha, tabHighlightTime, tabHighlightObject, canvasCheck, gpu, gpuObj, nextFrame, nextStage",this))return P;z_d("83"),this.cjsEventDispatcher_constructor();var E=this;if("undefined"==typeof zimDefaultFrame&&(zimDefaultFrame=this),zot(b)&&(b=!0),!!window.HTMLCanvasElement||!b){var B=e.mobile();zot(t)&&(t="full"),zot(r)&&(r=!B),zot(a)&&(a=!0),zot(s)&&(s=!0),zot(l)&&(l="center"),zot(d)&&(d="center"),zot(c)&&(c="myCanvas"),zot(u)&&(u=20),zot(h)&&(h=0),zot(f)&&(f=!0),zot(g)&&(g=!0),zot(p)&&(p=.8),zot(m)&&(m=.3),zot(z)&&(z=700),zot(v)&&(v=new e.Circle(100,"white")),zot(y)&&(y=!1);var O=["fit","outside","full"];this.scale=1,this.x=0,this.y=0;var A,I,D,_,L,X=o,Y=n,R=!1,W=!1;"interactive"===document.readyState||"complete"===document.readyState?setTimeout(function(){S()},200):document.addEventListener("DOMContentLoaded",S);var N,F=!1,G="full"==t&&"undefined"!=typeof InstallTrigger;window.addEventListener("resize",function(){G?F||(F=!0,N=e.Ticker.update,e.Ticker.update=!1,setTimeout(function(){F=!1,A==zimDefaultFrame.stage&&(e.Ticker.update=N)},40),setTimeout(function(){j(),M()},20)):(j(),M(),h>0&&B&&setTimeout(function(){j(),M()},h))}),this.loadAssetsCount=0,this.assets={},this.loadAssets=function(t,o,n,i){if(!zot(t)){zot(n)&&(n=!1),Array.isArray(t)||(t=[t]),zot(i)&&(i=0);var r,a,s,l=!1,d=[],c=/\.([^.]+)$/i;for(s=0;s<t.length;s++)a=(r=t[s]).match(c),createjs.Sound.SUPPORTED_EXTENSIONS.indexOf(a[1])>=0&&(l=!0),d.push({src:r});var u=new e.Queue;E.loadAssetsCount++,E.isLoading=!0;var h=u.preload=E.preload=new createjs.LoadQueue(n,o);l&&h.installPlugin(createjs.Sound),h.on("progress",function(e){u.dispatchEvent(e),E.dispatchEvent(e)}),h.on("error",function(e){u.dispatchEvent(e),E.dispatchEvent(e)}),h.on("fileload",function(t){var o,n=t.item,i=t.item.type;n.id.match(c);o=i&&i==createjs.LoadQueue.SOUND?E.assets[n.id]={type:"sound",id:n.id,play:function(e){var t=createjs.Sound.play(n.id,e);return t.getStage=function(){return A},t}}:i==createjs.LoadQueue.IMAGE?E.assets[n.id]=new e.Bitmap(t.result,n.id):E.assets[n.id]=t.result;var r=new createjs.Event("assetload");r.item=n,r.asset=o,u.dispatchEvent(t),E.dispatchEvent(r)});var f=Date.now();return E.preloadEvent=h.on("complete",function(e){var t=Date.now();i=Math.max(0,i-(t-f)),setTimeout(function(){--E.loadAssetsCount<=0&&(E.isLoading=!1),u.isLoading=!1,u.dispatchEvent(e),E.dispatchEvent(e)},i)}),h.loadManifest(d),u}},this.asset=function(e){if(!zot(e))return E.assets[e]||{play:function(){if(zon)return zog("zim.Frame - asset("+e+") not found"),{}}}},Object.defineProperty(E,"stage",{get:function(){return A},set:function(e){zog("zim.Frame(): stage is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(E,"width",{get:function(){return X},set:function(e){zog("zim.Frame(): width is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(E,"height",{get:function(){return Y},set:function(e){zog("zim.Frame(): height is read only - see remakeCanvas(), perhaps")}}),Object.defineProperty(this,"color",{get:function(){return i},set:function(t){i=t,zot(t)?zid(c).style.backgroundColor="default":(zid(c).style.backgroundColor=i,!zot(i)&&y&&A.setClearColor(e.convertColor(i)))}});var Z=[];Object.defineProperty(this,"tabOrder",{get:function(){return Z},set:function(e){Z=e}}),this.remakeCanvas=function(e,o){"full"!=t&&(zot(e)&&(e=X),zot(o)&&(o=Y),zid(c)&&zid(c).parentNode.removeChild(zid(c)),X=e,Y=o,T(),k())};var H=new createjs.Event("keydown");this.eventRemove=H.remove,window.addEventListener("keydown",function(e){e.remove=E.eventRemove,9==e.keyCode&&(e.shiftKey?E.tab(-1):E.tab(1),f&&e.preventDefault()),E.altKey=e.altKey,E.ctrlKey=e.ctrlKey,E.metaKey=e.metaKey,E.shiftKey=e.shiftKey,E.dispatchEvent(e)}),window.addEventListener("keyup",function(e){e.remove=E.eventRemove,E.altKey=e.altKey,E.ctrlKey=e.ctrlKey,E.metaKey=e.metaKey,E.shiftKey=e.shiftKey,E.dispatchEvent(e)});var U;this.tab=function(t){clearTimeout(U),zot(t)&&(t=1);for(var o=0;o<Z.length;o++){var n=Z[o];if(n.focus){n.focus=!1,(n=Z[(o+t+100*Z.length)%Z.length]).focus=!0;var i=e.boundsToGlobal(n);v.alp(m).addTo(frame.stage),v.fit(i.x,i.y,i.width,i.height),v.scale(v.scaleX*p),U=setTimeout(function(){frame.stage.removeChild(v)},z);break}}},this.dispose=function(){return window.removeEventListener("resize",j),A.removeAllChildren(),A.removeAllEventListeners(),zid(c)&&zid(c).parentNode.removeChild(zid(c)),A=null,E=null,!0},this.orange="#f58e25",this.green="#acd241",this.pink="#e472c4",this.blue="#50c4b7",this.brown="#d1a170",this.yellow="#ebcb35",this.silver="#999999",this.tin="#777777",this.grey="#555555",this.gray="#555555",this.lighter="#eeeeee",this.light="#cccccc",this.dark="#333333",this.darker="#111111",this.purple="#993399",this.black="#000000",this.white="#FFFFFF",this.clear="rgba(0,0,0,0)",this.faint="rgba(0,0,0,.01)",this.makeCircles=function(t){zot(t)&&(t=100);var o=[E.orange,E.green,E.pink,E.blue,E.brown,E.dark],n=new e.Shape,i=n.graphics;n.radius=t;for(var r=0;r<o.length;r++)i.f(o[r]).dc(0,0,n.radius/o.length*(o.length-r));return n.setBounds(-n.radius,-n.radius,2*n.radius,2*n.radius),n}}else setTimeout(function(){E.dispatchEvent("failed")},100)},e.extend(e.Frame,createjs.EventDispatcher,"clone","cjsEventDispatcher",!1),e.Queue=function(){this.cjsEventDispatcher_constructor(),this.isLoading=!0},e.extend(e.Queue,createjs.EventDispatcher,null,"cjsEventDispatcher"),e.DISTILL=!1,e.distillery=[],e.distill=function(){zog("zim.distill() - go to http://zimjs.com/code/distill and enter the following:"),zog(e.distillery.length>0?e.distillery.join(" "):"must set zim.DISTILL = true;")},e}(zim||{}))||{});